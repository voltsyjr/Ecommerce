/*! For license information please see main.2522c989.js.LICENSE.txt */
!function(){var e={688:function(e,t,n){"use strict";n.d(t,{Er:function(){return o},F6:function(){return c},H:function(){return a},H5:function(){return l},Mc:function(){return s},Zf:function(){return f},vs:function(){return u}});var r=n(9733),i=n(6599),a=function(e){return{type:r.TR,payload:e}},o=function(e){return{type:r.b1,payload:e}},u=function(){return{type:r.ph}},s=function(e){return{type:r.QE,payload:e}},c=function(e,t){return function(n){n({type:r.ch}),i.I.createUserWithEmailAndPassword(e,t).then((function(e){var t=e.user;n(function(e){return{type:r.bp,payload:e}}(t))})).catch((function(e){return n(function(e){return{type:r.YY,payload:e}}(e.message))}))}},l=function(e,t){return function(n){n({type:r.Re}),i.I.signInWithEmailAndPassword(e,t).then((function(e){var t=e.user;n(function(e){return{type:r.XP,payload:e}}(t))})).catch((function(e){return n(function(e){return{type:r.Qj,payload:e}}(e.message))}))}},f=function(){return function(e){e({type:r._J}),i.I.signOut().then((function(t){e({type:r.$x})})).catch((function(t){e(function(e){return{type:r.ek,payload:e}}(t.message))}))}}},9733:function(e,t,n){"use strict";n.d(t,{$x:function(){return f},QE:function(){return c},Qj:function(){return s},Re:function(){return o},TR:function(){return d},XP:function(){return u},YY:function(){return a},_J:function(){return l},b1:function(){return p},bp:function(){return i},ch:function(){return r},ek:function(){return h},ph:function(){return v}});var r="REGISTER_START",i="REGISTER_SUCCESS",a="REGISTER_FAIL",o="LOGIN_START",u="LOGIN_SUCCESS",s="LOGIN_FAIL",c="SET_USER",l="LOGOUT_START",f="LOGOUT_SUCCESS",h="LOGOUT_FAIL",d="ADD_TO_BASKET",p="REMOVE_FROM_BASKET",v="EMPTY_BASKET"},6599:function(e,t,n){"use strict";n.d(t,{I:function(){return YZ},db:function(){return $Z}});var r={};n.r(r),n.d(r,{FirebaseError:function(){return C},SDK_VERSION:function(){return Ve},_DEFAULT_ENTRY_NAME:function(){return Ee},_addComponent:function(){return Ae},_addOrOverwriteComponent:function(){return De},_apps:function(){return Ce},_clearComponents:function(){return Le},_components:function(){return Ne},_getProvider:function(){return Oe},_registerComponent:function(){return Re},_removeServiceInstance:function(){return Pe},deleteApp:function(){return qe},getApp:function(){return ze},getApps:function(){return Be},initializeApp:function(){return je},onLog:function(){return We},registerVersion:function(){return Ge},setLogLevel:function(){return He}});var i=n(4942),a=n(5671),o=n(3144),u=n(7762),s=n(9439),c=n(7326),l=n(136),f=n(7277),h=n(8664),d=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},p={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(d(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new v;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},v=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return(0,o.Z)(n)}((0,h.Z)(Error)),y=function(e){return function(e){var t=d(e);return p.encodeByteArray(t,!0)}(e).replace(/\./g,"")},m=function(e){try{return p.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function g(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=g(e[n],t[n]));return e}var k=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},b=function(){try{return k()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&m(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},w=function(){var e;return null===(e=b())||void 0===e?void 0:e.config},x=function(){function e(){var t=this;(0,a.Z)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return(0,o.Z)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function _(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function I(){var e,t=null===(e=b())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Z(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function S(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function E(){var e=_();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){try{return"object"===typeof indexedDB}catch(e){return!1}}var C=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var o;return(0,a.Z)(this,n),(o=t.call(this,r)).code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf((0,c.Z)(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,c.Z)(o),N.prototype.create),o}return(0,o.Z)(n)}((0,h.Z)(Error)),N=function(){function e(t,n,r){(0,a.Z)(this,e),this.service=t,this.serviceName=n,this.errors=r}return(0,o.Z)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(A,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new C(n,a,t)}}]),e}();var A=/\{\$([^}]+)}/g;function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function R(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(O(u)&&O(s)){if(!R(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function O(e){return null!==e&&"object"===typeof e}function P(e){for(var t=[],n=function(){var e=(0,s.Z)(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function L(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,s.Z)(n,2),i=r[0],a=r[1];t[decodeURIComponent(i)]=decodeURIComponent(a)}})),t}function M(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function F(e,t){var n=new U(e,t);return n.subscribe.bind(n)}var U=function(){function e(t,n){var r=this;(0,a.Z)(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return(0,o.Z)(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=(0,u.Z)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function V(){}function j(e){return e&&e._delegate?e._delegate:e}var z=n(4165),B=n(3433),q=n(5861),K=function(){function e(t,n,r){(0,a.Z)(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,o.Z)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),G="[DEFAULT]",W=function(){function e(t,n){(0,a.Z)(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,o.Z)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new x;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:G})}catch(l){}var t,n=(0,u.Z)(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,s.Z)(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch(l){}}}catch(f){n.e(f)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,B.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,B.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=(0,u.Z)(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var c=(0,s.Z)(i.value,2),l=c[0],f=c[1];r===this.normalizeInstanceIdentifier(l)&&f.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=(0,u.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(n_){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===G?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(n_){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G;return this.component?this.component.multipleInstances?e:G:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var H,Q,$=function(){function e(t){(0,a.Z)(this,e),this.name=t,this.providers=new Map}return(0,o.Z)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new W(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Y=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Q||(Q={}));var J={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},X=Q.INFO,ee=(H={},(0,i.Z)(H,Q.DEBUG,"log"),(0,i.Z)(H,Q.VERBOSE,"log"),(0,i.Z)(H,Q.INFO,"info"),(0,i.Z)(H,Q.WARN,"warn"),(0,i.Z)(H,Q.ERROR,"error"),H),te=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ee[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ne=function(){function e(t){(0,a.Z)(this,e),this.name=t,this._logLevel=X,this._logHandler=te,this._userLogHandler=null,Y.push(this)}return(0,o.Z)(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Q))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?J[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Q.DEBUG].concat(t)),this._logHandler.apply(this,[this,Q.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Q.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Q.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Q.INFO].concat(t)),this._logHandler.apply(this,[this,Q.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Q.WARN].concat(t)),this._logHandler.apply(this,[this,Q.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Q.ERROR].concat(t)),this._logHandler.apply(this,[this,Q.ERROR].concat(t))}}]),e}();var re,ie,ae=n(1413),oe=function(e,t){return t.some((function(t){return e instanceof t}))};var ue=new WeakMap,se=new WeakMap,ce=new WeakMap,le=new WeakMap,fe=new WeakMap;var he={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return se.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ce.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ve(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function de(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ye(this),n),ve(ue.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ve(e.apply(ye(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[ye(this),t].concat(r));return ce.set(a,t.sort?t.sort():[t]),ve(a)}}function pe(e){return"function"===typeof e?de(e):(e instanceof IDBTransaction&&function(e){if(!se.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));se.set(e,t)}}(e),oe(e,re||(re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,he):e)}function ve(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ve(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&ue.set(t,e)})).catch((function(){})),fe.set(t,e),t}(e);if(le.has(e))return le.get(e);var t=pe(e);return t!==e&&(le.set(e,t),fe.set(t,e)),t}var ye=function(e){return fe.get(e)};var me,ge,ke=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],we=new Map;function xe(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(we.get(t))return we.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=be.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||ke.includes(n))){var a=function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var a,o,u,s,c,l,f=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return we.set(t,a),a}}}he=function(e){return(0,ae.Z)((0,ae.Z)({},e),{},{get:function(t,n,r){return xe(t,n)||e.get(t,n,r)},has:function(t,n){return!!xe(t,n)||e.has(t,n)}})}(he);var _e=function(){function e(t){(0,a.Z)(this,e),this.container=t}return(0,o.Z)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ie="@firebase/app",Ze="0.9.7",Se=new ne("@firebase/app"),Ee="[DEFAULT]",Te=(me={},(0,i.Z)(me,Ie,"fire-core"),(0,i.Z)(me,"@firebase/app-compat","fire-core-compat"),(0,i.Z)(me,"@firebase/analytics","fire-analytics"),(0,i.Z)(me,"@firebase/analytics-compat","fire-analytics-compat"),(0,i.Z)(me,"@firebase/app-check","fire-app-check"),(0,i.Z)(me,"@firebase/app-check-compat","fire-app-check-compat"),(0,i.Z)(me,"@firebase/auth","fire-auth"),(0,i.Z)(me,"@firebase/auth-compat","fire-auth-compat"),(0,i.Z)(me,"@firebase/database","fire-rtdb"),(0,i.Z)(me,"@firebase/database-compat","fire-rtdb-compat"),(0,i.Z)(me,"@firebase/functions","fire-fn"),(0,i.Z)(me,"@firebase/functions-compat","fire-fn-compat"),(0,i.Z)(me,"@firebase/installations","fire-iid"),(0,i.Z)(me,"@firebase/installations-compat","fire-iid-compat"),(0,i.Z)(me,"@firebase/messaging","fire-fcm"),(0,i.Z)(me,"@firebase/messaging-compat","fire-fcm-compat"),(0,i.Z)(me,"@firebase/performance","fire-perf"),(0,i.Z)(me,"@firebase/performance-compat","fire-perf-compat"),(0,i.Z)(me,"@firebase/remote-config","fire-rc"),(0,i.Z)(me,"@firebase/remote-config-compat","fire-rc-compat"),(0,i.Z)(me,"@firebase/storage","fire-gcs"),(0,i.Z)(me,"@firebase/storage-compat","fire-gcs-compat"),(0,i.Z)(me,"@firebase/firestore","fire-fst"),(0,i.Z)(me,"@firebase/firestore-compat","fire-fst-compat"),(0,i.Z)(me,"fire-js","fire-js"),(0,i.Z)(me,"firebase","fire-js-all"),me),Ce=new Map,Ne=new Map;function Ae(e,t){try{e.container.addComponent(t)}catch(n){Se.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function De(e,t){e.container.addOrOverwriteComponent(t)}function Re(e){var t=e.name;if(Ne.has(t))return Se.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ne.set(t,e);var n,r=(0,u.Z)(Ce.values());try{for(r.s();!(n=r.n()).done;){Ae(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Oe(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Pe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ee;Oe(e,t).clearInstance(n)}function Le(){Ne.clear()}var Me=(ge={},(0,i.Z)(ge,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,i.Z)(ge,"bad-app-name","Illegal App name: '{$appName}"),(0,i.Z)(ge,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,i.Z)(ge,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,i.Z)(ge,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,i.Z)(ge,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,i.Z)(ge,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,i.Z)(ge,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,i.Z)(ge,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,i.Z)(ge,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,i.Z)(ge,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),ge),Fe=new N("app","Firebase",Me),Ue=function(){function e(t,n,r){var i=this;(0,a.Z)(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new K("app",(function(){return i}),"PUBLIC"))}return(0,o.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Fe.create("app-deleted",{appName:this._name})}}]),e}(),Ve="9.19.1";function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Ee,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Fe.create("bad-app-name",{appName:String(i)});if(n||(n=w()),!n)throw Fe.create("no-options");var a=Ce.get(i);if(a){if(R(n,a.options)&&R(r,a.config))return a;throw Fe.create("duplicate-app",{appName:i})}var o,s=new $(i),c=(0,u.Z)(Ne.values());try{for(c.s();!(o=c.n()).done;){var l=o.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new Ue(n,r,s);return Ce.set(i,f),f}function ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=Ce.get(e);if(!t&&e===Ee)return je();if(!t)throw Fe.create("no-app",{appName:e});return t}function Be(){return Array.from(Ce.values())}function qe(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ce.has(n)){e.next=6;break}return Ce.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e,t,n){var r,i=null!==(r=Te[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Se.warn(u.join(" "))}Re(new K("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function We(e,t){if(null!==e&&"function"!==typeof e)throw Fe.create("invalid-log-argument");!function(e,t){var n,r=(0,u.Z)(Y);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=J[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Q[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function He(e){var t;t=e,Y.forEach((function(e){e.setLogLevel(t)}))}var Qe="firebase-heartbeat-database",$e=1,Ye="firebase-heartbeat-store",Je=null;function Xe(){return Je||(Je=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ve(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ve(u.result),e.oldVersion,e.newVersion,ve(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(Qe,$e,{upgrade:function(e,t){if(0===t)e.createObjectStore(Ye)}}).catch((function(e){throw Fe.create("idb-open",{originalErrorMessage:e.message})}))),Je}function et(e){return tt.apply(this,arguments)}function tt(){return tt=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe();case 3:return n=e.sent,e.abrupt("return",n.transaction(Ye).objectStore(Ye).get(it(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof C?Se.warn(e.t0.message):(r=Fe.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Se.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),tt.apply(this,arguments)}function nt(e,t){return rt.apply(this,arguments)}function rt(){return rt=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe();case 3:return r=e.sent,i=r.transaction(Ye,"readwrite"),a=i.objectStore(Ye),e.next=8,a.put(n,it(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof C?Se.warn(e.t0.message):(o=Fe.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Se.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),rt.apply(this,arguments)}function it(e){return"".concat(e.name,"!").concat(e.options.appId)}var at=function(){function e(t){var n=this;(0,a.Z)(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new lt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return(0,o.Z)(e,[{key:"triggerHeartbeat",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ot(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n,r,i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ot(),n=ut(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=y(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ot(){return(new Date).toISOString().substring(0,10)}function ut(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=(0,u.Z)(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ft(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ft(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var st,ct,lt=function(){function e(t){(0,a.Z)(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,o.Z)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,et(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",nt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",nt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,B.Z)(r.heartbeats),(0,B.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ft(e){return y(JSON.stringify({version:2,heartbeats:e})).length}st="",Re(new K("platform-logger",(function(e){return new _e(e)}),"PRIVATE")),Re(new K("heartbeat",(function(e){return new at(e)}),"PRIVATE")),Ge(Ie,Ze,st),Ge(Ie,Ze,"esm2017"),Ge("fire-js","");var ht=function(){function e(t,n){var r=this;(0,a.Z)(this,e),this._delegate=t,this.firebase=n,Ae(t,new K("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return(0,o.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),qe(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ee;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ee;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ae(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){De(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),dt=(ct={},(0,i.Z)(ct,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,i.Z)(ct,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ct),pt=new N("app-compat","Firebase",dt);var vt=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(r){var i=je(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(D(t,i.name))return t[i.name];var a=new e(i,n);return t[i.name]=a,a},app:i,registerVersion:Ge,setLogLevel:He,onLog:We,apps:null,SDK_VERSION:Ve,INTERNAL:{registerComponent:function(t){var r=t.name,a=r.replace("-compat","");if(Re(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw pt.create("invalid-app-argument",{appName:r});return e[a]()};void 0!==t.serviceProps&&g(o,t.serviceProps),n[a]=o,e.prototype[a]=function(){for(var e=this._getService.bind(this,r),n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!D(t,e=e||Ee))throw pt.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,n}(ht);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){g(t,e)},createSubscribe:F,ErrorFactory:N,deepExtend:g}),t}(),yt=new ne("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){yt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var mt=self.firebase.SDK_VERSION;mt&&mt.indexOf("LITE")>=0&&yt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var gt=vt;!function(e){Ge("@firebase/app-compat","0.2.7",e)}();gt.registerVersion("firebase","9.19.1","app-compat");var kt=n(4506),bt=n(1120);function wt(){return wt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,bt.Z)(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},wt.apply(this,arguments)}function xt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var _t;Object.create;var It={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Zt="EMAIL_SIGNIN",St="PASSWORD_RESET",Et="RECOVER_EMAIL",Tt="REVERT_SECOND_FACTOR_ADDITION",Ct="VERIFY_AND_CHANGE_EMAIL",Nt="VERIFY_EMAIL";function At(){return(0,i.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Dt=function(){var e;return e={},(0,i.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,i.Z)(e,"argument-error",""),(0,i.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,i.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,i.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,i.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,i.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,i.Z)(e,"cors-unsupported","This browser is not supported."),(0,i.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,i.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,i.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,i.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,i.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,i.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,i.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,i.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,i.Z)(e,"expired-action-code","The action code has expired."),(0,i.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,i.Z)(e,"internal-error","An internal AuthError has occurred."),(0,i.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,i.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,i.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,i.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,i.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,i.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,i.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,i.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,i.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,i.Z)(e,"invalid-email","The email address is badly formatted."),(0,i.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,i.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,i.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,i.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,i.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,i.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,i.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,i.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,i.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,i.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,i.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,i.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,i.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,i.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,i.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,i.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,i.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,i.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,i.Z)(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),(0,i.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,i.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,i.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,i.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,i.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,i.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,i.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,i.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,i.Z)(e,"missing-password","A non-empty password must be provided"),(0,i.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,i.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,i.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,i.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,i.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,i.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,i.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,i.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,i.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,i.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,i.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,i.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,i.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,i.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,i.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,i.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,i.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,i.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,i.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,i.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,i.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,i.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,i.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,i.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,i.Z)(e,"timeout","The operation has timed out."),(0,i.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,i.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,i.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,i.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,i.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,i.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,i.Z)(e,"unverified-email","The operation requires a verified email."),(0,i.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,i.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,i.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,i.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,i.Z)(e,"user-signed-out",""),(0,i.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,i.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,i.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Rt=At,Ot=new N("auth","Firebase",At()),Pt=new ne("@firebase/auth");function Lt(e){if(Pt.logLevel<=Q.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Pt.error.apply(Pt,["Auth (".concat(Ve,"): ").concat(e)].concat(n))}}function Mt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw jt.apply(void 0,[e].concat(n))}function Ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jt.apply(void 0,[e].concat(n))}function Ut(e,t,n){var r=Object.assign(Object.assign({},Rt()),(0,i.Z)({},t,n));return new N("auth","Firebase",r).create(t,{appName:e.name})}function Vt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Mt(e,"argument-error"),Ut(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function jt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=(0,B.Z)(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat((0,B.Z)(o)))}return Ot.create.apply(Ot,[e].concat(n))}function zt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw jt.apply(void 0,[t].concat(r))}}function Bt(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Lt(t),new Error(t)}function qt(e,t){e||Bt(t)}var Kt=new Map;function Gt(e){qt(e instanceof Function,"Expected a class definition");var t=Kt.get(e);return t?(qt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Kt.set(e,t),t)}function Wt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ht(){return"http:"===Qt()||"https:"===Qt()}function Qt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var $t=function(){function e(t,n){(0,a.Z)(this,e),this.shortDelay=t,this.longDelay=n,qt(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())||S()}return(0,o.Z)(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ht()||Z()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Yt(e,t){qt(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Jt=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Xt=(_t={},(0,i.Z)(_t,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,i.Z)(_t,"MISSING_CUSTOM_TOKEN","internal-error"),(0,i.Z)(_t,"INVALID_IDENTIFIER","invalid-email"),(0,i.Z)(_t,"MISSING_CONTINUE_URI","internal-error"),(0,i.Z)(_t,"INVALID_PASSWORD","wrong-password"),(0,i.Z)(_t,"MISSING_PASSWORD","missing-password"),(0,i.Z)(_t,"EMAIL_EXISTS","email-already-in-use"),(0,i.Z)(_t,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,i.Z)(_t,"INVALID_IDP_RESPONSE","invalid-credential"),(0,i.Z)(_t,"INVALID_PENDING_TOKEN","invalid-credential"),(0,i.Z)(_t,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,i.Z)(_t,"MISSING_REQ_TYPE","internal-error"),(0,i.Z)(_t,"EMAIL_NOT_FOUND","user-not-found"),(0,i.Z)(_t,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,i.Z)(_t,"EXPIRED_OOB_CODE","expired-action-code"),(0,i.Z)(_t,"INVALID_OOB_CODE","invalid-action-code"),(0,i.Z)(_t,"MISSING_OOB_CODE","internal-error"),(0,i.Z)(_t,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,i.Z)(_t,"INVALID_ID_TOKEN","invalid-user-token"),(0,i.Z)(_t,"TOKEN_EXPIRED","user-token-expired"),(0,i.Z)(_t,"USER_NOT_FOUND","user-token-expired"),(0,i.Z)(_t,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,i.Z)(_t,"INVALID_CODE","invalid-verification-code"),(0,i.Z)(_t,"INVALID_SESSION_INFO","invalid-verification-id"),(0,i.Z)(_t,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,i.Z)(_t,"MISSING_SESSION_INFO","missing-verification-id"),(0,i.Z)(_t,"SESSION_EXPIRED","code-expired"),(0,i.Z)(_t,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,i.Z)(_t,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,i.Z)(_t,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,i.Z)(_t,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,i.Z)(_t,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,i.Z)(_t,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,i.Z)(_t,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,i.Z)(_t,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,i.Z)(_t,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,i.Z)(_t,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,i.Z)(_t,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),_t),en=new $t(3e4,6e4);function tn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function nn(e,t,n,r){return rn.apply(this,arguments)}function rn(){return rn=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i){var a,o=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",an(t,a,(0,q.Z)((0,z.Z)().mark((function e(){var a,o,u,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=P(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Jt.fetch()(cn(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),rn.apply(this,arguments)}function an(e,t,n){return on.apply(this,arguments)}function on(){return on=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Xt),n),e.prev=2,a=new ln(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw fn(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=(0,s.Z)(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw fn(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw fn(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw fn(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Ut(t,p,d);case 34:Mt(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof C)){e.next=41;break}throw e.t0;case 41:Mt(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),on.apply(this,arguments)}function un(e,t,n,r){return sn.apply(this,arguments)}function sn(){return sn=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i){var a,o,u=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,nn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Mt(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),sn.apply(this,arguments)}function cn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Yt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ln=function(){function e(t){var n=this;(0,a.Z)(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Ft(n.auth,"network-request-failed"))}),en.get())}))}return(0,o.Z)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function fn(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Ft(e,t,r);return i.customData._tokenResponse=n,i}function hn(e,t){return dn.apply(this,arguments)}function dn(){return dn=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),dn.apply(this,arguments)}function pn(e,t){return vn.apply(this,arguments)}function vn(){return vn=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),vn.apply(this,arguments)}function yn(e,t){return mn.apply(this,arguments)}function mn(){return mn=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),mn.apply(this,arguments)}function gn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function kn(){return kn=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i,a,o,u,s=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=j(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,zt((a=wn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:gn(bn(a.auth_time)),issuedAtTime:gn(bn(a.iat)),expirationTime:gn(bn(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),kn.apply(this,arguments)}function bn(e){return 1e3*Number(e)}function wn(e){var t=e.split("."),n=(0,s.Z)(t,3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Lt("JWT malformed, contained fewer than 3 sections"),null;try{var o=m(i);return o?JSON.parse(o):(Lt("Failed to decode base64 JWT payload"),null)}catch(u){return Lt("Caught error parsing JWT payload as JSON",null===u||void 0===u?void 0:u.toString()),null}}function xn(e,t){return _n.apply(this,arguments)}function _n(){return _n=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof C&&In(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),_n.apply(this,arguments)}function In(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Zn=function(){function e(t){(0,a.Z)(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return(0,o.Z)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout((0,q.Z)((0,z.Z)().mark((function t(){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Sn=function(){function e(t,n){(0,a.Z)(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return(0,o.Z)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=gn(this.lastLoginAt),this.creationTime=gn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function En(e){return Tn.apply(this,arguments)}function Tn(){return Tn=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,xn(t,yn(r,{idToken:i}));case 6:zt(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=xt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=Nn(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Sn(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Tn.apply(this,arguments)}function Cn(){return(Cn=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j(t),e.next=3,En(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,B.Z)(n),(0,B.Z)(t))}function An(e,t){return Dn.apply(this,arguments)}function Dn(){return Dn=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,an(t,{},(0,q.Z)((0,z.Z)().mark((function e(){var r,i,a,o,u,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=P({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=cn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Jt.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}var Rn=function(){function e(){(0,a.Z)(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return(0,o.Z)(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){zt(e.idToken,"internal-error"),zt("undefined"!==typeof e.idToken,"internal-error"),zt("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=wn(e);return zt(t,"internal-error"),zt("undefined"!==typeof t.exp,"internal-error"),zt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],zt(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Bt("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(zt("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(zt("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(zt("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function On(e,t){zt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Pn=function(){function e(t){(0,a.Z)(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,o=xt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?(0,B.Z)(o.providerData):[],this.metadata=new Sn(o.createdAt||void 0,o.lastLoginAt||void 0)}return(0,o.Z)(e,[{key:"getIdToken",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xn(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(zt(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return kn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Cn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(zt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){zt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,En(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,xn(this,hn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;zt(k&&_,t,"internal-error");var I=Rn.fromJSON(this.name,_);zt("string"===typeof k,t,"internal-error"),On(f,t.name),On(h,t.name),zt("boolean"===typeof b,t,"internal-error"),zt("boolean"===typeof w,t,"internal-error"),On(d,t.name),On(p,t.name),On(v,t.name),On(y,t.name),On(m,t.name),On(g,t.name);var Z=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(Z.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(Z._redirectEventId=y),Z}},{key:"_fromIdTokenResponse",value:function(){var t=(0,q.Z)((0,z.Z)().mark((function t(n,r){var i,a,o,u=arguments;return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Rn).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,En(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Ln=function(){function e(){(0,a.Z)(this,e),this.type="NONE",this.storage={}}return(0,o.Z)(e,[{key:"_isAvailable",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ln.type="NONE";var Mn=Ln;function Fn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Un=function(){function e(t,n,r){(0,a.Z)(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,o=i.config,u=i.name;this.fullUserKey=Fn(this.userKey,o.apiKey,u),this.fullPersistenceKey=Fn("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return(0,o.Z)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Pn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=(0,q.Z)((0,z.Z)().mark((function t(n,r){var i,a,o,s,c,l,f,h,d,p,v,y=arguments;return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Gt(Mn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Gt(Mn),s=Fn(i,n.config.apiKey,n.name),c=null,l=(0,u.Z)(r),t.prev=10,l.s();case 12:if((f=l.n()).done){t.next=29;break}return h=f.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(d=t.sent)){t.next=23;break}return p=Pn._fromJSON(n,d),h!==o&&(c=p),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(v=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!c){t.next=44;break}return t.next=44,o._set(s,c.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Vn(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(jn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Gn(t))return"Blackberry";if(Wn(t))return"Webos";if(zn(t))return"Safari";if((t.includes("chrome/")||Bn(t))&&!t.includes("edge/"))return"Chrome";if(Kn(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/firefox\//i.test(e)}function zn(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:_()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/crios\//i.test(e)}function qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/iemobile/i.test(e)}function Kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/android/i.test(e)}function Gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/blackberry/i.test(e)}function Wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/webos/i.test(e)}function Hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return Hn(e)||Kn(e)||Wn(e)||Gn(e)||/windows phone/i.test(e)||qn(e)}function $n(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Vn(_());break;case"Worker":t="".concat(Vn(_()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ve,"/").concat(r)}var Yn=function(){function e(t){(0,a.Z)(this,e),this.auth=t,this.queue=[]}return(0,o.Z)(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i,a,o,s,c;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=(0,u.Z)(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=(0,u.Z)(n);try{for(o.s();!(s=o.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){o.e(f)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Jn=function(){function e(t,n,r){(0,a.Z)(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new er(this),this.idTokenSubscription=new er(this),this.beforeStateQueue=new Yn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ot,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return(0,o.Z)(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Gt(t)),this._initializationPromise=this.queue((0,q.Z)((0,z.Z)().mark((function r(){var i,a;return(0,z.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Un.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i,a,o,u,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return zt(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,En(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?j(t):null)&&zt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r=this,i=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&zt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue((0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue((0,q.Z)((0,z.Z)().mark((function n(){return(0,z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Gt(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new N("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return zt(n=t&&Gt(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Un.create(this,[Gt(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue((0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue((0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return zt(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return zt(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$n(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,i.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Xn(e){return j(e)}var er=function(){function e(t){var n=this;(0,a.Z)(this,e),this.auth=t,this.observer=null,this.addObserver=F((function(e){return n.observer=e}))}return(0,o.Z)(e,[{key:"next",get:function(){return zt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function tr(e,t,n){var r=Xn(e);zt(r._canInitEmulator,r,"emulator-config-failed"),zt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=nr(t),o=function(e){var t=nr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:rr(r.substr(a.length+1))}}var o=r.split(":"),u=(0,s.Z)(o,2);return{host:u[0],port:rr(u[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function nr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function rr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ir=function(){function e(t,n){(0,a.Z)(this,e),this.providerId=t,this.signInMethod=n}return(0,o.Z)(e,[{key:"toJSON",value:function(){return Bt("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Bt("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Bt("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Bt("not implemented")}}]),e}();function ar(e,t){return or.apply(this,arguments)}function or(){return or=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nn(t,"POST","/v1/accounts:resetPassword",tn(t,n)));case 1:case"end":return e.stop()}}),e)}))),or.apply(this,arguments)}function ur(e,t){return sr.apply(this,arguments)}function sr(){return sr=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),sr.apply(this,arguments)}function cr(e,t){return lr.apply(this,arguments)}function lr(){return lr=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nn(t,"POST","/v1/accounts:update",tn(t,n)));case 1:case"end":return e.stop()}}),e)}))),lr.apply(this,arguments)}function fr(e,t){return hr.apply(this,arguments)}function hr(){return hr=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",un(t,"POST","/v1/accounts:signInWithPassword",tn(t,n)));case 1:case"end":return e.stop()}}),e)}))),hr.apply(this,arguments)}function dr(e,t){return pr.apply(this,arguments)}function pr(){return pr=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nn(t,"POST","/v1/accounts:sendOobCode",tn(t,n)));case 1:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}function vr(e,t){return yr.apply(this,arguments)}function yr(){return yr=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,n));case 1:case"end":return e.stop()}}),e)}))),yr.apply(this,arguments)}function mr(e,t){return gr.apply(this,arguments)}function gr(){return gr=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,n));case 1:case"end":return e.stop()}}),e)}))),gr.apply(this,arguments)}function kr(e,t){return br.apply(this,arguments)}function br(){return br=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,n));case 1:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}function wr(e,t){return xr.apply(this,arguments)}function xr(){return xr=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,n));case 1:case"end":return e.stop()}}),e)}))),xr.apply(this,arguments)}function _r(e,t){return Ir.apply(this,arguments)}function Ir(){return Ir=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",un(t,"POST","/v1/accounts:signInWithEmailLink",tn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function Zr(e,t){return Sr.apply(this,arguments)}function Sr(){return Sr=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",un(t,"POST","/v1/accounts:signInWithEmailLink",tn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sr.apply(this,arguments)}var Er=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,a.Z)(this,n),(o=t.call(this,"password",i))._email=e,o._password=r,o._tenantId=u,o}return(0,o.Z)(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",fr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",_r(t,{email:this._email,oobCode:this._password}));case 5:Mt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ur(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Zr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Mt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ir);function Tr(e,t){return Cr.apply(this,arguments)}function Cr(){return Cr=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",un(t,"POST","/v1/accounts:signInWithIdp",tn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}var Nr=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return(0,o.Z)(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Tr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Tr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Tr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=P(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mt("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=xt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ir);function Ar(e,t){return Dr.apply(this,arguments)}function Dr(){return Dr=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nn(t,"POST","/v1/accounts:sendVerificationCode",tn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Dr.apply(this,arguments)}function Rr(){return Rr=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",un(t,"POST","/v1/accounts:signInWithPhoneNumber",tn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Rr.apply(this,arguments)}function Or(){return Or=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(t,"POST","/v1/accounts:signInWithPhoneNumber",tn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw fn(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}var Pr=(0,i.Z)({},"USER_NOT_FOUND","user-not-found");function Lr(){return Lr=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",un(t,"POST","/v1/accounts:signInWithPhoneNumber",tn(t,r),Pr));case 2:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}var Mr=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,"phone","phone")).params=e,r}return(0,o.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Rr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Or.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Lr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ir);var Fr=function(){function e(t){var n,r,i,o,u,s;(0,a.Z)(this,e);var c=L(M(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,f=null!==(r=c.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);zt(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(u=c.languageCode)&&void 0!==u?u:null,this.tenantId=null!==(s=c.tenantId)&&void 0!==s?s:null}return(0,o.Z)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=L(M(e)).link,n=t?L(M(t)).deep_link_id:null,r=L(M(e)).deep_link_id;return(r?L(M(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(n_){return null}}}]),e}();var Ur=function(){function e(){(0,a.Z)(this,e),this.providerId=e.PROVIDER_ID}return(0,o.Z)(e,null,[{key:"credential",value:function(e,t){return Er._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Fr.parseLink(t);return zt(n,"argument-error"),Er._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ur.PROVIDER_ID="password",Ur.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ur.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Vr=function(){function e(t){(0,a.Z)(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return(0,o.Z)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),jr=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).scopes=[],e}return(0,o.Z)(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,B.Z)(this.scopes)}}]),n}(Vr),zr=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return zt(e.idToken||e.accessToken,"argument-error"),Nr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return zt("providerId"in t&&"signInMethod"in t,"argument-error"),Nr._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(jr),Br=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,"facebook.com")}return(0,o.Z)(n,null,[{key:"credential",value:function(e){return Nr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(n_){return null}}}]),n}(jr);Br.FACEBOOK_SIGN_IN_METHOD="facebook.com",Br.PROVIDER_ID="facebook.com";var qr=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return(0,o.Z)(n,null,[{key:"credential",value:function(e,t){return Nr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(n_){return null}}}]),n}(jr);qr.GOOGLE_SIGN_IN_METHOD="google.com",qr.PROVIDER_ID="google.com";var Kr=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,"github.com")}return(0,o.Z)(n,null,[{key:"credential",value:function(e){return Nr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(n_){return null}}}]),n}(jr);Kr.GITHUB_SIGN_IN_METHOD="github.com",Kr.PROVIDER_ID="github.com";var Gr=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return(0,o.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return Tr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Tr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Tr(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ir),Wr=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,a.Z)(this,n),zt(e.startsWith("saml."),"argument-error"),t.call(this,e)}return(0,o.Z)(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Gr.fromJSON(e);return zt(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Gr._create(r,n)}catch(i){return null}}}]),n}(Vr),Hr=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,"twitter.com")}return(0,o.Z)(n,null,[{key:"credential",value:function(e,t){return Nr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(n_){return null}}}]),n}(jr);function Qr(e,t){return $r.apply(this,arguments)}function $r(){return $r=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",un(t,"POST","/v1/accounts:signUp",tn(t,n)));case 1:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}Hr.TWITTER_SIGN_IN_METHOD="twitter.com",Hr.PROVIDER_ID="twitter.com";var Yr=function(){function e(t){(0,a.Z)(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return(0,o.Z)(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=(0,q.Z)((0,z.Z)().mark((function t(n,r,i){var a,o,u,s,c=arguments;return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Pn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Jr(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=(0,q.Z)((0,z.Z)().mark((function t(n,r,i){var a;return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Jr(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Jr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Xr(){return Xr=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xn(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Yr({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Qr(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Yr._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Xr.apply(this,arguments)}var ei=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,o){var u,s;return(0,a.Z)(this,n),(u=t.call(this,r.code,r.message)).operationType=i,u.user=o,Object.setPrototypeOf((0,c.Z)(u),n.prototype),u.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},u}return(0,o.Z)(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(C);function ti(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ei._fromErrorAndOperation(e,n,t,r);throw n}))}function ni(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ri(e,t){return ii.apply(this,arguments)}function ii(){return ii=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j(t),e.next=3,ui(!0,r,n);case 3:return e.t0=pn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=ni(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),ii.apply(this,arguments)}function ai(e,t){return oi.apply(this,arguments)}function oi(){return oi=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=xn,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Yr._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),oi.apply(this,arguments)}function ui(e,t,n){return si.apply(this,arguments)}function si(){return(si=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,En(n);case 2:i=ni(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",zt(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ci(e,t){return li.apply(this,arguments)}function li(){return li=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,xn(t,ti(i,a,n,t),r);case 6:return zt((o=e.sent).idToken,i,"internal-error"),zt(u=wn(o.idToken),i,"internal-error"),s=u.sub,zt(t.uid===s,i,"user-mismatch"),e.abrupt("return",Yr._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Mt(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),li.apply(this,arguments)}function fi(e,t){return hi.apply(this,arguments)}function hi(){return hi=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o,u=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,ti(t,i,n);case 4:return a=e.sent,e.next=7,Yr._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),hi.apply(this,arguments)}function di(e,t){return pi.apply(this,arguments)}function pi(){return pi=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fi(Xn(t),n));case 1:case"end":return e.stop()}}),e)}))),pi.apply(this,arguments)}function vi(e,t){return yi.apply(this,arguments)}function yi(){return(yi=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j(t),e.next=3,ui(!1,r,n.providerId);case 3:return e.abrupt("return",ai(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mi(e,t){return gi.apply(this,arguments)}function gi(){return(gi=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ci(j(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ki(e,t){return bi.apply(this,arguments)}function bi(){return bi=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",un(t,"POST","/v1/accounts:signInWithCustomToken",tn(t,n)));case 1:case"end":return e.stop()}}),e)}))),bi.apply(this,arguments)}function wi(){return wi=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xn(t),e.next=3,ki(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Yr._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),wi.apply(this,arguments)}var xi=function(){function e(t,n){(0,a.Z)(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return(0,o.Z)(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?_i._fromServerResponse(e,t):"totpInfo"in t?Ii._fromServerResponse(e,t):Mt(e,"internal-error")}}]),e}(),_i=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return(0,o.Z)(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(xi),Ii=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,a.Z)(this,n),t.call(this,"totp",e)}return(0,o.Z)(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(xi);function Zi(e,t,n){var r;zt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),zt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(zt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(zt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Si(){return Si=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=j(t),a={requestType:"PASSWORD_RESET",email:n},r&&Zi(i,a,r),e.next=5,mr(i,a);case 5:case"end":return e.stop()}}),e)}))),Si.apply(this,arguments)}function Ei(){return Ei=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar(j(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Ei.apply(this,arguments)}function Ti(){return Ti=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(j(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Ti.apply(this,arguments)}function Ci(e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j(t),e.next=3,ar(r,{oobCode:n});case 3:i=e.sent,zt(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return zt(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:zt(i.mfaInfo,r,"internal-error");case 13:zt(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=xi._fromServerResponse(Xn(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Ai(){return Ai=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ci(j(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Ai.apply(this,arguments)}function Di(e,t,n){return Ri.apply(this,arguments)}function Ri(){return Ri=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xn(t),e.next=3,Qr(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Yr._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Ri.apply(this,arguments)}function Oi(){return Oi=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=j(t),a={requestType:"EMAIL_SIGNIN",email:n},zt(r.handleCodeInApp,i,"argument-error"),r&&Zi(i,a,r),e.next=6,kr(i,a);case 6:case"end":return e.stop()}}),e)}))),Oi.apply(this,arguments)}function Pi(){return Pi=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=j(t),zt((a=Ur.credentialWithLink(n,r||Wt()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",di(i,a));case 4:case"end":return e.stop()}}),e)}))),Pi.apply(this,arguments)}function Li(e,t){return Mi.apply(this,arguments)}function Mi(){return Mi=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nn(t,"POST","/v1/accounts:createAuthUri",tn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mi.apply(this,arguments)}function Fi(){return Fi=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ht()?Wt():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Li(j(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Fi.apply(this,arguments)}function Ui(){return(Ui=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Zi(r.auth,a,n),e.next=8,vr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vi(){return(Vi=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o,u;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=j(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Zi(i.auth,o,r),e.next=8,wr(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ji(e,t){return zi.apply(this,arguments)}function zi(){return zi=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),zi.apply(this,arguments)}function Bi(){return(Bi=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o,u,s,c;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=j(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,xn(a,ji(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qi(e,t,n){return Ki.apply(this,arguments)}function Ki(){return Ki=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o,u;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,xn(t,ur(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Ki.apply(this,arguments)}var Gi=(0,o.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,a.Z)(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Wi=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,o){var u;return(0,a.Z)(this,n),(u=t.call(this,e,r,i)).username=o,u}return(0,o.Z)(n)}(Gi),Hi=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){return(0,a.Z)(this,n),t.call(this,e,"facebook.com",r)}return(0,o.Z)(n)}(Gi),Qi=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){return(0,a.Z)(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return(0,o.Z)(n)}(Wi),$i=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){return(0,a.Z)(this,n),t.call(this,e,"google.com",r)}return(0,o.Z)(n)}(Gi),Yi=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){return(0,a.Z)(this,n),t.call(this,e,"twitter.com",r,i)}return(0,o.Z)(n)}(Wi);function Ji(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=wn(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Gi(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Hi(a,i);case"github.com":return new Qi(a,i);case"google.com":return new $i(a,i);case"twitter.com":return new Yi(a,i,e.screenName||null);case"custom":case"anonymous":return new Gi(a,null);default:return new Gi(a,r,i)}}(n)}var Xi=function(){function e(t,n,r){(0,a.Z)(this,e),this.type=t,this.credential=n,this.auth=r}return(0,o.Z)(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,i.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ea=function(){function e(t,n,r){(0,a.Z)(this,e),this.session=t,this.hints=n,this.signInResolver=r}return(0,o.Z)(e,[{key:"resolveSignIn",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Xn(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return xi._fromServerResponse(r,e)}));zt(i.mfaPendingCredential,r,"internal-error");var o=Xi._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var a,u,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Yr._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return zt(n.user,r,"internal-error"),e.abrupt("return",Yr._forOperation(n.user,n.operationType,u));case 17:Mt(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ta(e,t){return nn(e,"POST","/v2/accounts/mfaEnrollment:start",tn(e,t))}function na(e,t){return nn(e,"POST","/v2/accounts/mfaEnrollment:start",tn(e,t))}function ra(e,t){return nn(e,"POST","/v2/accounts/mfaEnrollment:finalize",tn(e,t))}function ia(e,t){return nn(e,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(e,t))}var aa=function(){function e(t){var n=this;(0,a.Z)(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return xi._fromServerResponse(t.auth,e)})))}))}return(0,o.Z)(e,[{key:"getSession",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Xi,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,xn(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,xn(this.user,ia(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),oa=new WeakMap;var ua="__sak",sa=function(){function e(t,n){(0,a.Z)(this,e),this.storageRetriever=t,this.type=n}return(0,o.Z)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ua,"1"),this.storage.removeItem(ua),Promise.resolve(!0)):Promise.resolve(!1)}catch(n_){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ca=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=_();return zn(e)||Hn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Qn(),e._shouldAllowMigration=!0,e}return(0,o.Z)(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);E()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,r){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt((0,bt.Z)(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt((0,bt.Z)(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt((0,bt.Z)(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(sa);ca.type="LOCAL";var la=ca,fa=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return(0,o.Z)(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(sa);fa.type="SESSION";var ha=fa;function da(e){return Promise.all(e.map(function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var pa=function(){function e(t){(0,a.Z)(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return(0,o.Z)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i,a,o,u,s,c;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,da(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function va(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}pa.receivers=[];var ya=function(){function e(t){(0,a.Z)(this,e),this.target=t,this.handlers=new Set}return(0,o.Z)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=va("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function ma(){return window}function ga(){return"undefined"!==typeof ma().WorkerGlobalScope&&"function"===typeof ma().importScripts}function ka(){return ba.apply(this,arguments)}function ba(){return(ba=(0,q.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function wa(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var xa="firebaseLocalStorageDb",_a="firebaseLocalStorage",Ia="fbase_key",Za=function(){function e(t){(0,a.Z)(this,e),this.request=t}return(0,o.Z)(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Sa(e,t){return e.transaction([_a],t?"readwrite":"readonly").objectStore(_a)}function Ea(){var e=indexedDB.deleteDatabase(xa);return new Za(e).toPromise()}function Ta(){var e=indexedDB.open(xa,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(_a,{keyPath:Ia})}catch(r){n(r)}})),e.addEventListener("success",(0,q.Z)((0,z.Z)().mark((function n(){var r;return(0,z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(_a)){n.next=12;break}return r.close(),n.next=5,Ea();case 5:return n.t0=t,n.next=8,Ta();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ca(e,t,n){return Na.apply(this,arguments)}function Na(){return Na=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Sa(t,!0).put((a={},(0,i.Z)(a,Ia,n),(0,i.Z)(a,"value",r),a)),e.abrupt("return",new Za(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),Na.apply(this,arguments)}function Aa(e,t){return Da.apply(this,arguments)}function Da(){return Da=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sa(t,!1).get(n),e.next=3,new Za(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Da.apply(this,arguments)}function Ra(e,t){var n=Sa(e,!0).delete(t);return new Za(n).toPromise()}var Oa=function(){function e(){(0,a.Z)(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return(0,o.Z)(e,[{key:"_openDb",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ta();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ga()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=pa._getInstance(ga()?self:null),this.receiver._subscribe("keyChanged",function(){var e=(0,q.Z)((0,z.Z)().mark((function e(n,r){var i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new ya(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&wa()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ta();case 5:return t=e.sent,e.next=8,Ca(t,ua,"1");case 8:return e.next=10,Ra(t,ua);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite((0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ca(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Aa(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite((0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ra(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n,r,i,a,o,s,c,l,f,h;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Sa(e,!1).getAll();return new Za(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=(0,u.Z)(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,c=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(c)&&(this.notifyListeners(s,c),n.push(s))}catch(d){i.e(d)}finally{i.f()}for(l=0,f=Object.keys(this.localCache);l<f.length;l++)h=f[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,q.Z)((0,z.Z)().mark((function t(){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Oa.type="LOCAL";var Pa=Oa;function La(e,t){return nn(e,"POST","/v2/accounts/mfaSignIn:start",tn(e,t))}function Ma(e,t){return nn(e,"POST","/v2/accounts/mfaSignIn:finalize",tn(e,t))}function Fa(e){return Ua.apply(this,arguments)}function Ua(){return Ua=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Ua.apply(this,arguments)}function Va(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Ft("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ja(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var za=1e12,Ba=function(){function e(t){(0,a.Z)(this,e),this.auth=t,this.counter=za,this._widgets=new Map}return(0,o.Z)(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new qa(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||za;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||za;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||za,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),qa=function(){function e(t,n,r){var i=this;(0,a.Z)(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var o="string"===typeof t?document.getElementById(t):t;zt(o,"argument-error",{appName:n}),this.container=o,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return(0,o.Z)(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Ka=ja("rcb"),Ga=new $t(3e4,6e4),Wa=function(){function e(){var t;(0,a.Z)(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=ma().grecaptcha)||void 0===t?void 0:t.render)}return(0,o.Z)(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return zt(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(ma().grecaptcha):new Promise((function(r,i){var a=ma().setTimeout((function(){i(Ft(e,"network-request-failed"))}),Ga.get());ma()[Ka]=function(){ma().clearTimeout(a),delete ma()[Ka];var o=ma().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Ft(e,"internal-error"))},Va("".concat("https://www.google.com/recaptcha/api.js?","?").concat(P({onload:Ka,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Ft(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=ma().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Ha=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"load",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ba(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Qa="recaptcha",$a={theme:"light",type:"image"},Ya=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},$a),r=arguments.length>2?arguments[2]:void 0;(0,a.Z)(this,e),this.parameters=n,this.type=Qa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xn(r),this.isInvisible="invisible"===this.parameters.size,zt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;zt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ha:new Wa,this.validateStartingState()}return(0,o.Z)(e,[{key:"verify",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n,r,i=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){zt(!this.parameters.sitekey,this.auth,"argument-error"),zt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),zt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=ma()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){zt(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zt(Ht()&&!ga(),this.auth,"internal-error"),e.next=3,Ja();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Fa(this.auth);case 8:zt(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return zt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Ja(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Xa=function(){function e(t,n){(0,a.Z)(this,e),this.verificationId=t,this.onConfirmation=n}return(0,o.Z)(e,[{key:"confirm",value:function(e){var t=Mr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function eo(){return eo=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xn(t),e.next=3,io(i,n,j(r));case 3:return a=e.sent,e.abrupt("return",new Xa(a,(function(e){return di(i,e)})));case 5:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(e,t,n){return no.apply(this,arguments)}function no(){return(no=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=j(t),e.next=3,ui(!1,i,"phone");case 3:return e.next=5,io(i.auth,n,j(r));case 5:return a=e.sent,e.abrupt("return",new Xa(a,(function(e){return vi(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ro(){return(ro=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=j(t),e.next=3,io(i.auth,n,j(r));case 3:return a=e.sent,e.abrupt("return",new Xa(a,(function(e){return mi(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function io(e,t,n){return ao.apply(this,arguments)}function ao(){return ao=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,zt("string"===typeof a,t,"argument-error"),zt(r.type===Qa,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return zt("enroll"===u.type,t,"internal-error"),e.next=13,ta(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return zt("signin"===u.type,t,"internal-error"),zt(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,La(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ar(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ao.apply(this,arguments)}function oo(){return(oo=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ai(j(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var uo=function(){function e(t){(0,a.Z)(this,e),this.providerId=e.PROVIDER_ID,this.auth=Xn(t)}return(0,o.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return io(this.auth,e,j(t))}}],[{key:"credential",value:function(e,t){return Mr._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Mr._fromTokenResponse(n,r):null}}]),e}();function so(e,t){return t?Gt(t):(zt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}uo.PROVIDER_ID="phone",uo.PHONE_SIGN_IN_METHOD="phone";var co=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,"custom","custom")).params=e,r}return(0,o.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return Tr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Tr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Tr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ir);function lo(e){return fi(e.auth,new co(e),e.bypassAuthState)}function fo(e){var t=e.auth,n=e.user;return zt(n,t,"internal-error"),ci(n,new co(e),e.bypassAuthState)}function ho(e){return po.apply(this,arguments)}function po(){return po=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,zt(r=t.user,n,"internal-error"),e.abrupt("return",ai(r,new co(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),po.apply(this,arguments)}var vo=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,a.Z)(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return(0,o.Z)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=(0,q.Z)((0,z.Z)().mark((function t(n,r){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i,a,o,u,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lo;case"linkViaPopup":case"linkViaRedirect":return ho;case"reauthViaPopup":case"reauthViaRedirect":return fo;default:Mt(this.auth,"internal-error")}}},{key:"resolve",value:function(e){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),yo=new $t(2e3,1e4);function mo(e,t,n){return go.apply(this,arguments)}function go(){return go=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xn(t),Vt(t,n,Vr),a=so(i,r),o=new xo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),go.apply(this,arguments)}function ko(){return(ko=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vt((i=j(t)).auth,n,Vr),a=so(i.auth,r),o=new xo(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bo(e,t,n){return wo.apply(this,arguments)}function wo(){return(wo=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vt((i=j(t)).auth,n,Vr),a=so(i.auth,r),o=new xo(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xo=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,o,u){var s;return(0,a.Z)(this,n),(s=t.call(this,e,r,o,u)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=(0,c.Z)(s),s}return(0,o.Z)(n,[{key:"executeNotNull",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return zt(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qt(1===this.filter.length,"Popup operations only handle one event"),t=va(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Ft(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Ft(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Ft(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,yo.get())}()}}]),n}(vo);xo.currentPopupAction=null;var _o="pendingRedirect",Io=new Map,Zo=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,a.Z)(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,o)).eventId=null,i}return(0,o.Z)(n,[{key:"execute",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Io.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,So(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,wt((0,bt.Z)(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Io.set(this.auth._key(),t);case 21:return this.bypassAuthState||Io.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",wt((0,bt.Z)(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",wt((0,bt.Z)(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(vo);function So(e,t){return Eo.apply(this,arguments)}function Eo(){return Eo=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Do(n),i=Ao(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Eo.apply(this,arguments)}function To(e,t){return Co.apply(this,arguments)}function Co(){return Co=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao(t)._set(Do(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Co.apply(this,arguments)}function No(e,t){Io.set(e._key(),t)}function Ao(e){return Gt(e._redirectPersistence)}function Do(e){return Fn(_o,e.config.apiKey,e.name)}function Ro(e,t,n){return function(e,t,n){return Oo.apply(this,arguments)}(e,t,n)}function Oo(){return Oo=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xn(t),Vt(t,n,Vr),e.next=4,i._initializationPromise;case 4:return a=so(i,r),e.next=7,To(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Po(e,t,n){return function(e,t,n){return Lo.apply(this,arguments)}(e,t,n)}function Lo(){return(Lo=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vt((i=j(t)).auth,n,Vr),e.next=4,i.auth._initializationPromise;case 4:return a=so(i.auth,r),e.next=7,To(a,i.auth);case 7:return e.next=9,Bo(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mo(e,t,n){return function(e,t,n){return Fo.apply(this,arguments)}(e,t,n)}function Fo(){return(Fo=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vt((i=j(t)).auth,n,Vr),e.next=4,i.auth._initializationPromise;case 4:return a=so(i.auth,r),e.next=7,ui(!1,i,n.providerId);case 7:return e.next=9,To(a,i.auth);case 9:return e.next=11,Bo(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uo(e,t){return Vo.apply(this,arguments)}function Vo(){return Vo=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn(t)._initializationPromise;case 2:return e.abrupt("return",jo(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Vo.apply(this,arguments)}function jo(e,t){return zo.apply(this,arguments)}function zo(){return zo=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o,u,s=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Xn(t),a=so(i,n),o=new Zo(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function Bo(e){return qo.apply(this,arguments)}function qo(){return(qo=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=va("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ko=function(){function e(t){(0,a.Z)(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return(0,o.Z)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wo(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Wo(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ft(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Go(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Go(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Go(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Wo(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ho(e){return Qo.apply(this,arguments)}function Qo(){return Qo=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",nn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}var $o=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yo=/^https?/;function Jo(){return Jo=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ho(t);case 4:n=e.sent,r=n.authorizedDomains,i=(0,u.Z)(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Xo(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Mt(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Jo.apply(this,arguments)}function Xo(e){var t=Wt(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Yo.test(r))return!1;if($o.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var eu=new $t(3e4,6e4);function tu(){var e=ma().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,B.Z)(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var nu=null;function ru(e){return nu=nu||function(e){return new Promise((function(t,n){var r,i,a;function o(){tu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){tu(),n(Ft(e,"network-request-failed"))},timeout:eu.get()})}if(null===(i=null===(r=ma().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=ma().gapi)||void 0===a?void 0:a.load)){var u=ja("iframefcb");return ma()[u]=function(){gapi.load?o():n(Ft(e,"network-request-failed"))},Va("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw nu=null,e}))}(e),nu}var iu=new $t(5e3,15e3),au="__/auth/iframe",ou="emulator/auth/iframe",uu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},su=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cu(e){var t=e.config;zt(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Yt(t,ou):"https://".concat(e.config.authDomain,"/").concat(au),r={apiKey:t.apiKey,appName:e.name,v:Ve},i=su.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(P(r).slice(1))}function lu(e){return fu.apply(this,arguments)}function fu(){return fu=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ru(t);case 2:return n=e.sent,zt(r=ma().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:cu(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uu,dontclear:!0},(function(e){return new Promise(function(){var n=(0,q.Z)((0,z.Z)().mark((function n(r,i){var a,o,u;return(0,z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){ma().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Ft(t,"network-request-failed"),o=ma().setTimeout((function(){i(a)}),iu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),fu.apply(this,arguments)}var hu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},du=function(){function e(t){(0,a.Z)(this,e),this.window=t,this.associatedEvent=null}return(0,o.Z)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function pu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},hu),{width:r.toString(),height:i.toString(),top:a,left:o}),l=_().toLowerCase();n&&(u=Bn(l)?"_blank":n),jn(l)&&(t=t||"http://localhost",c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=(0,s.Z)(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Hn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:_())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new du(null);var h=window.open(t||"",u,f);zt(h,e,"popup-blocked");try{h.focus()}catch(d){}return new du(h)}var vu="__/auth/handler",yu="emulator/auth/handler";function mu(e,t,n,r,i,a){zt(e.config.authDomain,e,"auth-domain-config-required"),zt(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ve,eventId:i};if(t instanceof Vr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=(0,s.Z)(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof jr){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(vu);return Yt(t,yu)}(e),"?").concat(P(p).slice(1))}var gu="webStorageSupport",ku=function(){function e(){(0,a.Z)(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ha,this._completeRedirectFn=jo,this._overrideRedirectResult=No}return(0,o.Z)(e,[{key:"_openPopup",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i){var a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qt(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=mu(t,n,r,Wt(),i),e.abrupt("return",pu(t,o,va()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=mu(t,n,r,Wt(),i),ma().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(qt(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lu(t);case 2:return n=e.sent,r=new Ko(t),n.register("authEvent",(function(e){return zt(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(gu,{type:gu},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[gu];void 0!==i&&t(!!i),Mt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Jo.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Qn()||zn()||Hn()}}]),e}(),bu=ku,wu=function(){function e(t){(0,a.Z)(this,e),this.factorId=t}return(0,o.Z)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Bt("unexpected MultiFactorSessionType")}}}]),e}(),xu=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,"phone")).credential=e,r}return(0,o.Z)(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return nn(e,"POST","/v2/accounts/mfaEnrollment:finalize",tn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return nn(e,"POST","/v2/accounts/mfaSignIn:finalize",tn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(wu),_u=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,null,[{key:"assertion",value:function(e){return xu._fromCredential(e)}}]),e}();_u.FACTOR_ID="phone";var Iu=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Zu._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Zu._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zt("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,na(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",Su._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Iu.FACTOR_ID="totp";var Zu=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var o;return(0,a.Z)(this,n),(o=t.call(this,"totp")).otp=e,o.enrollmentId=r,o.secret=i,o}return(0,o.Z)(n,[{key:"_finalizeEnroll",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zt("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",ra(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zt(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Ma(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(wu),Su=function(){function e(t,n,r,i,o,u,s){(0,a.Z)(this,e),this.sessionInfo=u,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=o}return(0,o.Z)(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Eu(e)||Eu(t))&&(r=!0),r&&(Eu(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Eu(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Eu(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Tu="@firebase/auth",Cu="0.22.0",Nu=function(){function e(t){(0,a.Z)(this,e),this.auth=t,this.internalListeners=new Map}return(0,o.Z)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){zt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Au;!function(e){var t;null===(t=b())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Du(){return window}Au="Browser",Re(new K("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){zt(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),zt(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Au,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$n(Au)},i=new Jn(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Re(new K("auth-internal",(function(e){return function(e){return new Nu(e)}(Xn(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ge(Tu,Cu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Au)),Ge(Tu,Cu,"esm2017");var Ru=2e3;function Ou(e,t,n){return Pu.apply(this,arguments)}function Pu(){return Pu=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o,u,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Du(),o=a.BuildInfo,qt(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,ju(n.sessionId);case 4:return u=e.sent,s={},Hn()?s.ibi=o.packageName:Kn()?s.apn=o.packageName:Mt(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",mu(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Pu.apply(this,arguments)}function Lu(){return Lu=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Du(),r=n.BuildInfo,i={},Hn()?i.iosBundleId=r.packageName:Kn()?i.androidPackageName=r.packageName:Mt(t,"operation-not-supported-in-this-environment"),e.next=5,Ho(t,i);case 5:case"end":return e.stop()}}),e)}))),Lu.apply(this,arguments)}function Mu(e){var t=Du().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Fu(e,t,n){return Uu.apply(this,arguments)}function Uu(){return Uu=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Du(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Ft(t,"redirect-cancelled-by-user"))}),Ru))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Kn()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Uu.apply(this,arguments)}function Vu(e){var t,n,r,i,a,o,u,s,c,l,f=Du();zt("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),zt("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),zt("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),zt("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),zt("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function ju(e){return zu.apply(this,arguments)}function zu(){return(zu=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bu(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bu(e){if(qt(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var qu=20,Ku=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return(0,o.Z)(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),wt((0,bt.Z)(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ko);function Gu(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Yu(),postBody:null,tenantId:e.tenantId,error:Ft(e,"no-auth-event")}}function Wu(e,t){return Ju()._set(Xu(e),t)}function Hu(e){return Qu.apply(this,arguments)}function Qu(){return Qu=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ju()._get(Xu(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Ju()._remove(Xu(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Qu.apply(this,arguments)}function $u(e,t){var n,r,i=function(e){var t=es(e),n=t.link?decodeURIComponent(t.link):void 0,r=es(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return es(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=es(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Ft(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Yu(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<qu;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Ju(){return Gt(la)}function Xu(e){return Fn("authEvent",e.config.apiKey,e.name)}function es(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=e.split("?"),n=(0,kt.Z)(t);n[0];return L(n.slice(1).join("?"))}var ts=function(){function e(){(0,a.Z)(this,e),this._redirectPersistence=ha,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=jo,this._overrideRedirectResult=No}return(0,o.Z)(e,[{key:"_initialize",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ku(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Mt(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i){var a,o,u,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vu(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Io.clear(),e.next=10,this._originValidation(t);case 10:return o=Gu(t,r,i),e.next=13,Wu(t,o);case 13:return e.next=15,Ou(t,o,n);case 15:return u=e.sent,e.next=18,Mu(u);case 18:return s=e.sent,e.abrupt("return",Fu(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Lu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Du(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout((0,q.Z)((0,z.Z)().mark((function n(){return(0,z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Hu(e);case 2:t.onEvent(rs());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=(0,q.Z)((0,z.Z)().mark((function n(r){var i,a;return(0,z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Hu(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=$u(i,r.url)),t.onEvent(a||rs());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Du().handleOpenURL=function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),ns=ts;function rs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ft("no-auth-event")}}var is=1e3;function as(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function os(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return!("file:"!==as()&&"ionic:"!==as()&&"capacitor:"!==as()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function us(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return E()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/Edge\/\d+/.test(e)}(e)}function ss(){try{var e=self.localStorage,t=va();if(e)return e.setItem(t,"1"),e.removeItem(t),!us()||T()}catch(n){return cs()&&T()}return!1}function cs(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ls(){return("http:"===as()||"https:"===as()||Z()||os())&&!(S()||I())&&ss()&&!cs()}function fs(){return os()&&"undefined"!==typeof document}function hs(){return ds.apply(this,arguments)}function ds(){return(ds=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fs()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),is);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ps={LOCAL:"local",NONE:"none",SESSION:"session"},vs=zt,ys="persistence";function ms(e,t){vs(Object.values(ps).includes(t),e,"invalid-persistence-type"),S()?vs(t!==ps.SESSION,e,"unsupported-persistence-type"):I()?vs(t===ps.NONE,e,"unsupported-persistence-type"):cs()?vs(t===ps.NONE||t===ps.LOCAL&&T(),e,"unsupported-persistence-type"):vs(t===ps.NONE||ss(),e,"unsupported-persistence-type")}function gs(e){return ks.apply(this,arguments)}function ks(){return ks=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=bs(),r=Fn(ys,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),ks.apply(this,arguments)}function bs(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var ws=zt,xs=function(){function e(){(0,a.Z)(this,e),this.browserResolver=Gt(bu),this.cordovaResolver=Gt(ns),this.underlyingResolver=null,this._redirectPersistence=ha,this._completeRedirectFn=jo,this._overrideRedirectResult=No}return(0,o.Z)(e,[{key:"_initialize",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return fs()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return ws(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,hs();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function _s(e){return e.unwrap()}function Is(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Cs(e,function(e,t){var n,r=j(e),i=t;return zt(t.customData.operationType,r,"argument-error"),zt(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ea._fromError(r,i)}(e,t));else if(r){var i=Zs(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Zs(e){var t=(e instanceof C?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof C)&&"temporaryProof"in t&&"phoneNumber"in t)return uo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===It.PASSWORD)return null;switch(r){case It.GOOGLE:n=qr;break;case It.FACEBOOK:n=Br;break;case It.GITHUB:n=Kr;break;case It.TWITTER:n=Hr;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Gr._create(r,u):Nr._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new zr(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof C?n.credentialFromError(e):n.credentialFromResult(e)}function Ss(e,t){return t.catch((function(t){throw t instanceof C&&Is(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Zs(t)),additionalUserInfo:Ji(e),user:Ns.getOrCreate(r)}}))}function Es(e,t){return Ts.apply(this,arguments)}function Ts(){return Ts=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Ss(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Ts.apply(this,arguments)}var Cs=function(){function e(t,n){(0,a.Z)(this,e),this.resolver=n,this.auth=t.wrapped()}return(0,o.Z)(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Ss(_s(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Ns=function(){function e(t){(0,a.Z)(this,e),this._delegate=t,this.multiFactor=function(e){var t=j(e);return oa.has(t)||oa.set(t,aa._fromUser(t)),oa.get(t)}(t)}return(0,o.Z)(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ss(this.auth,vi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Es(this.auth,to(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ss(this.auth,bo(this._delegate,t,xs)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gs(Xn(this.auth));case 2:return e.abrupt("return",Mo(this._delegate,t,xs));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ss(this.auth,mi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Es(this.auth,function(e,t,n){return ro.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Ss(this.auth,function(e,t,n){return ko.apply(this,arguments)}(this._delegate,e,xs))}},{key:"reauthenticateWithRedirect",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gs(Xn(this.auth));case 2:return e.abrupt("return",Po(this._delegate,t,xs));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Ui.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ri(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return qi(j(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return qi(j(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return oo.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Bi.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Vi.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Ns.USER_MAP=new WeakMap;var As=zt,Ds=function(){function e(t,n){if((0,a.Z)(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;As(r,"invalid-api-key",{appName:t.name}),As(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?xs:void 0;this._delegate=n.initialize({options:{persistence:Os(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Dt),this.linkUnderlyingAuth()}return(0,o.Z)(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Ns.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){tr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Ti.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ci(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Ei.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ss(this._delegate,Di(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Fi.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Fr.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return As(ls(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Uo(this._delegate,xs);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Ss(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Xn(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Rs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Rs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Oi.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Si.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ms(this._delegate,t),e.t0=t,e.next=e.t0===ps.SESSION?4:e.t0===ps.LOCAL?6:e.t0===ps.NONE?11:13;break;case 4:return n=ha,e.abrupt("break",14);case 6:return e.next=8,Gt(Pa)._isAvailable();case 8:return r=e.sent,n=r?Pa:la,e.abrupt("break",14);case 11:return n=Mn,e.abrupt("break",14);case 13:return e.abrupt("return",Mt("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Ss(this._delegate,function(e){return Xr.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Ss(this._delegate,di(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Ss(this._delegate,function(e,t){return wi.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Ss(this._delegate,function(e,t,n){return di(j(e),Ur.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Ss(this._delegate,function(e,t,n){return Pi.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Es(this._delegate,function(e,t,n){return eo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return As(ls(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Ss(this._delegate,mo(this._delegate,t,xs)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return As(ls(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,gs(this._delegate);case 3:return e.abrupt("return",Ro(this._delegate,t,xs));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ai.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Rs(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Ns.getOrCreate(e))},error:t,complete:n}}function Os(e,t){var n=function(e,t){var n=bs();if(!n)return[];var r=Fn(ys,e,t);switch(n.getItem(r)){case ps.NONE:return[Mn];case ps.LOCAL:return[Pa,ha];case ps.SESSION:return[ha];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Pa)||n.push(Pa),"undefined"!==typeof window)for(var r=0,i=[la,ha];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Mn)||n.push(Mn),n}Ds.Persistence=ps;var Ps=function(){function e(){(0,a.Z)(this,e),this.providerId="phone",this._delegate=new uo(_s(gt.auth()))}return(0,o.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return uo.credential(e,t)}}]),e}();Ps.PHONE_SIGN_IN_METHOD=uo.PHONE_SIGN_IN_METHOD,Ps.PROVIDER_ID=uo.PROVIDER_ID;var Ls,Ms=zt,Fs=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gt.app();(0,a.Z)(this,e),Ms(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Ya(t,n,i.auth()),this.type=this._delegate.type}return(0,o.Z)(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Ls=gt).INTERNAL.registerComponent(new K("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ds(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zt,PASSWORD_RESET:St,RECOVER_EMAIL:Et,REVERT_SECOND_FACTOR_ADDITION:Tt,VERIFY_AND_CHANGE_EMAIL:Ct,VERIFY_EMAIL:Nt}},EmailAuthProvider:Ur,FacebookAuthProvider:Br,GithubAuthProvider:Kr,GoogleAuthProvider:qr,OAuthProvider:zr,SAMLAuthProvider:Wr,PhoneAuthProvider:Ps,PhoneMultiFactorGenerator:_u,RecaptchaVerifier:Fs,TwitterAuthProvider:Hr,Auth:Ds,AuthCredential:ir,Error:C}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ls.registerVersion("@firebase/auth-compat","0.3.7");var Us,Vs=n(5647),js="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},zs={},Bs=Bs||{},qs=js||self;function Ks(){}function Gs(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ws(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Hs="closure_uid_"+(1e9*Math.random()>>>0),Qs=0;function $s(e,t,n){return e.call.apply(e.bind,arguments)}function Ys(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Js(e,t,n){return(Js=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$s:Ys).apply(null,arguments)}function Xs(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ec(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function tc(){this.s=this.s,this.o=this.o}tc.prototype.s=!1,tc.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Hs)&&e[Hs]||(e[Hs]=++Qs))},tc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var nc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function rc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ic(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Gs(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function ac(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ac.prototype.h=function(){this.defaultPrevented=!0};var oc=function(){if(!qs.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{qs.addEventListener("test",Ks,t),qs.removeEventListener("test",Ks,t)}catch(n){}return e}();function uc(e){return/^[\s\xa0]*$/.test(e)}var sc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function cc(e,t){return e<t?-1:e>t?1:0}function lc(){var e=qs.navigator;return e&&(e=e.userAgent)?e:""}function fc(e){return-1!=lc().indexOf(e)}function hc(e){return hc[" "](e),e}hc[" "]=Ks;var dc,pc=fc("Opera"),vc=fc("Trident")||fc("MSIE"),yc=fc("Edge"),mc=yc||vc,gc=fc("Gecko")&&!(-1!=lc().toLowerCase().indexOf("webkit")&&!fc("Edge"))&&!(fc("Trident")||fc("MSIE"))&&!fc("Edge"),kc=-1!=lc().toLowerCase().indexOf("webkit")&&!fc("Edge");function bc(){var e=qs.document;return e?e.documentMode:void 0}e:{var wc="",xc=function(){var e=lc();return gc?/rv:([^\);]+)(\)|;)/.exec(e):yc?/Edge\/([\d\.]+)/.exec(e):vc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):kc?/WebKit\/(\S+)/.exec(e):pc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(xc&&(wc=xc?xc[1]:""),vc){var _c=bc();if(null!=_c&&_c>parseFloat(wc)){dc=String(_c);break e}}dc=wc}var Ic,Zc={};function Sc(){return function(e){var t=Zc;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=sc(String(dc)).split("."),n=sc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=cc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||cc(0==a[2].length,0==o[2].length)||cc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(qs.document&&vc){var Ec=bc();Ic=Ec||(parseInt(dc,10)||void 0)}else Ic=void 0;var Tc=Ic;function Cc(e,t){if(ac.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(gc){e:{try{hc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Nc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Cc.X.h.call(this)}}ec(Cc,ac);var Nc={2:"touch",3:"pen",4:"mouse"};Cc.prototype.h=function(){Cc.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ac="closure_listenable_"+(1e6*Math.random()|0),Dc=0;function Rc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Dc,this.ba=this.ea=!1}function Oc(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Pc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Lc(e){var t={};for(var n in e)t[n]=e[n];return t}var Mc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Mc.length;a++)n=Mc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Uc(e){this.src=e,this.g={},this.h=0}function Vc(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=nc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Oc(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function jc(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Uc.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=jc(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Rc(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var zc="closure_lm_"+(1e6*Math.random()|0),Bc={};function qc(e,t,n,r,i){if(r&&r.once)return Gc(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)qc(e,t[a],n,r,i);return null}return n=Xc(n),e&&e[Ac]?e.N(t,n,Ws(r)?!!r.capture:!!r,i):Kc(e,t,n,!1,r,i)}function Kc(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Ws(i)?!!i.capture:!!i,u=Yc(e);if(u||(e[zc]=u=new Uc(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=$c;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)oc||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Qc(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Gc(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Gc(e,t[a],n,r,i);return null}return n=Xc(n),e&&e[Ac]?e.O(t,n,Ws(r)?!!r.capture:!!r,i):Kc(e,t,n,!0,r,i)}function Wc(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Wc(e,t[a],n,r,i);else r=Ws(r)?!!r.capture:!!r,n=Xc(n),e&&e[Ac]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=jc(a=e.g[t],n,r,i))&&(Oc(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Yc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=jc(t,n,r,i)),(n=-1<e?t[e]:null)&&Hc(n))}function Hc(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Ac])Vc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Qc(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Yc(t))?(Vc(n,e),0==n.h&&(n.src=null,t[zc]=null)):Oc(e)}}}function Qc(e){return e in Bc?Bc[e]:Bc[e]="on"+e}function $c(e,t){if(e.ba)e=!0;else{t=new Cc(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Hc(e),e=n.call(r,t)}return e}function Yc(e){return(e=e[zc])instanceof Uc?e:null}var Jc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xc(e){return"function"===typeof e?e:(e[Jc]||(e[Jc]=function(t){return e.handleEvent(t)}),e[Jc])}function el(){tc.call(this),this.i=new Uc(this),this.P=this,this.I=null}function tl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ac(t,e);else if(t instanceof ac)t.target=t.target||e;else{var i=t;Fc(t=new ac(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=nl(o,r,!0,t)&&i}if(i=nl(o=t.g=e,r,!0,t)&&i,i=nl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=nl(o=t.g=n[a],r,!1,t)&&i}function nl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Vc(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ec(el,tc),el.prototype[Ac]=!0,el.prototype.removeEventListener=function(e,t,n,r){Wc(this,e,t,n,r)},el.prototype.M=function(){if(el.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Oc(n[r]);delete t.g[e],t.h--}}this.I=null},el.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},el.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var rl=qs.JSON.stringify;function il(){var e=hl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var al,ol=function(){function e(){(0,a.Z)(this,e),this.h=this.g=null}return(0,o.Z)(e,[{key:"add",value:function(e,t){var n=ul.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),ul=new(function(){function e(t,n){(0,a.Z)(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return(0,o.Z)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new sl}),(function(e){return e.reset()})),sl=function(){function e(){(0,a.Z)(this,e),this.next=this.g=this.h=null}return(0,o.Z)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function cl(e){qs.setTimeout((function(){throw e}),0)}function ll(e,t){al||function(){var e=qs.Promise.resolve(void 0);al=function(){e.then(dl)}}(),fl||(al(),fl=!0),hl.add(e,t)}var fl=!1,hl=new ol;function dl(){for(var e;e=il();){try{e.h.call(e.g)}catch(n){cl(n)}var t=ul;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}fl=!1}function pl(e,t){el.call(this),this.h=e||1,this.g=t||qs,this.j=Js(this.lb,this),this.l=Date.now()}function vl(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function yl(e,t,n){if("function"===typeof e)n&&(e=Js(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Js(e.handleEvent,e)}return 2147483647<Number(t)?-1:qs.setTimeout(e,t||0)}function ml(e){e.g=yl((function(){e.g=null,e.i&&(e.i=!1,ml(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ec(pl,el),(Us=pl.prototype).ca=!1,Us.R=null,Us.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),tl(this,"tick"),this.ca&&(vl(this),this.start()))}},Us.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Us.M=function(){pl.X.M.call(this),vl(this),delete this.g};var gl=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return(0,o.Z)(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ml(this)}},{key:"M",value:function(){wt((0,bt.Z)(n.prototype),"M",this).call(this),this.g&&(qs.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(tc);function kl(e){tc.call(this),this.h=e,this.g={}}ec(kl,tc);var bl=[];function wl(e,t,n,r){Array.isArray(n)||(n&&(bl[0]=n.toString()),n=bl);for(var i=0;i<n.length;i++){var a=qc(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function xl(e){Pc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Hc(e)}),e),e.g={}}function _l(){this.g=!0}function Il(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return rl(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}kl.prototype.M=function(){kl.X.M.call(this),xl(this)},kl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_l.prototype.Aa=function(){this.g=!1},_l.prototype.info=function(){};var Zl={},Sl=null;function El(){return Sl=Sl||new el}function Tl(e){ac.call(this,Zl.Pa,e)}function Cl(e){var t=El();tl(t,new Tl(t))}function Nl(e,t){ac.call(this,Zl.STAT_EVENT,e),this.stat=t}function Al(e){var t=El();tl(t,new Nl(t,e))}function Dl(e,t){ac.call(this,Zl.Qa,e),this.size=t}function Rl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return qs.setTimeout((function(){e()}),t)}Zl.Pa="serverreachability",ec(Tl,ac),Zl.STAT_EVENT="statevent",ec(Nl,ac),Zl.Qa="timingevent",ec(Dl,ac);var Ol={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Pl={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ll(){}function Ml(e){return e.h||(e.h=e.i())}function Fl(){}Ll.prototype.h=null;var Ul,Vl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function jl(){ac.call(this,"d")}function zl(){ac.call(this,"c")}function Bl(){}function ql(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new kl(this),this.O=Gl,e=mc?125:void 0,this.T=new pl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Kl}function Kl(){this.i=null,this.g="",this.h=!1}ec(jl,ac),ec(zl,ac),ec(Bl,Ll),Bl.prototype.g=function(){return new XMLHttpRequest},Bl.prototype.i=function(){return{}},Ul=new Bl;var Gl=45e3,Wl={},Hl={};function Ql(e,t,n){e.K=1,e.v=vf(lf(t)),e.s=n,e.P=!0,$l(e,null)}function $l(e,t){e.F=Date.now(),ef(e),e.A=lf(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Tf(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Kl,e.g=Ch(e.l,n?t:null,!e.s),0<e.N&&(e.L=new gl(Js(e.La,e,e.g),e.N)),wl(e.S,e.g,"readystatechange",e.ib),t=e.H?Lc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Cl(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Yl(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Jl(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Xl(e,n))==Hl){4==t&&(e.o=4,Al(14),i=!1),Il(e.j,e.m,null,"[Incomplete Response]");break}if(r==Wl){e.o=4,Al(15),Il(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Il(e.j,e.m,r,null),of(e,r)}Yl(e)&&r!=Hl&&r!=Wl&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Al(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),wh(t),t.K=!0,Al(11))):(Il(e.j,e.m,n,"[Invalid Chunked Response]"),af(e),rf(e))}function Xl(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Hl:(n=Number(t.substring(n,r)),isNaN(n)?Wl:(r+=1)+n>t.length?Hl:(t=t.substr(r,n),e.C=r+n,t))}function ef(e){e.V=Date.now()+e.O,tf(e,e.O)}function tf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Rl(Js(e.gb,e),t)}function nf(e){e.B&&(qs.clearTimeout(e.B),e.B=null)}function rf(e){0==e.l.G||e.I||Ih(e.l,e)}function af(e){nf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,vl(e.T),xl(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function of(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Lf(n.h,e)))if(!e.J&&Lf(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;_h(n),dh(n)}bh(n),Al(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Rl(Js(n.cb,n),6e3));if(1>=Pf(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Sh(n,11)}else if((e.J||n.g==e)&&_h(n),!uc(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Mf(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,pf(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Th(r,r.H?r.ka:null,r.V),d.J){Ff(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(nf(p),ef(p)),r.g=d}else kh(r);0<n.i.length&&vh(n)}else"stop"!=a[0]&&"close"!=a[0]||Sh(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Sh(n,7):hh(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Cl()}catch(a){}}function uf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Gs(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Gs(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Gs(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Us=ql.prototype).setTimeout=function(e){this.O=e},Us.ib=function(e){e=e.target;var t=this.L;t&&3==oh(e)?t.l():this.La(e)},Us.La=function(e){try{if(e==this.g)e:{var t=oh(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||mc||this.g&&(this.h.h||this.g.fa()||uh(this.g)))){this.I||4!=t||7==n||Cl(),nf(this);var r=this.g.aa();this.Y=r;t:if(Yl(this)){var i=uh(this.g);e="";var a=i.length,o=4==oh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){af(this),rf(this);var u="";break t}this.h.i=new qs.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!uc(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Al(12),af(this),rf(this);break e}Il(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,of(this,r)}this.P?(Jl(this,t,u),mc&&this.i&&3==t&&(wl(this.S,this.T,"tick",this.hb),this.T.start())):(Il(this.j,this.m,u,null),of(this,u)),4==t&&af(this),this.i&&!this.I&&(4==t?Ih(this.l,this):(this.i=!1,ef(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Al(12)):(this.o=0,Al(13)),af(this),rf(this)}}}catch(t){}},Us.hb=function(){if(this.g){var e=oh(this.g),t=this.g.fa();this.C<t.length&&(nf(this),Jl(this,e,t),this.i&&4!=e&&ef(this))}},Us.cancel=function(){this.I=!0,af(this)},Us.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Cl(),Al(17)),af(this),this.o=2,rf(this)):tf(this,this.V-e)};var sf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cf(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof cf){this.h=void 0!==t?t:e.h,ff(this,e.j),this.s=e.s,this.g=e.g,hf(this,e.m),this.l=e.l,t=e.i;var n=new If;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),df(this,n),this.o=e.o}else e&&(n=String(e).match(sf))?(this.h=!!t,ff(this,n[1]||"",!0),this.s=yf(n[2]||""),this.g=yf(n[3]||"",!0),hf(this,n[4]),this.l=yf(n[5]||"",!0),df(this,n[6]||"",!0),this.o=yf(n[7]||"")):(this.h=!!t,this.i=new If(null,this.h))}function lf(e){return new cf(e)}function ff(e,t,n){e.j=n?yf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function hf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function df(e,t,n){t instanceof If?(e.i=t,function(e,t){t&&!e.j&&(Zf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Sf(this,t),Tf(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=mf(t,xf)),e.i=new If(t,e.h))}function pf(e,t,n){e.i.set(t,n)}function vf(e){return pf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function yf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function mf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,gf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function gf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}cf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(mf(t,kf,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(mf(t,kf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(mf(n,"/"==n.charAt(0)?wf:bf,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",mf(n,_f)),e.join("")};var kf=/[#\/\?@]/g,bf=/[#\?:]/g,wf=/[#\?]/g,xf=/[#\?@]/g,_f=/#/g;function If(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zf(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Sf(e,t){Zf(e),t=Cf(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ef(e,t){return Zf(e),t=Cf(e,t),e.g.has(t)}function Tf(e,t,n){Sf(e,t),0<n.length&&(e.i=null,e.g.set(Cf(e,t),rc(n)),e.h+=n.length)}function Cf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Us=If.prototype).add=function(e,t){Zf(this),this.i=null,e=Cf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Us.forEach=function(e,t){Zf(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Us.oa=function(){Zf(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Us.W=function(e){Zf(this);var t=[];if("string"===typeof e)Ef(this,e)&&(t=t.concat(this.g.get(Cf(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Us.set=function(e,t){return Zf(this),this.i=null,Ef(this,e=Cf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Us.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Us.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Nf=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.h=t,this.g=n}));function Af(e){this.l=e||Rf,qs.PerformanceNavigationTiming?e=0<(e=qs.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(qs.g&&qs.g.Ga&&qs.g.Ga()&&qs.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Df,Rf=10;function Of(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Pf(e){return e.h?1:e.g?e.g.size:0}function Lf(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Mf(e,t){e.g?e.g.add(t):e.h=t}function Ff(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Uf(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=(0,u.Z)(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return rc(e.i)}function Vf(){}function jf(){this.g=new Vf}function zf(e,t,n){var r=n||"";try{uf(e,(function(e,n){var i=e;Ws(e)&&(i=rl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bf(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function qf(e){this.l=e.ac||null,this.j=e.jb||!1}function Kf(e,t){el.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Gf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Af.prototype.cancel=function(){if(this.i=Uf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=(0,u.Z)(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Vf.prototype.stringify=function(e){return qs.JSON.stringify(e,void 0)},Vf.prototype.parse=function(e){return qs.JSON.parse(e,void 0)},ec(qf,Ll),qf.prototype.g=function(){return new Kf(this.l,this.j)},qf.prototype.i=(Df={},function(){return Df}),ec(Kf,el);var Gf=0;function Wf(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Hf(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Qf(e)}function Qf(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Us=Kf.prototype).open=function(e,t){if(this.readyState!=Gf)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Qf(this)},Us.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||qs).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Us.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hf(this)),this.readyState=Gf},Us.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Qf(this)),this.g&&(this.readyState=3,Qf(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof qs.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wf(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Us.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Hf(this):Qf(this),3==this.readyState&&Wf(this)}},Us.Va=function(e){this.g&&(this.response=this.responseText=e,Hf(this))},Us.Ua=function(e){this.g&&(this.response=e,Hf(this))},Us.ga=function(){this.g&&Hf(this)},Us.setRequestHeader=function(e,t){this.v.append(e,t)},Us.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Us.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Kf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var $f=qs.JSON.parse;function Yf(e){el.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Jf,this.K=this.L=!1}ec(Yf,el);var Jf="",Xf=/^https?$/i,eh=["POST","PUT"];function th(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,nh(e),ih(e)}function nh(e){e.D||(e.D=!0,tl(e,"complete"),tl(e,"error"))}function rh(e){if(e.h&&"undefined"!=typeof Bs&&(!e.C[1]||4!=oh(e)||2!=e.aa()))if(e.v&&4==oh(e))yl(e.Ha,0,e);else if(tl(e,"readystatechange"),4==oh(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(sf)[1]||null;if(!a&&qs.self&&qs.self.location){var o=qs.self.location.protocol;a=o.substr(0,o.length-1)}i=!Xf.test(a?a.toLowerCase():"")}t=i}if(t)tl(e,"complete"),tl(e,"success");else{e.m=6;try{var u=2<oh(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",nh(e)}}finally{ih(e)}}}function ih(e,t){if(e.g){ah(e);var n=e.g,r=e.C[0]?Ks:null;e.g=null,e.C=null,t||tl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ah(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(qs.clearTimeout(e.A),e.A=null)}function oh(e){return e.g?e.g.readyState:0}function uh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Jf:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Gh){return null}}function sh(e){var t="";return Pc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ch(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=sh(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):pf(e,t,n))}function lh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function fh(e){this.Ca=0,this.i=[],this.j=new _l,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=lh("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=lh("baseRetryDelayMs",5e3,e),this.bb=lh("retryDelaySeedMs",1e4,e),this.$a=lh("forwardChannelMaxRetries",2,e),this.ta=lh("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Af(e&&e.concurrentRequestLimit),this.Fa=new jf,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function hh(e){if(ph(e),3==e.G){var t=e.U++,n=lf(e.F);pf(n,"SID",e.I),pf(n,"RID",t),pf(n,"TYPE","terminate"),mh(e,n),(t=new ql(e,e.j,t,void 0)).K=2,t.v=vf(lf(n)),n=!1,qs.navigator&&qs.navigator.sendBeacon&&(n=qs.navigator.sendBeacon(t.v.toString(),"")),!n&&qs.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ch(t.l,null),t.g.da(t.v)),t.F=Date.now(),ef(t)}Eh(e)}function dh(e){e.g&&(wh(e),e.g.cancel(),e.g=null)}function ph(e){dh(e),e.u&&(qs.clearTimeout(e.u),e.u=null),_h(e),e.h.cancel(),e.m&&("number"===typeof e.m&&qs.clearTimeout(e.m),e.m=null)}function vh(e){Of(e.h)||e.m||(e.m=!0,ll(e.Ja,e),e.C=0)}function yh(e,t){var n;n=t?t.m:e.U++;var r=lf(e.F);pf(r,"SID",e.I),pf(r,"RID",n),pf(r,"AID",e.T),mh(e,r),e.o&&e.s&&ch(r,e.o,e.s),n=new ql(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=gh(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Mf(e.h,n),Ql(n,r,t)}function mh(e,t){e.ia&&Pc(e.ia,(function(e,n){pf(t,n,e)})),e.l&&uf({},(function(e,n){pf(t,n,e)}))}function gh(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Js(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{zf(l,o,"req"+c+"_")}catch(nd){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function kh(e){e.g||e.u||(e.Z=1,ll(e.Ia,e),e.A=0)}function bh(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Rl(Js(e.Ia,e),Zh(e,e.A)),e.A++,!0)}function wh(e){null!=e.B&&(qs.clearTimeout(e.B),e.B=null)}function xh(e){e.g=new ql(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=lf(e.sa);pf(t,"RID","rpc"),pf(t,"SID",e.I),pf(t,"CI",e.L?"0":"1"),pf(t,"AID",e.T),pf(t,"TYPE","xmlhttp"),mh(e,t),e.o&&e.s&&ch(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=vf(lf(t)),n.s=null,n.P=!0,$l(n,e)}function _h(e){null!=e.v&&(qs.clearTimeout(e.v),e.v=null)}function Ih(e,t){var n=null;if(e.g==t){_h(e),wh(e),e.g=null;var r=2}else{if(!Lf(e.h,t))return;n=t.D,Ff(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;tl(r=El(),new Dl(r,n)),vh(e)}else kh(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Pf(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Rl(Js(e.Ja,e,t),Zh(e,e.C)),e.C++,!0))}(e,t)||2==r&&bh(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Sh(e,5);break;case 4:Sh(e,10);break;case 3:Sh(e,6);break;default:Sh(e,2)}}function Zh(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Sh(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Js(e.kb,e);n||(n=new cf("//www.google.com/images/cleardot.gif"),qs.location&&"http"==qs.location.protocol||ff(n,"https"),vf(n)),function(e,t){var n=new _l;if(qs.Image){var r=new Image;r.onload=Xs(Bf,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Xs(Bf,n,r,"TestLoadImage: error",!1,t),r.onabort=Xs(Bf,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Xs(Bf,n,r,"TestLoadImage: timeout",!1,t),qs.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Al(2);e.G=0,e.l&&e.l.va(t),Eh(e),ph(e)}function Eh(e){if(e.G=0,e.la=[],e.l){var t=Uf(e.h);0==t.length&&0==e.i.length||(ic(e.la,t),ic(e.la,e.i),e.h.i.length=0,rc(e.i),e.i.length=0),e.l.ua()}}function Th(e,t,n){var r=n instanceof cf?lf(n):new cf(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),hf(r,r.m);else{var i=qs.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new cf(null,void 0);r&&ff(a,r),t&&(a.g=t),i&&hf(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&pf(r,n,t),pf(r,"VER",e.ma),mh(e,r),r}function Ch(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Yf(new qf({jb:!0})):new Yf(e.ra)).Ka(e.H),t}function Nh(){}function Ah(){if(vc&&!(10<=Number(Tc)))throw Error("Environmental error: no available transport.")}function Dh(e,t){el.call(this),this.g=new fh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!uc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!uc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ph(this)}function Rh(e){jl.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Oh(){zl.call(this),this.status=1}function Ph(e){this.g=e}(Us=Yf.prototype).Ka=function(e){this.L=e},Us.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ul.g(),this.C=this.u?Ml(this.u):Ml(Ul),this.g.onreadystatechange=Js(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(c){return void th(this,c)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=(0,u.Z)(r.keys());try{for(o.s();!(a=o.n()).done;){var c=a.value;n.set(c,r.get(c))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=qs.FormData&&e instanceof qs.FormData,!(0<=nc(eh,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var l,f=(0,u.Z)(n);try{for(f.s();!(l=f.n()).done;){var h=(0,s.Z)(l.value,2),d=h[0],p=h[1];this.g.setRequestHeader(d,p)}}catch(v){f.e(v)}finally{f.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ah(this),0<this.B&&((this.K=function(e){return vc&&Sc()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Js(this.qa,this)):this.A=yl(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(c){th(this,c)}},Us.qa=function(){"undefined"!=typeof Bs&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,tl(this,"timeout"),this.abort(8))},Us.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,tl(this,"complete"),tl(this,"abort"),ih(this))},Us.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ih(this,!0)),Yf.X.M.call(this)},Us.Ha=function(){this.s||(this.F||this.v||this.l?rh(this):this.fb())},Us.fb=function(){rh(this)},Us.aa=function(){try{return 2<oh(this)?this.g.status:-1}catch(Df){return-1}},Us.fa=function(){try{return this.g?this.g.responseText:""}catch(Df){return""}},Us.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),$f(t)}},Us.Ea=function(){return this.m},Us.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Us=fh.prototype).ma=8,Us.G=1,Us.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new ql(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Fc(n=Lc(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=gh(this,t,r),pf(i=lf(this.F),"RID",e),pf(i,"CVER",22),this.D&&pf(i,"X-HTTP-Session-Id",this.D),mh(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(sh(n)))+"&"+r:this.o&&ch(i,this.o,n)),Mf(this.h,t),this.Ya&&pf(i,"TYPE","init"),this.O?(pf(i,"$req",r),pf(i,"SID","null"),t.Z=!0,Ql(t,i,null)):Ql(t,i,r),this.G=2}}else 3==this.G&&(e?yh(this,e):0==this.i.length||Of(this.h)||yh(this))},Us.Ia=function(){if(this.u=null,xh(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Rl(Js(this.eb,this),e)}},Us.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Al(10),dh(this),xh(this))},Us.cb=function(){null!=this.v&&(this.v=null,dh(this),bh(this),Al(19))},Us.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Al(2)):(this.j.info("Failed to ping google.com"),Al(1))},(Us=Nh.prototype).xa=function(){},Us.wa=function(){},Us.va=function(){},Us.ua=function(){},Us.Ra=function(){},Ah.prototype.g=function(e,t){return new Dh(e,t)},ec(Dh,el),Dh.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Al(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Th(e,null,e.V),vh(e)},Dh.prototype.close=function(){hh(this.g)},Dh.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=rl(e),e=n);t.i.push(new Nf(t.ab++,e)),3==t.G&&vh(t)},Dh.prototype.M=function(){this.g.l=null,delete this.j,hh(this.g),delete this.g,Dh.X.M.call(this)},ec(Rh,jl),ec(Oh,zl),ec(Ph,Nh),Ph.prototype.xa=function(){tl(this.g,"a")},Ph.prototype.wa=function(e){tl(this.g,new Rh(e))},Ph.prototype.va=function(e){tl(this.g,new Oh)},Ph.prototype.ua=function(){tl(this.g,"b")},Ah.prototype.createWebChannel=Ah.prototype.g,Dh.prototype.send=Dh.prototype.u,Dh.prototype.open=Dh.prototype.m,Dh.prototype.close=Dh.prototype.close,Ol.NO_ERROR=0,Ol.TIMEOUT=8,Ol.HTTP_ERROR=6,Pl.COMPLETE="complete",Fl.EventType=Vl,Vl.OPEN="a",Vl.CLOSE="b",Vl.ERROR="c",Vl.MESSAGE="d",el.prototype.listen=el.prototype.N,Yf.prototype.listenOnce=Yf.prototype.O,Yf.prototype.getLastError=Yf.prototype.Oa,Yf.prototype.getLastErrorCode=Yf.prototype.Ea,Yf.prototype.getStatus=Yf.prototype.aa,Yf.prototype.getResponseJson=Yf.prototype.Sa,Yf.prototype.getResponseText=Yf.prototype.fa,Yf.prototype.send=Yf.prototype.da,Yf.prototype.setWithCredentials=Yf.prototype.Ka;var Lh=zs.createWebChannelTransport=function(){return new Ah},Mh=zs.getStatEventTarget=function(){return El()},Fh=zs.ErrorCode=Ol,Uh=zs.EventType=Pl,Vh=zs.Event=Zl,jh=zs.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},zh=zs.FetchXmlHttpFactory=qf,Bh=zs.WebChannel=Fl,qh=zs.XhrIo=Yf,Kh="@firebase/firestore",Gh=function(){function e(t){(0,a.Z)(this,e),this.uid=t}return(0,o.Z)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Gh.UNAUTHENTICATED=new Gh(null),Gh.GOOGLE_CREDENTIALS=new Gh("google-credentials-uid"),Gh.FIRST_PARTY=new Gh("first-party-uid"),Gh.MOCK_USER=new Gh("mock-user");var Wh="9.19.0",Hh=new ne("@firebase/firestore");function Qh(){return Hh.logLevel}function $h(e){if(Hh.logLevel<=Q.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Xh);Hh.debug.apply(Hh,["Firestore (".concat(Wh,"): ").concat(e)].concat((0,B.Z)(i)))}}function Yh(e){if(Hh.logLevel<=Q.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Xh);Hh.error.apply(Hh,["Firestore (".concat(Wh,"): ").concat(e)].concat((0,B.Z)(i)))}}function Jh(e){if(Hh.logLevel<=Q.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Xh);Hh.warn.apply(Hh,["Firestore (".concat(Wh,"): ").concat(e)].concat((0,B.Z)(i)))}}function Xh(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Wh,") INTERNAL ASSERTION FAILED: ")+e;throw Yh(t),new Error(t)}function td(e,t){e||ed()}function nd(e,t){return e}var rd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},id=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return(0,o.Z)(n)}(C),ad=(0,o.Z)((function e(){var t=this;(0,a.Z)(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),od=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ud=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Gh.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),sd=function(){function e(t){(0,a.Z)(this,e),this.token=t,this.changeListener=null}return(0,o.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),cd=function(){function e(t){(0,a.Z)(this,e),this.t=t,this.currentUser=Gh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,o.Z)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ad;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ad,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable((0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){$h("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):($h("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ad)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?($h("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(td("string"==typeof n.accessToken),new od(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return td(null===e||"string"==typeof e),new Gh(e)}}]),e}(),ld=function(){function e(t,n,r){(0,a.Z)(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Gh.FIRST_PARTY,this.g=new Map}return(0,o.Z)(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),fd=function(){function e(t,n,r){(0,a.Z)(this,e),this.h=t,this.l=n,this.m=r}return(0,o.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(new ld(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Gh.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),hd=(0,o.Z)((function e(t){(0,a.Z)(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),dd=function(){function e(t){(0,a.Z)(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return(0,o.Z)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&$h("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,$h("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){$h("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):$h("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(td("string"==typeof t.token),e.T=t.token,new hd(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function pd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var vd=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=pd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function yd(e,t){return e<t?-1:e>t?1:0}function md(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function gd(e){return e+"\0"}var kd=function(){function e(t,n){if((0,a.Z)(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new id(rd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new id(rd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new id(rd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new id(rd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return(0,o.Z)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?yd(this.nanoseconds,e.nanoseconds):yd(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),bd=function(){function e(t){(0,a.Z)(this,e),this.timestamp=t}return(0,o.Z)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new kd(0,0))}},{key:"max",value:function(){return new e(new kd(253402300799,999999999))}}]),e}(),wd=function(){function e(t,n,r){(0,a.Z)(this,e),void 0===n?n=0:n>t.length&&ed(),void 0===r?r=t.length-n:r>t.length-n&&ed(),this.segments=t,this.offset=n,this.len=r}return(0,o.Z)(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),xd=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new id(rd.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,(0,B.Z)(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(wd),_d=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Id=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return _d.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new id(rd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new id(rd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new id(rd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new id(rd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(wd),Zd=function(){function e(t){(0,a.Z)(this,e),this.path=t}return(0,o.Z)(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===xd.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(xd.fromString(t))}},{key:"fromName",value:function(t){return new e(xd.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(xd.emptyPath())}},{key:"comparator",value:function(e,t){return xd.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new xd(t.slice()))}}]),e}(),Sd=(0,o.Z)((function e(t,n,r,i){(0,a.Z)(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Ed(e){return e.fields.find((function(e){return 2===e.kind}))}function Td(e){return e.fields.filter((function(e){return 2!==e.kind}))}Sd.UNKNOWN_ID=-1;var Cd=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.fieldPath=t,this.kind=n}));var Nd=function(){function e(t,n){(0,a.Z)(this,e),this.sequenceNumber=t,this.offset=n}return(0,o.Z)(e,null,[{key:"empty",value:function(){return new e(0,Rd.min())}}]),e}();function Ad(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=bd.fromTimestamp(1e9===r?new kd(n+1,0):new kd(n,r));return new Rd(i,Zd.empty(),t)}function Dd(e){return new Rd(e.readTime,e.key,-1)}var Rd=function(){function e(t,n,r){(0,a.Z)(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return(0,o.Z)(e,null,[{key:"min",value:function(){return new e(bd.min(),Zd.empty(),-1)}},{key:"max",value:function(){return new e(bd.max(),Zd.empty(),-1)}}]),e}();function Od(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Zd.comparator(e.documentKey,t.documentKey))?n:yd(e.largestBatchId,t.largestBatchId)}var Pd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ld=function(){function e(){(0,a.Z)(this,e),this.onCommittedListeners=[]}return(0,o.Z)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Md(e){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===rd.FAILED_PRECONDITION&&t.message===Pd){e.next=2;break}throw t;case 2:$h("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Fd.apply(this,arguments)}var Ud=function(){function e(t){var n=this;(0,a.Z)(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return(0,o.Z)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ed(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=(0,u.Z)(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Vd=function(){function e(t,n){var r=this;(0,a.Z)(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new ad,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new Bd(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=Hd(e.target.error);r.R.reject(new Bd(t,n))}}return(0,o.Z)(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||($h("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Kd(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Bd(n,t)}}}]),e}(),jd=function(){function e(t,n,r){(0,a.Z)(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(_())&&Yh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return(0,o.Z)(e,[{key:"$",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return $h("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Bd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new id(rd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new id(rd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Bd(t,n))},i.onupgradeneeded=function(e){$h("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.M(t,i.transaction,e.oldVersion,n.version).next((function(){$h("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i){var a,o,u,s,c=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=(0,z.Z)().mark((function e(){var n,u,s,l;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=Vd.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Ud.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,$h("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return $h("SimpleDb","Removing database:",e),Gd(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!T())return!1;if(e.C())return!0;var t=_(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),zd=function(){function e(t){(0,a.Z)(this,e),this.L=t,this.q=!1,this.U=null}return(0,o.Z)(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Gd(this.L.delete())}}]),e}(),Bd=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,rd.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return(0,o.Z)(n)}(id);function qd(e){return"IndexedDbTransactionError"===e.name}var Kd=function(){function e(t){(0,a.Z)(this,e),this.store=t}return(0,o.Z)(e,[{key:"put",value:function(e,t){var n;return void 0!==t?($h("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):($h("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Gd(n)}},{key:"add",value:function(e){return $h("SimpleDb","ADD",this.store.name,e,e),Gd(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Gd(this.store.get(e)).next((function(n){return void 0===n&&(n=null),$h("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return $h("SimpleDb","DELETE",this.store.name,e),Gd(this.store.delete(e))}},{key:"count",value:function(){return $h("SimpleDb","COUNT",this.store.name),Gd(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Ud((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Ud((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){$h("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Ud((function(n,r){t.onerror=function(e){var t=Hd(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Ud((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new zd(i),o=t(i.primaryKey,i.value,a);if(o instanceof Ud){var u=o.catch((function(e){return a.done(),Ud.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Ud.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Gd(e){return new Ud((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Hd(e.target.error);n(t)}}))}var Wd=!1;function Hd(e){var t=jd.S(_());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new id("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Wd||(Wd=!0,setTimeout((function(){throw r}),0)),r}}return e}var Qd=function(){function e(t,n){(0,a.Z)(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return(0,o.Z)(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;$h("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=$h,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!qd(e.t4)){e.next=17;break}$h("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Md(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),$d=function(){function e(t,n){(0,a.Z)(this,e),this.localStore=t,this.persistence=n}return(0,o.Z)(e,[{key:"nt",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n=this,r=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Ud.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return $h("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return $h("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Dd(t);Od(r,n)>0&&(n=r)})),new Rd(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Yd=function(){function e(t,n){var r=this;(0,a.Z)(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return(0,o.Z)(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Jd(e){return null==e}function Xd(e){return 0===e&&1/e==-1/0}function ep(e){return"number"==typeof e&&Number.isInteger(e)&&!Xd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function tp(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=rp(t)),t=np(e.get(n),t);return rp(t)}function np(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function rp(e){return e+"\x01\x01"}function ip(e){var t=e.length;if(td(t>=2),2===t)return td("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),xd.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ed(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ed()}a=o+2}return new xd(r)}Yd.ct=-1;var ap=["userId","batchId"];function op(e,t){return[e,tp(t)]}function up(e,t,n){return[e,tp(t),n]}var sp={},cp=["prefixPath","collectionGroup","readTime","documentId"],lp=["prefixPath","collectionGroup","documentId"],fp=["collectionGroup","readTime","prefixPath","documentId"],hp=["canonicalId","targetId"],dp=["targetId","path"],pp=["path","targetId"],vp=["collectionId","parent"],yp=["indexId","uid"],mp=["uid","sequenceNumber"],gp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kp=["indexId","uid","orderedDocumentKey"],bp=["userId","collectionPath","documentId"],wp=["userId","collectionPath","largestBatchId"],xp=["userId","collectionGroup","largestBatchId"],_p=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Ip=[].concat((0,B.Z)(_p),["documentOverlays"]),Zp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sp=Zp,Ep=[].concat(Sp,["indexConfiguration","indexState","indexEntries"]),Tp=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this)).at=e,i.currentSequenceNumber=r,i}return(0,o.Z)(n)}(Ld);function Cp(e,t){var n=nd(e);return jd.O(n.at,t)}function Np(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ap(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Dp(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Rp=function(){function e(t,n){(0,a.Z)(this,e),this.comparator=t,this.root=n||Pp.EMPTY}return(0,o.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Pp.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pp.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Op(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Op(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Op(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Op(this.root,e,this.comparator,!0)}}]),e}(),Op=function(){function e(t,n,r,i){(0,a.Z)(this,e),this.isReverse=i,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return(0,o.Z)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Pp=function(){function e(t,n,r,i,o){(0,a.Z)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return(0,o.Z)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ed();if(this.right.isRed())throw ed();var e=this.left.check();if(e!==this.right.check())throw ed();return e+(this.isRed()?0:1)}}]),e}();Pp.EMPTY=null,Pp.RED=!0,Pp.BLACK=!1,Pp.EMPTY=new(function(){function e(){(0,a.Z)(this,e),this.size=0}return(0,o.Z)(e,[{key:"key",get:function(){throw ed()}},{key:"value",get:function(){throw ed()}},{key:"color",get:function(){throw ed()}},{key:"left",get:function(){throw ed()}},{key:"right",get:function(){throw ed()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Pp(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Lp=function(){function e(t){(0,a.Z)(this,e),this.comparator=t,this.data=new Rp(this.comparator)}return(0,o.Z)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Mp(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Mp(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Mp=function(){function e(t){(0,a.Z)(this,e),this.iter=t}return(0,o.Z)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Fp(e){return e.hasNext()?e.getNext():void 0}var Up=function(){function e(t){(0,a.Z)(this,e),this.fields=t,t.sort(Id.comparator)}return(0,o.Z)(e,[{key:"unionWith",value:function(t){var n,r=new Lp(Id.comparator),i=(0,u.Z)(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,s=(0,u.Z)(t);try{for(s.s();!(o=s.n()).done;){var c=o.value;r=r.add(c)}}catch(l){s.e(l)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=(0,u.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return md(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Vp=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return(0,o.Z)(n)}((0,h.Z)(Error));var jp=function(e){function t(e){(0,a.Z)(this,t),this.binaryString=e}return(0,o.Z)(t,[{key:e,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return yd(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Vp("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}(Symbol.iterator);jp.EMPTY_BYTE_STRING=new jp("");var zp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bp(e){if(td(!!e),"string"==typeof e){var t=0,n=zp.exec(e);if(td(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:qp(e.seconds),nanos:qp(e.nanos)}}function qp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Kp(e){return"string"==typeof e?jp.fromBase64String(e):jp.fromUint8Array(e)}function Gp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Wp(e){var t=e.mapValue.fields.__previous_value__;return Gp(t)?Wp(t):t}function Hp(e){var t=Bp(e.mapValue.fields.__local_write_time__.timestampValue);return new kd(t.seconds,t.nanos)}var Qp=(0,o.Z)((function e(t,n,r,i,o,u,s,c){(0,a.Z)(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=s,this.useFetchStreams=c})),$p=function(){function e(t,n){(0,a.Z)(this,e),this.projectId=t,this.database=n||"(default)"}return(0,o.Z)(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Yp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jp={nullValue:"NULL_VALUE"};function Xp(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Gp(e)?4:dv(e)?9007199254740991:10:ed()}function ev(e,t){if(e===t)return!0;var n=Xp(e);if(n!==Xp(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Hp(e).isEqual(Hp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Bp(e.timestampValue),r=Bp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Kp(e.bytesValue).isEqual(Kp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return qp(e.geoPointValue.latitude)===qp(t.geoPointValue.latitude)&&qp(e.geoPointValue.longitude)===qp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return qp(e.integerValue)===qp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=qp(e.doubleValue),r=qp(t.doubleValue);return n===r?Xd(n)===Xd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return md(e.arrayValue.values||[],t.arrayValue.values||[],ev);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Np(n)!==Np(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ev(n[i],r[i])))return!1;return!0}(e,t);default:return ed()}}function tv(e,t){return void 0!==(e.values||[]).find((function(e){return ev(e,t)}))}function nv(e,t){if(e===t)return 0;var n=Xp(e),r=Xp(t);if(n!==r)return yd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return yd(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=qp(e.integerValue||e.doubleValue),r=qp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return rv(e.timestampValue,t.timestampValue);case 4:return rv(Hp(e),Hp(t));case 5:return yd(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Kp(e),r=Kp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=yd(n[i],r[i]);if(0!==a)return a}return yd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=yd(qp(e.latitude),qp(t.latitude));return 0!==n?n:yd(qp(e.longitude),qp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=nv(n[i],r[i]);if(a)return a}return yd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Yp.mapValue&&t===Yp.mapValue)return 0;if(e===Yp.mapValue)return 1;if(t===Yp.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=yd(r[o],a[o]);if(0!==u)return u;var s=nv(n[r[o]],i[a[o]]);if(0!==s)return s}return yd(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ed()}}function rv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return yd(e,t);var n=Bp(e),r=Bp(t),i=yd(n.seconds,r.seconds);return 0!==i?i:yd(n.nanos,r.nanos)}function iv(e){return av(e)}function av(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Bp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Kp(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Zd.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=(0,u.Z)(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=av(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n=Object.keys(e.fields||{}).sort(),r="{",i=!0,a=(0,u.Z)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;i?i=!1:r+=",",r+="".concat(o,":").concat(av(e.fields[o]))}}catch(s){a.e(s)}finally{a.f()}return r+"}"}(e.mapValue):ed();var t,n}function ov(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function uv(e){return!!e&&"integerValue"in e}function sv(e){return!!e&&"arrayValue"in e}function cv(e){return!!e&&"nullValue"in e}function lv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function fv(e){return!!e&&"mapValue"in e}function hv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ap(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=hv(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=hv(e.arrayValue.values[r]);return n}return Object.assign({},e)}function dv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function pv(e){return"nullValue"in e?Jp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ov($p.empty(),Zd.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ed()}function vv(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ov($p.empty(),Zd.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Yp:ed()}function yv(e,t){var n=nv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function mv(e,t){var n=nv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var gv=function(){function e(t){(0,a.Z)(this,e),this.value=t}return(0,o.Z)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!fv(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hv(t)}},{key:"setAll",value:function(e){var t=this,n=Id.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=hv(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());fv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return ev(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];fv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ap(t,(function(t,n){return e[t]=n}));var r,i=(0,u.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(hv(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function kv(e){var t=[];return Ap(e.fields,(function(e,n){var r=new Id([e]);if(fv(n)){var i=kv(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=(0,u.Z)(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(c){o.e(c)}finally{o.f()}}}else t.push(r)})),new Up(t)}var bv=function(){function e(t,n,r,i,o,u,s){(0,a.Z)(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=u,this.documentState=s}return(0,o.Z)(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(bd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=gv.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=gv.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=bd.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,bd.min(),bd.min(),bd.min(),gv.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,bd.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,bd.min(),bd.min(),gv.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,bd.min(),bd.min(),gv.empty(),2)}}]),e}(),wv=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.position=t,this.inclusive=n}));function xv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Zd.comparator(Zd.fromName(o.referenceValue),n.key):nv(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function _v(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ev(e.position[n],t.position[n]))return!1;return!0}var Iv=(0,o.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";(0,a.Z)(this,e),this.field=t,this.dir=n}));function Zv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Sv=(0,o.Z)((function e(){(0,a.Z)(this,e)})),Ev=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var o;return(0,a.Z)(this,n),(o=t.call(this)).field=e,o.op=r,o.value=i,o}return(0,o.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(nv(t,this.value)):null!==t&&Xp(this.value)===Xp(t)&&this.matchesComparison(nv(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ed()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Mv(e,t,r):"array-contains"===t?new jv(e,r):"in"===t?new zv(e,r):"not-in"===t?new Bv(e,r):"array-contains-any"===t?new qv(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Fv(e,n):new Uv(e,n)}}]),n}(Sv),Tv=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return(0,o.Z)(n,[{key:"matches",value:function(e){return Cv(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=(0,u.Z)(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Sv);function Cv(e){return"and"===e.op}function Nv(e){return"or"===e.op}function Av(e){return Dv(e)&&Cv(e)}function Dv(e){var t,n=(0,u.Z)(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Tv)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Rv(e){if(e instanceof Ev)return e.field.canonicalString()+e.op.toString()+iv(e.value);if(Av(e))return e.filters.map((function(e){return Rv(e)})).join(",");var t=e.filters.map((function(e){return Rv(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Ov(e,t){return e instanceof Ev?function(e,t){return t instanceof Ev&&e.op===t.op&&e.field.isEqual(t.field)&&ev(e.value,t.value)}(e,t):e instanceof Tv?function(e,t){return t instanceof Tv&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Ov(n,t.filters[r])}),!0)}(e,t):void ed()}function Pv(e,t){var n=e.filters.concat(t);return Tv.create(n,e.op)}function Lv(e){return e instanceof Ev?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(iv(e.value))}(e):e instanceof Tv?function(e){return e.op.toString()+" {"+e.getFilters().map(Lv).join(" ,")+"}"}(e):"Filter"}var Mv=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var o;return(0,a.Z)(this,n),(o=t.call(this,e,r,i)).key=Zd.fromName(i.referenceValue),o}return(0,o.Z)(n,[{key:"matches",value:function(e){var t=Zd.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Ev),Fv=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,e,"in",r)).keys=Vv("in",r),i}return(0,o.Z)(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ev),Uv=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,e,"not-in",r)).keys=Vv("not-in",r),i}return(0,o.Z)(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ev);function Vv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Zd.fromName(e.referenceValue)}))}var jv=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){return(0,a.Z)(this,n),t.call(this,e,"array-contains",r)}return(0,o.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return sv(t)&&tv(t.arrayValue,this.value)}}]),n}(Ev),zv=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){return(0,a.Z)(this,n),t.call(this,e,"in",r)}return(0,o.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&tv(this.value.arrayValue,t)}}]),n}(Ev),Bv=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){return(0,a.Z)(this,n),t.call(this,e,"not-in",r)}return(0,o.Z)(n,[{key:"matches",value:function(e){if(tv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!tv(this.value.arrayValue,t)}}]),n}(Ev),qv=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){return(0,a.Z)(this,n),t.call(this,e,"array-contains-any",r)}return(0,o.Z)(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!sv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return tv(t.value.arrayValue,e)}))}}]),n}(Ev),Kv=(0,o.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,a.Z)(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=s,this.ft=null}));function Gv(e){return new Kv(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Wv(e){var t=nd(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Rv(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Jd(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return iv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return iv(e)})).join(",")),t.ft=n}return t.ft}function Hv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Zv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Ov(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_v(e.startAt,t.startAt)&&_v(e.endAt,t.endAt)}function Qv(e){return Zd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function $v(e,t){return e.filters.filter((function(e){return e instanceof Ev&&e.field.isEqual(t)}))}function Yv(e,t,n){var r,i=Jp,a=!0,o=(0,u.Z)($v(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,c=Jp,l=!0;switch(s.op){case"<":case"<=":c=pv(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,l=!1;break;case"!=":case"not-in":c=Jp}yv({value:i,inclusive:a},{value:c,inclusive:l})<0&&(i=c,a=l)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var f=0;f<e.orderBy.length;++f)if(e.orderBy[f].field.isEqual(t)){var h=n.position[f];yv({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function Jv(e,t,n){var r,i=Yp,a=!0,o=(0,u.Z)($v(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,c=Yp,l=!0;switch(s.op){case">=":case">":c=vv(s.value),l=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,l=!1;break;case"!=":case"not-in":c=Yp}mv({value:i,inclusive:a},{value:c,inclusive:l})>0&&(i=c,a=l)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var f=0;f<e.orderBy.length;++f)if(e.orderBy[f].field.isEqual(t)){var h=n.position[f];mv({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var Xv=(0,o.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,a.Z)(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=s,this.endAt=c,this.dt=null,this.wt=null,this.startAt,this.endAt}));function ey(e,t,n,r,i,a,o,u){return new Xv(e,t,n,r,i,a,o,u)}function ty(e){return new Xv(e)}function ny(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ry(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function iy(e){var t,n=(0,u.Z)(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function ay(e){return null!==e.collectionGroup}function oy(e){var t=nd(e);if(null===t.dt){t.dt=[];var n=iy(t),r=ry(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Iv(n)),t.dt.push(new Iv(Id.keyField(),"asc"));else{var i,a=!1,o=(0,u.Z)(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.dt.push(s),s.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var c=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Iv(Id.keyField(),c))}}}return t.dt}function uy(e){var t=nd(e);if(!t.wt)if("F"===t.limitType)t.wt=Gv(t.path,t.collectionGroup,oy(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=(0,u.Z)(oy(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Iv(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var s=t.endAt?new wv(t.endAt.position,t.endAt.inclusive):null,c=t.startAt?new wv(t.startAt.position,t.startAt.inclusive):null;t.wt=Gv(t.path,t.collectionGroup,r,t.filters,t.limit,s,c)}return t.wt}function sy(e,t){t.getFirstInequalityField(),iy(e);var n=e.filters.concat([t]);return new Xv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function cy(e,t,n){return new Xv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ly(e,t){return Hv(uy(e),uy(t))&&e.limitType===t.limitType}function fy(e){return"".concat(Wv(uy(e)),"|lt:").concat(e.limitType)}function hy(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Lv(e)})).join(", "),"]")),Jd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return iv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return iv(e)})).join(",")),"Target(".concat(t,")")}(uy(e)),"; limitType=").concat(e.limitType,")")}function dy(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Zd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=(0,u.Z)(oy(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=(0,u.Z)(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=xv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,oy(e),t))&&!(e.endAt&&!function(e,t,n){var r=xv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,oy(e),t))}(e,t)}function py(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vy(e){return function(t,n){var r,i=!1,a=(0,u.Z)(oy(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=yy(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(c){a.e(c)}finally{a.f()}return 0}}function yy(e,t,n){var r=e.field.isKeyField()?Zd.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?nv(r,i):ed()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ed()}}var my=function(){function e(t,n){(0,a.Z)(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return(0,o.Z)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=(0,u.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=(0,s.Z)(r.value,2),o=a[0],c=a[1];if(this.equalsFn(o,e))return c}}catch(l){i.e(l)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ap(this.inner,(function(t,n){var r,i=(0,u.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=(0,s.Z)(r.value,2),o=a[0],c=a[1];e(o,c)}}catch(l){i.e(l)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Dp(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),gy=new Rp(Zd.comparator);function ky(){return gy}var by=new Rp(Zd.comparator);function wy(){for(var e=by,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function xy(e){var t=by;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function _y(){return Zy()}function Iy(){return Zy()}function Zy(){return new my((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Sy=new Rp(Zd.comparator),Ey=new Lp(Zd.comparator);function Ty(){for(var e=Ey,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Cy=new Lp(yd);function Ny(){return Cy}function Ay(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xd(t)?"-0":t}}function Dy(e){return{integerValue:""+e}}function Ry(e,t){return ep(t)?Dy(t):Ay(e,t)}var Oy=(0,o.Z)((function e(){(0,a.Z)(this,e),this._=void 0}));function Py(e,t,n){return e instanceof Fy?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Uy?Vy(e,t):e instanceof jy?zy(e,t):function(e,t){var n=My(e,t),r=qy(n)+qy(e._t);return uv(n)&&uv(e._t)?Dy(r):Ay(e.serializer,r)}(e,t)}function Ly(e,t,n){return e instanceof Uy?Vy(e,t):e instanceof jy?zy(e,t):n}function My(e,t){return e instanceof By?uv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Fy=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(Oy),Uy=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this)).elements=e,r}return(0,o.Z)(n)}(Oy);function Vy(e,t){var n,r=Ky(t),i=(0,u.Z)(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return ev(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var jy=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this)).elements=e,r}return(0,o.Z)(n)}(Oy);function zy(e,t){var n,r=Ky(t),i=(0,u.Z)(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!ev(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var By=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this)).serializer=e,i._t=r,i}return(0,o.Z)(n)}(Oy);function qy(e){return qp(e.integerValue||e.doubleValue)}function Ky(e){return sv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Gy=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.field=t,this.transform=n}));var Wy=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.version=t,this.transformResults=n})),Hy=function(){function e(t,n){(0,a.Z)(this,e),this.updateTime=t,this.exists=n}return(0,o.Z)(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Qy(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var $y=(0,o.Z)((function e(){(0,a.Z)(this,e)}));function Yy(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new cm(e.key,Hy.none()):new nm(e.key,e.data,Hy.none());var n,r=e.data,i=gv.empty(),a=new Lp(Id.comparator),o=(0,u.Z)(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var c=r.field(s);null===c&&s.length>1&&(s=s.popLast(),c=r.field(s)),null===c?i.delete(s):i.set(s,c),a=a.add(s)}}}catch(l){o.e(l)}finally{o.f()}return new rm(e.key,i,new Up(a.toArray()),Hy.none())}function Jy(e,t,n){e instanceof nm?function(e,t,n){var r=e.value.clone(),i=am(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof rm?function(e,t,n){if(Qy(e.precondition,t)){var r=am(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(im(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Xy(e,t,n,r){return e instanceof nm?function(e,t,n,r){if(!Qy(e.precondition,t))return n;var i=e.value.clone(),a=om(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof rm?function(e,t,n,r){if(!Qy(e.precondition,t))return n;var i=om(e.fieldTransforms,r,t),a=t.data;return a.setAll(im(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Qy(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function em(e,t){var n,r=null,i=(0,u.Z)(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=My(a.transform,o||null);null!=s&&(null===r&&(r=gv.empty()),r.set(a.field,s))}}catch(c){i.e(c)}finally{i.f()}return r||null}function tm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&md(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Uy&&t instanceof Uy||e instanceof jy&&t instanceof jy?md(e.elements,t.elements,ev):e instanceof By&&t instanceof By?ev(e._t,t._t):e instanceof Fy&&t instanceof Fy}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var nm=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,a.Z)(this,n),(o=t.call(this)).key=e,o.value=r,o.precondition=i,o.fieldTransforms=u,o.type=0,o}return(0,o.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}($y),rm=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,o){var u,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,a.Z)(this,n),(u=t.call(this)).key=e,u.data=r,u.fieldMask=i,u.precondition=o,u.fieldTransforms=s,u.type=1,u}return(0,o.Z)(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}($y);function im(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function am(e,t,n){var r=new Map;td(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Ly(o,u,n[i]))}return r}function om(e,t,n){var r,i=new Map,a=(0,u.Z)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,c=n.data.field(o.field);i.set(o.field,Py(s,c,t))}}catch(l){a.e(l)}finally{a.f()}return i}var um,sm,cm=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return(0,o.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}($y),lm=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return(0,o.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}($y),fm=function(){function e(t,n,r,i){(0,a.Z)(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return(0,o.Z)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Jy(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=(0,u.Z)(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Xy(i,e,t,this.localWriteTime))}}catch(c){r.e(c)}finally{r.f()}var a,o=(0,u.Z)(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Xy(s,e,t,this.localWriteTime))}}catch(c){o.e(c)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Iy();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Yy(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(bd.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ty())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&md(this.mutations,e.mutations,(function(e,t){return tm(e,t)}))&&md(this.baseMutations,e.baseMutations,(function(e,t){return tm(e,t)}))}}]),e}(),hm=function(){function e(t,n,r,i){(0,a.Z)(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return(0,o.Z)(e,null,[{key:"from",value:function(t,n,r){td(t.mutations.length===r.length);for(var i=Sy,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),dm=function(){function e(t,n){(0,a.Z)(this,e),this.largestBatchId=t,this.mutation=n}return(0,o.Z)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),pm=(0,o.Z)((function e(t){(0,a.Z)(this,e),this.count=t}));function vm(e){switch(e){default:return ed();case rd.CANCELLED:case rd.UNKNOWN:case rd.DEADLINE_EXCEEDED:case rd.RESOURCE_EXHAUSTED:case rd.INTERNAL:case rd.UNAVAILABLE:case rd.UNAUTHENTICATED:return!1;case rd.INVALID_ARGUMENT:case rd.NOT_FOUND:case rd.ALREADY_EXISTS:case rd.PERMISSION_DENIED:case rd.FAILED_PRECONDITION:case rd.ABORTED:case rd.OUT_OF_RANGE:case rd.UNIMPLEMENTED:case rd.DATA_LOSS:return!0}}function ym(e){if(void 0===e)return Yh("GRPC error has no .code"),rd.UNKNOWN;switch(e){case um.OK:return rd.OK;case um.CANCELLED:return rd.CANCELLED;case um.UNKNOWN:return rd.UNKNOWN;case um.DEADLINE_EXCEEDED:return rd.DEADLINE_EXCEEDED;case um.RESOURCE_EXHAUSTED:return rd.RESOURCE_EXHAUSTED;case um.INTERNAL:return rd.INTERNAL;case um.UNAVAILABLE:return rd.UNAVAILABLE;case um.UNAUTHENTICATED:return rd.UNAUTHENTICATED;case um.INVALID_ARGUMENT:return rd.INVALID_ARGUMENT;case um.NOT_FOUND:return rd.NOT_FOUND;case um.ALREADY_EXISTS:return rd.ALREADY_EXISTS;case um.PERMISSION_DENIED:return rd.PERMISSION_DENIED;case um.FAILED_PRECONDITION:return rd.FAILED_PRECONDITION;case um.ABORTED:return rd.ABORTED;case um.OUT_OF_RANGE:return rd.OUT_OF_RANGE;case um.UNIMPLEMENTED:return rd.UNIMPLEMENTED;case um.DATA_LOSS:return rd.DATA_LOSS;default:return ed()}}(sm=um||(um={}))[sm.OK=0]="OK",sm[sm.CANCELLED=1]="CANCELLED",sm[sm.UNKNOWN=2]="UNKNOWN",sm[sm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sm[sm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sm[sm.NOT_FOUND=5]="NOT_FOUND",sm[sm.ALREADY_EXISTS=6]="ALREADY_EXISTS",sm[sm.PERMISSION_DENIED=7]="PERMISSION_DENIED",sm[sm.UNAUTHENTICATED=16]="UNAUTHENTICATED",sm[sm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sm[sm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sm[sm.ABORTED=10]="ABORTED",sm[sm.OUT_OF_RANGE=11]="OUT_OF_RANGE",sm[sm.UNIMPLEMENTED=12]="UNIMPLEMENTED",sm[sm.INTERNAL=13]="INTERNAL",sm[sm.UNAVAILABLE=14]="UNAVAILABLE",sm[sm.DATA_LOSS=15]="DATA_LOSS";var mm=function(){function e(){(0,a.Z)(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return(0,o.Z)(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return gm}},{key:"getOrCreateInstance",value:function(){return null===gm&&(gm=new e),gm}}]),e}(),gm=null,km=function(){function e(t,n,r,i,o){(0,a.Z)(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return(0,o.Z)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,bm.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(bd.min(),i,Ny(),ky(),Ty())}}]),e}(),bm=function(){function e(t,n,r,i,o){(0,a.Z)(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return(0,o.Z)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Ty(),Ty(),Ty())}}]),e}(),wm=(0,o.Z)((function e(t,n,r,i){(0,a.Z)(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),xm=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.targetId=t,this.Et=n})),_m=(0,o.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,a.Z)(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Im=function(){function e(){(0,a.Z)(this,e),this.At=0,this.Rt=Em(),this.vt=jp.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return(0,o.Z)(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=Ty(),t=Ty(),n=Ty();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ed()}})),new bm(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=Em()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),Zm=function(){function e(t){(0,a.Z)(this,e),this.Ft=t,this.Bt=new Map,this.Lt=ky(),this.qt=Sm(),this.Ut=new Lp(yd)}return(0,o.Z)(e,[{key:"Kt",value:function(e){var t,n=(0,u.Z)(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(s){n.e(s)}finally{n.f()}var i,a=(0,u.Z)(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:ed()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var a=i.target;if(Qv(a))if(0===r){var o=new Zd(a.path);this.Qt(n,o,bv.newNoDocument(o,bd.min()))}else td(1===r);else{var u=this.Zt(n);u!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=mm.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:u,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Qv(a.target)){var o=new Zd(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,bv.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=Ty();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new km(e,n,this.Ut,this.Lt,r);return this.Lt=ky(),this.qt=Sm(),this.Ut=new Lp(yd),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new Im,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Lp(yd),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||$h("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new Im),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function Sm(){return new Rp(Zd.comparator)}function Em(){return new Rp(Zd.comparator)}var Tm={asc:"ASCENDING",desc:"DESCENDING"},Cm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nm={and:"AND",or:"OR"},Am=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.databaseId=t,this.useProto3Json=n}));function Dm(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Om(e,t){return Dm(e,t.toTimestamp())}function Pm(e){return td(!!e),bd.fromTimestamp(function(e){var t=Bp(e);return new kd(t.seconds,t.nanos)}(e))}function Lm(e,t){return function(e){return new xd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Mm(e){var t=xd.fromString(e);return td(og(t)),t}function Fm(e,t){return Lm(e.databaseId,t.path)}function Um(e,t){var n=Mm(t);if(n.get(1)!==e.databaseId.projectId)throw new id(rd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new id(rd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Zd(Bm(n))}function Vm(e,t){return Lm(e.databaseId,t)}function jm(e){var t=Mm(e);return 4===t.length?xd.emptyPath():Bm(t)}function zm(e){return new xd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Bm(e){return td(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function qm(e,t,n){return{name:Fm(e,t),fields:n.value.mapValue.fields}}function Km(e,t,n){var r=Um(e,t.name),i=Pm(t.updateTime),a=t.createTime?Pm(t.createTime):bd.min(),o=new gv({mapValue:{fields:t.fields}}),u=bv.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Gm(e,t){return"found"in t?function(e,t){td(!!t.found),t.found.name,t.found.updateTime;var n=Um(e,t.found.name),r=Pm(t.found.updateTime),i=t.found.createTime?Pm(t.found.createTime):bd.min(),a=new gv({mapValue:{fields:t.found.fields}});return bv.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){td(!!t.missing),td(!!t.readTime);var n=Um(e,t.missing),r=Pm(t.readTime);return bv.newNoDocument(n,r)}(e,t):ed()}function Wm(e,t){var n;if(t instanceof nm)n={update:qm(e,t.key,t.value)};else if(t instanceof cm)n={delete:Fm(e,t.key)};else if(t instanceof rm)n={update:qm(e,t.key,t.data),updateMask:ag(t.fieldMask)};else{if(!(t instanceof lm))return ed();n={verify:Fm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Fy)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Uy)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof jy)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof By)return{fieldPath:t.field.canonicalString(),increment:n._t};throw ed()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Om(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ed()}(e,t.precondition)),n}function Hm(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Hy.updateTime(Pm(e.updateTime)):void 0!==e.exists?Hy.exists(e.exists):Hy.none()}(t.currentDocument):Hy.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)td("REQUEST_TIME"===t.setToServerValue),n=new Fy;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Uy(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new jy(i)}else"increment"in t?n=new By(e,t.increment):ed();var a=Id.fromServerFormat(t.fieldPath);return new Gy(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Um(e,t.update.name),a=new gv({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Up(t.map((function(e){return Id.fromServerFormat(e)})))}(t.updateMask);return new rm(i,a,o,n,r)}return new nm(i,a,n,r)}if(t.delete){var u=Um(e,t.delete);return new cm(u,n)}if(t.verify){var s=Um(e,t.verify);return new lm(s,n)}return ed()}function Qm(e,t){return{documents:[Vm(e,t.path)]}}function $m(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Vm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Vm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return ig(Tv.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:ng(e.field),direction:Xm(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.useProto3Json||Jd(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Ym(e){var t=jm(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){td(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Jm(e);return t instanceof Tv&&Av(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Iv(rg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Jd(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new wv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new wv(n,t)}(n.endAt)),ey(t,i,u,o,s,"F",c,l)}function Jm(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=rg(e.unaryFilter.field);return Ev.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=rg(e.unaryFilter.field);return Ev.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=rg(e.unaryFilter.field);return Ev.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=rg(e.unaryFilter.field);return Ev.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ed()}}(e):void 0!==e.fieldFilter?function(e){return Ev.create(rg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ed()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Tv.create(e.compositeFilter.filters.map((function(e){return Jm(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ed()}}(e.compositeFilter.op))}(e):ed()}function Xm(e){return Tm[e]}function eg(e){return Cm[e]}function tg(e){return Nm[e]}function ng(e){return{fieldPath:e.canonicalString()}}function rg(e){return Id.fromServerFormat(e.fieldPath)}function ig(e){return e instanceof Ev?function(e){if("=="===e.op){if(lv(e.value))return{unaryFilter:{field:ng(e.field),op:"IS_NAN"}};if(cv(e.value))return{unaryFilter:{field:ng(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lv(e.value))return{unaryFilter:{field:ng(e.field),op:"IS_NOT_NAN"}};if(cv(e.value))return{unaryFilter:{field:ng(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ng(e.field),op:eg(e.op),value:e.value}}}(e):e instanceof Tv?function(e){var t=e.getFilters().map((function(e){return ig(e)}));return 1===t.length?t[0]:{compositeFilter:{op:tg(e.op),filters:t}}}(e):ed()}function ag(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function og(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var ug=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:bd.min(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:bd.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:jp.EMPTY_BYTE_STRING;(0,a.Z)(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=s}return(0,o.Z)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),sg=(0,o.Z)((function e(t){(0,a.Z)(this,e),this.se=t}));function cg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:lg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Fm(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Dm(e,t.version.toTimestamp()),createTime:Dm(e,t.createTime.toTimestamp())}}(e.se,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:fg(t.version)};else{if(!t.isUnknownDocument())return ed();r.unknownDocument={path:n.path.toArray(),version:fg(t.version)}}return r}function lg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function fg(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function hg(e){var t=new kd(e.seconds,e.nanoseconds);return bd.fromTimestamp(t)}function dg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Hm(e.se,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Hm(e.se,t)})),u=kd.fromMillis(t.localWriteTimeMs);return new fm(t.batchId,u,n,o)}function pg(e){var t,n,r=hg(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?hg(e.lastLimboFreeSnapshotVersion):bd.min();return void 0!==e.query.documents?(td(1===(n=e.query).documents.length),t=uy(ty(jm(n.documents[0])))):t=function(e){return uy(Ym(e))}(e.query),new ug(t,e.targetId,0,e.lastListenSequenceNumber,r,i,jp.fromBase64String(e.resumeToken))}function vg(e,t){var n,r=fg(t.snapshotVersion),i=fg(t.lastLimboFreeSnapshotVersion);n=Qv(t.target)?Qm(e.se,t.target):$m(e.se,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Wv(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function yg(e){var t=Ym({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?cy(t,t.limit,"L"):t}function mg(e,t){return new dm(t.largestBatchId,Hm(e.se,t.overlayMutation))}function gg(e,t){var n=t.path.lastSegment();return[e,tp(t.path.popLast()),n]}function kg(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:fg(r.readTime),documentKey:tp(r.documentKey.path),largestBatchId:r.largestBatchId}}var bg=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return wg(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:hg(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return wg(e).put({bundleId:(n=t).id,createTime:fg(Pm(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return xg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:yg(t.bundledQuery),readTime:hg(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return xg(e).put(function(e){return{name:e.name,readTime:fg(Pm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function wg(e){return Cp(e,"bundles")}function xg(e){return Cp(e,"namedQueries")}var _g=function(){function e(t,n){(0,a.Z)(this,e),this.serializer=t,this.userId=n}return(0,o.Z)(e,[{key:"getOverlay",value:function(e,t){var n=this;return Ig(e).get(gg(this.userId,t)).next((function(e){return e?mg(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=_y();return Ud.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new dm(t,a);i.push(r.re(e,o))})),Ud.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(tp(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Ig(e).J("collectionPathOverlayIndex",i))})),Ud.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=_y(),a=tp(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ig(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=(0,u.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=mg(r.serializer,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=_y(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ig(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=mg(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"re",value:function(e,t){return Ig(e).put(function(e,t,n){var r=gg(t,n.mutation.key),i=(0,s.Z)(r,3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Wm(e.se,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"ie",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Ig(e){return Cp(e,"documentOverlays")}var Zg=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(qp(e.integerValue));else if("doubleValue"in e){var n=qp(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),Xd(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Kp(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?dv(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):ed()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.fe(a,t),this.ue(n[a],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,i=(0,u.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ue(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),Zd.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();function Sg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Eg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Sg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Zg.pe=new Zg;var Tg=function(){function e(){(0,a.Z)(this,e),this.buffer=new Uint8Array(1024),this.position=0}return(0,o.Z)(e,[{key:"Ie",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Te(n.value),n=t.next();this.Ee()}},{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.ve()}},{key:"be",value:function(e){var t,n=(0,u.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Te(i);else if(i<2048)this.Te(960|i>>>6),this.Te(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Te(480|i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i);else{var a=r.codePointAt(0);this.Te(240|a>>>18),this.Te(128|63&a>>>12),this.Te(128|63&a>>>6),this.Te(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ee()}},{key:"Pe",value:function(e){var t,n=(0,u.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"Ve",value:function(e){var t=this.Se(e),n=Eg(t);this.De(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ce",value:function(e){var t=this.Se(e),n=Eg(t);this.De(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"xe",value:function(){this.Ne(255),this.Ne(255)}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Se",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Te",value:function(e){var t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}},{key:"Ee",value:function(){this.Ne(0),this.Ne(1)}},{key:"ve",value:function(){this.Oe(0),this.Oe(1)}},{key:"Ne",value:function(e){this.De(1),this.buffer[this.position++]=e}},{key:"Oe",value:function(e){this.De(1),this.buffer[this.position++]=~e}},{key:"De",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Cg=function(){function e(t){(0,a.Z)(this,e),this.Me=t}return(0,o.Z)(e,[{key:"we",value:function(e){this.Me.Ie(e)}},{key:"le",value:function(e){this.Me.be(e)}},{key:"he",value:function(e){this.Me.Ve(e)}},{key:"ce",value:function(){this.Me.xe()}}]),e}(),Ng=function(){function e(t){(0,a.Z)(this,e),this.Me=t}return(0,o.Z)(e,[{key:"we",value:function(e){this.Me.Ae(e)}},{key:"le",value:function(e){this.Me.Pe(e)}},{key:"he",value:function(e){this.Me.Ce(e)}},{key:"ce",value:function(){this.Me.ke()}}]),e}(),Ag=function(){function e(){(0,a.Z)(this,e),this.Me=new Tg,this.Fe=new Cg(this.Me),this.Be=new Ng(this.Me)}return(0,o.Z)(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Le",value:function(e){return 0===e?this.Fe:this.Be}},{key:"$e",value:function(){return this.Me.$e()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),Dg=function(){function e(t,n,r,i){(0,a.Z)(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return(0,o.Z)(e,[{key:"qe",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Rg(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Og(e.arrayValue,t.arrayValue))?n:0!==(n=Og(e.directionalValue,t.directionalValue))?n:Zd.comparator(e.documentKey,t.documentKey)}function Og(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Pg=function(){function e(t){(0,a.Z)(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.Ke=[];var n,r=(0,u.Z)(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ge=i:this.Ke.push(i)}}catch(o){r.e(o)}finally{r.f()}}return(0,o.Z)(e,[{key:"Qe",value:function(e){td(e.collectionGroup===this.collectionId);var t=Ed(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=Td(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ge){var a=n[r];if(!this.je(this.Ge,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=(0,u.Z)(this.Ke);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Lg(e){var t,n;if(td(e instanceof Ev||e instanceof Tv),e instanceof Ev){if(e instanceof zv){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Ev.create(e.field,"==",t)})))||[];return Tv.create(r,"or")}return e}var i=e.filters.map((function(e){return Lg(e)}));return Tv.create(i,e.op)}function Mg(e){if(0===e.getFilters().length)return[];var t=jg(Lg(e));return td(Vg(t)),Fg(t)||Ug(t)?[t]:t.getFilters()}function Fg(e){return e instanceof Ev}function Ug(e){return e instanceof Tv&&Av(e)}function Vg(e){return Fg(e)||Ug(e)||function(e){if(e instanceof Tv&&Nv(e)){var t,n=(0,u.Z)(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Fg(r)&&!Ug(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function jg(e){if(td(e instanceof Ev||e instanceof Tv),e instanceof Ev)return e;if(1===e.filters.length)return jg(e.filters[0]);var t=e.filters.map((function(e){return jg(e)})),n=Tv.create(t,e.op);return Vg(n=qg(n))?n:(td(n instanceof Tv),td(Cv(n)),td(n.filters.length>1),n.filters.reduce((function(e,t){return zg(e,t)})))}function zg(e,t){var n;return td(e instanceof Ev||e instanceof Tv),td(t instanceof Ev||t instanceof Tv),n=e instanceof Ev?t instanceof Ev?function(e,t){return Tv.create([e,t],"and")}(e,t):Bg(e,t):t instanceof Ev?Bg(t,e):function(e,t){if(td(e.filters.length>0&&t.filters.length>0),Cv(e)&&Cv(t))return Pv(e,t.getFilters());var n=Nv(e)?e:t,r=Nv(e)?t:e,i=n.filters.map((function(e){return zg(e,r)}));return Tv.create(i,"or")}(e,t),qg(n)}function Bg(e,t){if(Cv(t))return Pv(t,e.getFilters());var n=t.filters.map((function(t){return zg(e,t)}));return Tv.create(n,"or")}function qg(e){if(td(e instanceof Ev||e instanceof Tv),e instanceof Ev)return e;var t=e.getFilters();if(1===t.length)return qg(t[0]);if(Dv(e))return e;var n=t.map((function(e){return qg(e)})),r=[];return n.forEach((function(t){t instanceof Ev?r.push(t):t instanceof Tv&&(t.op===e.op?r.push.apply(r,(0,B.Z)(t.filters)):r.push(t))})),1===r.length?r[0]:Tv.create(r,e.op)}var Kg=function(){function e(){(0,a.Z)(this,e),this.He=new Gg}return(0,o.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),Ud.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ud.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ud.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ud.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ud.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ud.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ud.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ud.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ud.resolve(Rd.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ud.resolve(Rd.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ud.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ud.resolve()}}]),e}(),Gg=function(){function e(){(0,a.Z)(this,e),this.index={}}return(0,o.Z)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lp(xd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Lp(xd.comparator)).toArray()}}]),e}(),Wg=new Uint8Array(0),Hg=function(){function e(t,n){(0,a.Z)(this,e),this.user=t,this.databaseId=n,this.Je=new Gg,this.Ye=new my((function(e){return Wv(e)}),(function(e,t){return Hv(e,t)})),this.uid=t.uid||""}return(0,o.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Je.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Je.add(t)}));var a={collectionId:r,parent:tp(i)};return Qg(e).put(a)}return Ud.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[gd(t),""],!1,!0);return Qg(e).j(r).next((function(e){var r,i=(0,u.Z)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(ip(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Yg(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Jg(e);return a.next((function(e){o.put(kg(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Yg(e),r=Jg(e),i=$g(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=$g(e),i=!0,a=new Map;return Ud.forEach(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Ty(),o=[];return Ud.forEach(a,(function(i,a){var s;$h("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Wv(t)));var c=function(e,t){var n=Ed(t);if(void 0===n)return null;var r,i=(0,u.Z)($v(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=new Map,i=(0,u.Z)(Td(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=(0,u.Z)($v(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var c=a.value;switch(c.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),c.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),c.value),Array.from(r.values())}}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}return null}(a,i),f=function(e,t){var n,r=[],i=!0,a=(0,u.Z)(Td(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Yv(e,o.fieldPath,e.startAt):Jv(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(c){a.e(c)}finally{a.f()}return new wv(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=(0,u.Z)(Td(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Jv(e,o.fieldPath,e.endAt):Yv(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(c){a.e(c)}finally{a.f()}return new wv(r,i)}(a,i),d=n.tn(i,a,f),p=n.tn(i,a,h),v=n.en(i,a,l),y=n.nn(i.indexId,c,d,f.inclusive,p,h.inclusive,v);return Ud.forEach(y,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Zd.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Ud.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:Mg(Tv.create(e.filters,"and")).map((function(t){return Gv(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Ye.set(e,t),t)}},{key:"nn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.sn(t[h/c]):Wg,f=u.rn(e,s,n[h%c],r),d=u.on(e,s,i[h%c],a),p=o.map((function(t){return u.rn(e,s,t,!0)}));l.push.apply(l,(0,B.Z)(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"rn",value:function(e,t,n,r){var i=new Dg(e,Zd.empty(),t,n);return r?i:i.qe()}},{key:"on",value:function(e,t,n,r){var i=new Dg(e,Zd.empty(),t,n);return r?i.qe():i}},{key:"Xe",value:function(e,t){var n=new Pg(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=(0,u.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Qe(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return Ud.forEach(i,(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Lp(Id.comparator),r=!1,i=(0,u.Z)(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=t.value,s=(0,u.Z)(o.getFlattenedFilters());try{for(s.s();!(a=s.n()).done;){var c=a.value;c.field.isKeyField()||("array-contains"===c.op||"array-contains-any"===c.op?r=!0:n=n.add(c.field))}}catch(d){s.e(d)}finally{s.f()}}}catch(d){i.e(d)}finally{i.f()}var l,f=(0,u.Z)(e.orderBy);try{for(f.s();!(l=f.n()).done;){var h=l.value;h.field.isKeyField()||(n=n.add(h.field))}}catch(d){f.e(d)}finally{f.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"un",value:function(e,t){var n,r=new Ag,i=(0,u.Z)(Td(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Le(a.kind);Zg.pe.oe(o,s)}}catch(c){i.e(c)}finally{i.f()}return r.$e()}},{key:"sn",value:function(e){var t=new Ag;return Zg.pe.oe(e,t.Le(0)),t.$e()}},{key:"cn",value:function(e,t){var n=new Ag;return Zg.pe.oe(ov(this.databaseId,t),n.Le(function(e){var t=Td(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"en",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Ag);var i,a=0,o=(0,u.Z)(Td(e));try{for(o.s();!(i=o.n()).done;){var s,c=i.value,l=n[a++],f=(0,u.Z)(r);try{for(f.s();!(s=f.n()).done;){var h=s.value;if(this.an(t,c.fieldPath)&&sv(l))r=this.hn(r,c,l);else{var d=h.Le(c.kind);Zg.pe.oe(l,d)}}}catch(p){f.e(p)}finally{f.f()}}}catch(p){o.e(p)}finally{o.f()}return this.ln(r)}},{key:"tn",value:function(e,t,n){return this.en(e,t,n.position)}},{key:"ln",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"hn",value:function(e,t,n){var r,i=(0,B.Z)(e),a=[],o=(0,u.Z)(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,c=r.value,l=(0,u.Z)(i);try{for(l.s();!(s=l.n()).done;){var f=s.value,h=new Ag;h.seed(f.$e()),Zg.pe.oe(c,h.Le(t.kind)),a.push(h)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"an",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Ev&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Yg(e),i=Jg(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Ud.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Nd(t.sequenceNumber,new Rd(hg(t.readTime),new Zd(ip(t.documentKey)),t.largestBatchId)):Nd.empty(),r=e.fields.map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return new Cd(Id.fromServerFormat(n),r)}));return new Sd(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:yd(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Yg(e),a=Jg(e);return this.fn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Ud.forEach(t,(function(t){return a.put(kg(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ud.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Ud.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Ud.forEach(a,(function(r){return n.dn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?Ud.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"mn",value:function(e,t,n,r){return $g(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.cn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"gn",value:function(e,t,n,r){return $g(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.cn(n,t.key),t.key.path.toArray()])}},{key:"dn",value:function(e,t,n){var r=$g(e),i=new Lp(Rg);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.cn(n,t)])},(function(e,r){i=i.add(new Dg(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new Lp(Rg),r=this.un(t,e);if(null==r)return n;var i=Ed(t);if(null!=i){var a=e.data.field(i.fieldPath);if(sv(a)){var o,s=(0,u.Z)(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var c=o.value;n=n.add(new Dg(t.indexId,e.key,this.sn(c),r))}}catch(l){s.e(l)}finally{s.f()}}}else n=n.add(new Dg(t.indexId,e.key,Wg,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;$h("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Fp(a),s=Fp(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Fp(o)):l?(i(u),u=Fp(a)):(u=Fp(a),s=Fp(o))}}(r,i,Rg,(function(r){o.push(a.mn(e,t,n,r))}),(function(r){o.push(a.gn(e,t,n,r))})),Ud.waitFor(o)}},{key:"fn",value:function(e){var t=1;return Jg(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Rg(e,t)})).filter((function(e,t,n){return!t||0!==Rg(e,n[t-1])}));var r=[];r.push(e);var i,a=(0,u.Z)(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=Rg(o,e),c=Rg(o,t);if(0===s)r[0]=e.qe();else if(s>0&&c<0)r.push(o),r.push(o.qe());else if(c>0)break}}catch(p){a.e(p)}finally{a.f()}r.push(t);for(var l=[],f=0;f<r.length;f+=2){if(this.yn(r[f],r[f+1]))return[];var h=[r[f].indexId,this.uid,r[f].arrayValue,r[f].directionalValue,Wg,[]],d=[r[f+1].indexId,this.uid,r[f+1].arrayValue,r[f+1].directionalValue,Wg,[]];l.push(IDBKeyRange.bound(h,d))}return l}},{key:"yn",value:function(e,t){return Rg(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Xg)}},{key:"getMinOffset",value:function(e,t){var n=this;return Ud.mapArray(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){return e||ed()}))})).next(Xg)}}]),e}();function Qg(e){return Cp(e,"collectionParents")}function $g(e){return Cp(e,"indexEntries")}function Yg(e){return Cp(e,"indexConfiguration")}function Jg(e){return Cp(e,"indexState")}function Xg(e){td(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Od(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Rd(t.readTime,t.documentKey,n)}var ek={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tk=function(){function e(t,n,r){(0,a.Z)(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return(0,o.Z)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function nk(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,c=r.Z({range:o},(function(e,t,n){return s++,n.delete()}));a.push(c.next((function(){td(1===s)})));var l,f=[],h=(0,u.Z)(n.mutations);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=up(t,d.key.path,n.batchId);a.push(i.delete(p)),f.push(d.key)}}catch(v){h.e(v)}finally{h.f()}return Ud.waitFor(a).next((function(){return f}))}function rk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ed();t=e.noDocument}return JSON.stringify(t).length}tk.DEFAULT_COLLECTION_PERCENTILE=10,tk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tk.DEFAULT=new tk(41943040,tk.DEFAULT_COLLECTION_PERCENTILE,tk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tk.DISABLED=new tk(-1,0,0);var ik=function(){function e(t,n,r,i){(0,a.Z)(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.pn={}}return(0,o.Z)(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ok(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=uk(e),o=ok(e);return o.add({}).next((function(s){td("number"==typeof s);var c,l=new fm(s,t,n,r),f=function(e,t,n){var r=n.baseMutations.map((function(t){return Wm(e.se,t)})),i=n.mutations.map((function(t){return Wm(e.se,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,l),h=[],d=new Lp((function(e,t){return yd(e.canonicalString(),t.canonicalString())})),p=(0,u.Z)(r);try{for(p.s();!(c=p.n()).done;){var v=c.value,y=up(i.userId,v.key.path,s);d=d.add(v.key.path.popLast()),h.push(o.put(f)),h.push(a.put(y,sp))}}catch(m){p.e(m)}finally{p.f()}return d.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.pn[s]=l.keys()})),Ud.waitFor(h).next((function(){return l}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return ok(e).get(t).next((function(e){return e?(td(e.userId===n.userId),dg(n.serializer,e)):null}))}},{key:"In",value:function(e,t){var n=this;return this.pn[t]?Ud.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.pn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return ok(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(td(t.batchId>=r),a=dg(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ok(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ok(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return dg(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=op(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return uk(e).Z({range:i},(function(r,i,o){var u=(0,s.Z)(r,3),c=u[0],l=u[1],f=u[2],h=ip(l);if(c===n.userId&&t.path.isEqual(h))return ok(e).get(f).next((function(e){if(!e)throw ed();td(e.userId===n.userId),a.push(dg(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Lp(yd),i=[];return t.forEach((function(t){var a=op(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=uk(e).Z({range:o},(function(e,i,a){var o=(0,s.Z)(e,3),u=o[0],c=o[1],l=o[2],f=ip(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Ud.waitFor(i).next((function(){return n.Tn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=op(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Lp(yd);return uk(e).Z({range:o},(function(e,t,a){var o=(0,s.Z)(e,3),c=o[0],l=o[1],f=o[2],h=ip(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Tn(e,u)}))}},{key:"Tn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(ok(e).get(t).next((function(e){if(null===e)throw ed();td(e.userId===n.userId),r.push(dg(n.serializer,e))})))})),Ud.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return nk(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.En(t.batchId)})),Ud.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"En",value:function(e){delete this.pn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ud.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return uk(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=ip(e[1]);i.push(a)}else r.done()})).next((function(){td(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return ak(e,this.userId,t)}},{key:"An",value:function(e){var t=this;return sk(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ie",value:function(t,n,r,i){return td(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function ak(e,t,n){var r=op(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return uk(e).Z({range:a,Y:!0},(function(e,n,r){var a=(0,s.Z)(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function ok(e){return Cp(e,"mutations")}function uk(e){return Cp(e,"documentMutations")}function sk(e){return Cp(e,"mutationQueues")}var ck=function(){function e(t){(0,a.Z)(this,e),this.Rn=t}return(0,o.Z)(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}(),lk=function(){function e(t,n){(0,a.Z)(this,e),this.referenceDelegate=t,this.serializer=n}return(0,o.Z)(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Pn(e).next((function(n){var r=new ck(n.highestTargetId);return n.highestTargetId=r.next(),t.Vn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Pn(e).next((function(e){return bd.fromTimestamp(new kd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Vn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Sn(e,t).next((function(){return n.Pn(e).next((function(r){return r.targetCount+=1,n.Dn(t,r),n.Vn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Sn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return fk(e).delete(t.targetId)})).next((function(){return n.Pn(e)})).next((function(t){return td(t.targetCount>0),t.targetCount-=1,n.Vn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return fk(e).Z((function(o,u){var s=pg(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Ud.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return fk(e).Z((function(e,n){var r=pg(n);t(r)}))}},{key:"Pn",value:function(e){return hk(e).get("targetGlobalKey").next((function(e){return td(null!==e),e}))}},{key:"Vn",value:function(e,t){return hk(e).put("targetGlobalKey",t)}},{key:"Sn",value:function(e,t){return fk(e).put(vg(this.serializer,t))}},{key:"Dn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Wv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return fk(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=pg(n);Hv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=dk(e);return t.forEach((function(t){var o=tp(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Ud.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=dk(e);return Ud.forEach(t,(function(t){var a=tp(t.path);return Ud.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=dk(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=dk(e),i=Ty();return r.Z({range:n,Y:!0},(function(e,t,n){var r=ip(e[1]),a=new Zd(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=tp(t.path),r=IDBKeyRange.bound([n],[gd(n)],!1,!0),i=0;return dk(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=(0,s.Z)(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return fk(e).get(t).next((function(e){return e?pg(e):null}))}}]),e}();function fk(e){return Cp(e,"targets")}function hk(e){return Cp(e,"targetGlobal")}function dk(e){return Cp(e,"targetDocuments")}function pk(e,t){var n=(0,s.Z)(e,2),r=n[0],i=n[1],a=(0,s.Z)(t,2),o=a[0],u=a[1],c=yd(r,o);return 0===c?yd(i,u):c}var vk=function(){function e(t){(0,a.Z)(this,e),this.Cn=t,this.buffer=new Lp(pk),this.xn=0}return(0,o.Z)(e,[{key:"Nn",value:function(){return++this.xn}},{key:"kn",value:function(e){var t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();pk(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),yk=function(){function e(t,n,r){(0,a.Z)(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return(0,o.Z)(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"$n",value:function(e){var t=this;$h("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!qd(e.t0)){e.next=12;break}$h("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Md(e.t0);case 14:return e.next=16,t.$n(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),mk=function(){function e(t,n){(0,a.Z)(this,e),this.Mn=t,this.params=n}return(0,o.Z)(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.Fn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ud.resolve(Yd.ct);var r=new vk(t);return this.Mn.forEachTarget(e,(function(e){return r.kn(e.sequenceNumber)})).next((function(){return n.Mn.Bn(e,(function(e){return r.kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?($h("LruGarbageCollector","Garbage collection skipped; disabled"),Ud.resolve(ek)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?($h("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),ek):n.Ln(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"Ln",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?($h("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Qh()<=Q.DEBUG&&$h("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Ud.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),gk=function(){function e(t,n){(0,a.Z)(this,e),this.db=t,this.garbageCollector=function(e,t){return new mk(e,t)}(this,n)}return(0,o.Z)(e,[{key:"Fn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Bn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Bn",value:function(e,t){return this.Un(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return kk(e,n)}},{key:"removeReference",value:function(e,t,n){return kk(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return kk(e,t)}},{key:"Kn",value:function(e,t){return function(e,t){var n=!1;return sk(e).X((function(r){return ak(e,r,t).next((function(e){return e&&(n=!0),Ud.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Un(e,(function(o,u){if(u<=t){var s=n.Kn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,bd.min()),dk(e).delete([0,tp(o.path)])}))}));i.push(s)}})).next((function(){return Ud.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return kk(e,t)}},{key:"Un",value:function(e,t){var n,r=dk(e),i=Yd.ct;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=(0,s.Z)(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Yd.ct&&t(new Zd(ip(n)),i),i=c,n=u):i=Yd.ct})).next((function(){i!==Yd.ct&&t(new Zd(ip(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function kk(e,t){return dk(e).put(function(e,t){return{targetId:0,path:tp(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var bk=function(){function e(){(0,a.Z)(this,e),this.changes=new my((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return(0,o.Z)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,bv.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ud.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),wk=function(){function e(t){(0,a.Z)(this,e),this.serializer=t}return(0,o.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Zk(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Zk(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],lg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Gn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=bv.newInvalidDocument(t);return Zk(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Sk(t))},(function(e,i){r=n.Qn(t,i)})).next((function(){return r}))}},{key:"zn",value:function(e,t){var n=this,r={size:0,document:bv.newInvalidDocument(t)};return Zk(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Sk(t))},(function(e,i){r={document:n.Qn(t,i),size:rk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=ky();return this.jn(e,t,(function(e,t){var i=n.Qn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r=ky(),i=new Rp(Zd.comparator);return this.jn(e,t,(function(e,t){var a=n.Qn(e,t);r=r.insert(e,a),i=i.insert(e,rk(t))})).next((function(){return{documents:r,Hn:i}}))}},{key:"jn",value:function(e,t,n){if(t.isEmpty())return Ud.resolve();var r=new Lp(Tk);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Sk(r.first()),Sk(r.last())),a=r.getIterator(),o=a.getNext();return Zk(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Zd.fromSegments([].concat((0,B.Z)(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Tk(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(Sk(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),lg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zk(e).j(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,a=ky(),o=(0,u.Z)(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,c=i.Qn(Zd.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);c.isFoundDocument()&&(dy(t,c)||r.has(c.key))&&(a=a.insert(c.key,c))}}catch(l){o.e(l)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ky(),o=Ek(t,n),u=Ek(t,Rd.max());return Zk(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Qn(Zd.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new _k(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Ik(e).get("remoteDocumentGlobalKey").next((function(e){return td(!!e),e}))}},{key:"Gn",value:function(e,t){return Ik(e).put("remoteDocumentGlobalKey",t)}},{key:"Qn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Km(e.se,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Zd.fromSegments(t.noDocument.path),i=hg(t.noDocument.readTime);n=bv.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ed();var a=Zd.fromSegments(t.unknownDocument.path),o=hg(t.unknownDocument.version);n=bv.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new kd(e[0],e[1]);return bd.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(bd.min()))return n}return bv.newInvalidDocument(e)}}]),e}();function xk(e){return new wk(e)}var _k=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this)).Jn=e,i.trackRemovals=r,i.Yn=new my((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return(0,o.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Lp((function(e,t){return yd(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Yn.get(a);if(n.push(t.Jn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=cg(t.Jn.serializer,o);i=i.add(a.path.popLast());var c=rk(s);r+=c-u.size,n.push(t.Jn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=cg(t.Jn.serializer,o.convertToNoDocument(bd.min()));n.push(t.Jn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Jn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Jn.updateMetadata(e,r)),Ud.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Jn.zn(e,t).next((function(e){return n.Yn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Jn.Wn(e,t).next((function(e){var t=e.documents;return e.Hn.forEach((function(e,r){n.Yn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(bk);function Ik(e){return Cp(e,"remoteDocumentGlobal")}function Zk(e){return Cp(e,"remoteDocumentsV14")}function Sk(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ek(e,t){var n=t.documentKey.path.toArray();return[e,lg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Tk(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=yd(n[a],r[a]))return i;return(i=yd(n.length,r.length))||((i=yd(n[n.length-2],r[r.length-2]))||yd(n[n.length-1],r[r.length-1]))}var Ck=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Nk=function(){function e(t,n,r,i){(0,a.Z)(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return(0,o.Z)(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Xy(r.mutation,e,Up.empty(),kd.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Ty()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ty(),i=_y();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=wy();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=_y();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Ty())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=ky(),a=Zy(),o=Zy();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof rm)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Xy(o.mutation,t,o.mutation.getFieldMask(),kd.now())):a.set(t.key,Up.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Ck(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Zy(),i=new Rp((function(e,t){return e-t})),a=Ty();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=(0,u.Z)(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Up.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Ty()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Iy();c.forEach((function(e){if(!a.has(e)){var n=Yy(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Ud.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Zd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ay(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ud.resolve(_y()),u=-1,s=a;return o.next((function(t){return Ud.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Ud.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Ty())})).next((function(e){return{batchId:u,changes:xy(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Zd(t)).next((function(e){var t=wy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=wy();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ud.forEach(o,(function(o){var u=function(e,t){return new Xv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,bv.newInvalidDocument(r)))}));var n=wy();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Xy(a.mutation,i,Up.empty(),kd.now()),dy(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Ak=function(){function e(t){(0,a.Z)(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return(0,o.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return Ud.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Pm(n.createTime)}),Ud.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ud.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:yg(e.bundledQuery),readTime:Pm(e.readTime)}}(t)),Ud.resolve()}}]),e}(),Dk=function(){function e(){(0,a.Z)(this,e),this.overlays=new Rp(Zd.comparator),this.ts=new Map}return(0,o.Z)(e,[{key:"getOverlay",value:function(e,t){return Ud.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=_y();return Ud.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),Ud.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),Ud.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=_y(),i=t.length+1,a=new Zd(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ud.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Rp((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=_y(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=_y(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Ud.resolve(s)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new dm(t,n));var a=this.ts.get(t);void 0===a&&(a=Ty(),this.ts.set(t,a)),this.ts.set(t,a.add(n.key))}}]),e}(),Rk=function(){function e(){(0,a.Z)(this,e),this.es=new Lp(Ok.ns),this.ss=new Lp(Ok.rs)}return(0,o.Z)(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Ok(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new Ok(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new Zd(new xd([])),r=new Ok(n,e),i=new Ok(n,e+1),a=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),a.push(e.key)})),a}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new Zd(new xd([])),n=new Ok(t,e),r=new Ok(t,e+1),i=Ty();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Ok(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Ok=function(){function e(t,n){(0,a.Z)(this,e),this.key=t,this.ds=n}return(0,o.Z)(e,null,[{key:"ns",value:function(e,t){return Zd.comparator(e.key,t.key)||yd(e.ds,t.ds)}},{key:"rs",value:function(e,t){return yd(e.ds,t.ds)||Zd.comparator(e.key,t.key)}}]),e}(),Pk=function(){function e(t,n){(0,a.Z)(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new Lp(Ok.ns)}return(0,o.Z)(e,[{key:"checkEmpty",value:function(e){return Ud.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new fm(i,t,n,r);this.mutationQueue.push(a);var o,s=(0,u.Z)(r);try{for(s.s();!(o=s.n()).done;){var c=o.value;this._s=this._s.add(new Ok(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast())}}catch(l){s.e(l)}finally{s.f()}return Ud.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ud.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return Ud.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ud.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Ud.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Ok(t,0),i=new Ok(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);a.push(t)})),Ud.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Lp(yd);return t.forEach((function(e){var t=new Ok(e,0),i=new Ok(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),Ud.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Zd.isDocumentKey(i)||(i=i.child(""));var a=new Ok(new Zd(i),0),o=new Lp(yd);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),a),Ud.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;td(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return Ud.forEach(t.mutations,(function(i){var a=new Ok(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Ok(t,0),r=this._s.firstAfterOrEqual(n);return Ud.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ud.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Lk=function(){function e(t){(0,a.Z)(this,e),this.Ts=t,this.docs=new Rp(Zd.comparator),this.size=0}return(0,o.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ud.resolve(n?n.document.mutableCopy():bv.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ky();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():bv.newInvalidDocument(e))})),Ud.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=ky(),a=t.path,o=new Zd(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Od(Dd(l),n)<=0||(r.has(l.key)||dy(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Ud.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ed()}},{key:"Es",value:function(e,t){return Ud.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Mk(this)}},{key:"getSize",value:function(e){return Ud.resolve(this.size)}}]),e}(),Mk=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this)).Jn=e,r}return(0,o.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),Ud.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(bk),Fk=function(){function e(t){(0,a.Z)(this,e),this.persistence=t,this.As=new my((function(e){return Wv(e)}),Hv),this.lastRemoteSnapshotVersion=bd.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Rk,this.targetCount=0,this.bs=ck.vn()}return(0,o.Z)(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),Ud.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ud.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ud.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),Ud.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),Ud.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new ck(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,Ud.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),Ud.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,Ud.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.As.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.As.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ud.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ud.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return Ud.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),Ud.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ud.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),Ud.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return Ud.resolve(n)}},{key:"containsKey",value:function(e,t){return Ud.resolve(this.vs.containsKey(t))}}]),e}(),Uk=function(){function e(t,n){var r=this;(0,a.Z)(this,e),this.Ps={},this.overlays={},this.Vs=new Yd(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new Fk(this),this.indexManager=new Kg,this.remoteDocumentCache=new Lk((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new sg(n),this.xs=new Ak(this.serializer)}return(0,o.Z)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Dk,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new Pk(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;$h("MemoryPersistence","Starting transaction:",e);var i=new Vk(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return Ud.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Vk=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return(0,o.Z)(n)}(Ld),jk=function(){function e(t){(0,a.Z)(this,e),this.persistence=t,this.$s=new Rk,this.Ms=null}return(0,o.Z)(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw ed()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),Ud.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),Ud.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),Ud.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ud.forEach(this.Bs,(function(r){var i=Zd.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,bd.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return Ud.or([function(){return Ud.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}(),zk=function(){function e(t){(0,a.Z)(this,e),this.serializer=t}return(0,o.Z)(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new Vd("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ap,{unique:!0}),e.createObjectStore("documentMutations")}(e),Bk(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Ud.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Bk(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ap,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Ud.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Us(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Ks(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Gs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Qs(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:bp});t.createIndex("collectionPathOverlayIndex",wp,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",xp,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:cp});t.createIndex("documentKeyIndex",lp),t.createIndex("collectionGroupIndex",fp)}(e)})).next((function(){return i.zs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:yp}).createIndex("sequenceNumberIndex",mp,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:gp}).createIndex("documentKeyIndex",kp,{unique:!1})}(e)}))),o}},{key:"Us",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=rk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Ud.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Ud.forEach(r,(function(r){td(r.userId===n.userId);var i=dg(t.serializer,r);return nk(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Ks",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new xd(n),o=function(e){return[0,tp(e)]}(a);r.push(t.get(o).next((function(n){return n?Ud.resolve():function(n){return t.put({targetId:0,path:tp(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Ud.waitFor(r)}))}))}},{key:"Gs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:vp});var n=t.store("collectionParents"),r=new Gg,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:tp(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new xd(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=(0,s.Z)(e,3),r=(n[0],n[1]),a=(n[2],ip(r));return i(a.popLast())}))}))}},{key:"Qs",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=pg(r),a=vg(t.serializer,i);return n.put(a)}))}},{key:"zs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Zd(xd.fromString(i.document.name).popFirst(5)):i.noDocument?Zd.fromSegments(i.noDocument.path):i.unknownDocument?Zd.fromSegments(i.unknownDocument.path):ed()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Ud.waitFor(r)}))}},{key:"js",value:function(e,t){var n=this,r=t.store("mutations"),i=xk(this.serializer),a=new Uk(jk.Fs,this.serializer.se);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Ty();dg(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Ud.forEach(r,(function(e,r){var o=new Gh(r),u=_g.ie(n.serializer,o),s=a.getIndexManager(o),c=ik.ie(o,n.serializer,s,a.referenceDelegate);return new Nk(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Tp(t,Yd.ct),e).next()}))}))}}]),e}();function Bk(e){e.createObjectStore("targetDocuments",{keyPath:dp}).createIndex("documentTargetsIndex",pp,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hp,{unique:!0}),e.createObjectStore("targetGlobal")}var qk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Kk=function(){function e(t,n,r,i,o,u,s,c,l,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if((0,a.Z)(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ws=o,this.window=u,this.document=s,this.Hs=l,this.Js=f,this.Ys=h,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=function(e){return Promise.resolve()},!e.D())throw new id(rd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gk(this,i),this.si=n+"main",this.serializer=new sg(c),this.ii=new jd(this.si,this.Ys,new zk(this.serializer)),this.Ds=new lk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xk(this.serializer),this.xs=new bg,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===f&&Yh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return(0,o.Z)(e,[{key:"start",value:function(){var e=this;return this.oi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new id(rd.FAILED_PRECONDITION,qk);return e.ui(),e.ci(),e.ai(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ds.getHighestSequenceNumber(t)}))})).then((function(t){e.Vs=new Yd(t,e.Hs)})).then((function(){e.Ss=!0})).catch((function(t){return e.ii&&e.ii.close(),Promise.reject(t)}))}},{key:"hi",value:function(e){var t=this;return this.ni=function(){var n=(0,q.Z)((0,z.Z)().mark((function n(r){return(0,z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ii.B(function(){var t=(0,q.Z)((0,z.Z)().mark((function t(n){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.oi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"oi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Wk(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.li(t).next((function(t){t||(e.isPrimary=!1,e.Ws.enqueueRetryable((function(){return e.ni(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.di(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(qd(t))return $h("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return $h("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ws.enqueueRetryable((function(){return e.ni(t)})),e.isPrimary=t}))}},{key:"li",value:function(e){var t=this;return Gk(e).get("owner").next((function(e){return Ud.resolve(t._i(e))}))}},{key:"mi",value:function(e){return Wk(e).delete(this.clientId)}},{key:"gi",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n,r,i,a=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.yi(this.ei,18e5)){e.next=6;break}return this.ei=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Cp(e,"clientMetadata");return t.j().next((function(e){var n=a.pi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Ud.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ri){n=(0,u.Z)(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ri.removeItem(this.Ii(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ai",value:function(){var e=this;this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.oi().then((function(){return e.gi()})).then((function(){return e.ai()}))}))}},{key:"_i",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.Js?Ud.resolve(!0):Gk(e).get("owner").next((function(n){if(null!==n&&t.yi(n.leaseTimestampMs,5e3)&&!t.Ti(n.ownerId)){if(t._i(n)&&t.networkEnabled)return!0;if(!t._i(n)){if(!n.allowTabSynchronization)throw new id(rd.FAILED_PRECONDITION,qk);return!1}}return!(!t.networkEnabled||!t.inForeground)||Wk(e).j().next((function(e){return void 0===t.pi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&$h("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ss=!1,this.Ei(),this.ti&&(this.ti.cancel(),this.ti=null),this.Ai(),this.Ri(),e.next=7,this.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Tp(e,Yd.ct);return t.di(n).next((function(){return t.mi(n)}))}));case 7:this.ii.close(),this.vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(e,t){var n=this;return e.filter((function(e){return n.yi(e.updateTimeMs,t)&&!n.Ti(e.clientId)}))}},{key:"bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Wk(t).j().next((function(t){return e.pi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ss}},{key:"getMutationQueue",value:function(e,t){return ik.ie(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Hg(e,this.serializer.se.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return _g.ie(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;$h("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Ys)?Ep:14===i?Sp:13===i?Zp:12===i?Ip:11===i?_p:void ed();return this.ii.runTransaction(e,o,u,(function(i){return a=new Tp(i,r.Vs?r.Vs.next():Yd.ct),"readwrite-primary"===t?r.li(a).next((function(e){return!!e||r.fi(a)})).next((function(t){if(!t)throw Yh("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ws.enqueueRetryable((function(){return r.ni(!1)})),new id(rd.FAILED_PRECONDITION,Pd);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Pi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Pi",value:function(e){var t=this;return Gk(e).get("owner").next((function(e){if(null!==e&&t.yi(e.leaseTimestampMs,5e3)&&!t.Ti(e.ownerId)&&!t._i(e)&&!(t.Js||t.allowTabSynchronization&&e.allowTabSynchronization))throw new id(rd.FAILED_PRECONDITION,qk)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gk(e).put("owner",t)}},{key:"di",value:function(e){var t=this,n=Gk(e);return n.get("owner").next((function(e){return t._i(e)?($h("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ud.resolve()}))}},{key:"yi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Yh("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ui",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=function(){e.Ws.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.oi()}))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ai",value:function(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}},{key:"ci",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ei();var e=/(?:Version|Mobile)\/1[456]/;!I()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ws.enterRestrictedMode(!0),t.Ws.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"Ri",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ti",value:function(e){var t;try{var n=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return $h("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Yh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ei",value:function(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(ec){Yh("Failed to set zombie client id.",ec)}}},{key:"vi",value:function(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch(ec){}}},{key:"Ii",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return jd.D()}}]),e}();function Gk(e){return Cp(e,"owner")}function Wk(e){return Cp(e,"clientMetadata")}function Hk(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Qk=function(){function e(t,n,r,i){(0,a.Z)(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=i}return(0,o.Z)(e,null,[{key:"Di",value:function(t,n){var r,i=Ty(),a=Ty(),o=(0,u.Z)(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(c){o.e(c)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),$k=function(){function e(){(0,a.Z)(this,e),this.Ci=!1}return(0,o.Z)(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(a){return a||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(ny(t))return Ud.resolve(null);var r=uy(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=cy(t,null,"F"),r=uy(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Ty.apply(void 0,(0,B.Z)(i));return n.xi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,i);return n.Mi(t,o,a,r.readTime)?n.Ni(e,cy(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return ny(t)||r.isEqual(bd.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(a){var o=i.$i(t,a);return i.Mi(t,o,n,r)?i.Oi(e,t):(Qh()<=Q.DEBUG&&$h("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hy(t)),i.Fi(e,o,t,Ad(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new Lp(vy(e));return t.forEach((function(t,r){dy(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Qh()<=Q.DEBUG&&$h("QueryEngine","Using full collection scan to execute query:",hy(t)),this.xi.getDocumentsMatchingQuery(e,t,Rd.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Yk=function(){function e(t,n,r,i){(0,a.Z)(this,e),this.persistence=t,this.Bi=n,this.serializer=i,this.Li=new Rp(yd),this.qi=new my((function(e){return Wv(e)}),Hv),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return(0,o.Z)(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nk(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function Jk(e,t,n,r){return new Yk(e,t,n,r)}function Xk(e,t){return eb.apply(this,arguments)}function eb(){return eb=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Ty(),c=(0,u.Z)(t);try{for(c.s();!(i=c.n()).done;){var l=i.value;a.push(l.batchId);var f,h=(0,u.Z)(l.mutations);try{for(h.s();!(f=h.n()).done;){var d=f.value;s=s.add(d.key)}}catch(b){h.e(b)}finally{h.f()}}}catch(b){c.e(b)}finally{c.f()}var p,v=(0,u.Z)(n);try{for(v.s();!(p=v.n()).done;){var y=p.value;o.push(y.batchId);var m,g=(0,u.Z)(y.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;s=s.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){v.e(b)}finally{v.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Qi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),eb.apply(this,arguments)}function tb(e,t){var n=nd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ud.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);td(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Ty(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function nb(e){var t=nd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function rb(e,t){var n=nd(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ds.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ds.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(jp.EMPTY_BYTE_STRING,bd.min()).withLastLimboFreeSnapshotVersion(bd.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ds.updateTargetData(e,c))}}));var u=ky(),s=Ty();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(ib(e,a,t.documentUpdates).next((function(e){u=e.zi,s=e.ji}))),!r.isEqual(bd.min())){var c=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Ud.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Li=i,e}))}function ib(e,t,n){var r=Ty(),i=Ty();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=ky();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(bd.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):$h("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{zi:r,ji:i}}))}function ab(e,t){var n=nd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function ob(e,t){var n=nd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,Ud.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new ug(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function ub(e,t,n){return sb.apply(this,arguments)}function sb(){return sb=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=nd(t),a=i.Li.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),qd(e.t1)){e.next=12;break}throw e.t1;case 12:$h("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Li=i.Li.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),sb.apply(this,arguments)}function cb(e,t,n){var r=nd(e),i=bd.min(),a=Ty();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=nd(e),i=r.qi.get(n);return void 0!==i?Ud.resolve(r.Li.get(i)):r.Ds.getTargetData(t,n)}(r,e,uy(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:bd.min(),n?a:Ty())})).next((function(e){return hb(r,py(t),e),{documents:e,Wi:a}}))}))}function lb(e,t){var n=nd(e),r=nd(n.Ds),i=n.Li.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function fb(e,t){var n=nd(e),r=n.Ui.get(t)||bd.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ki.getAllFromCollectionGroup(e,t,Ad(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return hb(n,t,e),e}))}function hb(e,t,n){var r=e.Ui.get(t)||bd.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}function db(e,t,n,r){return pb.apply(this,arguments)}function pb(){return pb=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i){var a,o,s,c,l,f,h,d,p,v;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=nd(t),o=Ty(),s=ky(),c=(0,u.Z)(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Hi(f.metadata.name),f.document&&(o=o.add(h)),(d=n.Ji(f)).setReadTime(n.Yi(f.metadata.readTime)),s=s.insert(h,d)}catch(y){c.e(y)}finally{c.f()}return p=a.Ki.newChangeBuffer({trackRemovals:!0}),e.next=7,ob(a,function(e){return uy(ty(xd.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return ib(e,p,s).next((function(t){return p.apply(e),t})).next((function(t){return a.Ds.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Ds.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.zi,t.ji)})).next((function(){return t.zi}))}))})));case 9:case"end":return e.stop()}}),e)}))),pb.apply(this,arguments)}function vb(e,t){return yb.apply(this,arguments)}function yb(){return yb=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Ty(),e.next=3,ob(t,uy(yg(n.bundledQuery)));case 3:return i=e.sent,a=nd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Pm(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.xs.saveNamedQuery(e,n);var o=i.withResumeToken(jp.EMPTY_BYTE_STRING,t);return a.Li=a.Li.insert(o.targetId,o),a.Ds.updateTargetData(e,o).next((function(){return a.Ds.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ds.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.xs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),yb.apply(this,arguments)}function mb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function gb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function kb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var bb=function(){function e(t,n,r,i){(0,a.Z)(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return(0,o.Z)(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new id(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Yh("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),wb=function(){function e(t,n,r){(0,a.Z)(this,e),this.targetId=t,this.state=n,this.error=r}return(0,o.Z)(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new id(i.error.code,i.error.message))),a?new e(t,i.state,r):(Yh("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),xb=function(){function e(t,n){(0,a.Z)(this,e),this.clientId=t,this.activeTargetIds=n}return(0,o.Z)(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ny(),o=0;i&&o<r.activeTargetIds.length;++o)i=ep(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Yh("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),_b=function(){function e(t,n){(0,a.Z)(this,e),this.clientId=t,this.onlineState=n}return(0,o.Z)(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Yh("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Ib=function(){function e(){(0,a.Z)(this,e),this.activeTargetIds=Ny()}return(0,o.Z)(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Zb=function(){function e(t,n,r,i,o){(0,a.Z)(this,e),this.window=t,this.Ws=n,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Rp(yd),this.started=!1,this.ur=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.cr=mb(this.persistenceKey,this.nr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.rr=this.rr.insert(this.nr,new Ib),this.hr=new RegExp("^firestore_clients_".concat(u,"_([^_]*)$")),this.lr=new RegExp("^firestore_mutations_".concat(u,"_(\\d+)(?:_(.*))?$")),this.dr=new RegExp("^firestore_targets_".concat(u,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}return(0,o.Z)(e,[{key:"start",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n,r,i,a,o,s,c,l,f,h,d=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.bi();case 2:t=e.sent,n=(0,u.Z)(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.nr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(mb(this.persistenceKey,i)))&&(o=xb.Zi(i,a))&&(this.rr=this.rr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.mr(),(s=this.storage.getItem(this.wr))&&(c=this.gr(s))&&this.yr(c),l=(0,u.Z)(this.ur);try{for(l.s();!(f=l.n()).done;)h=f.value,this.ir(h)}catch(p){l.e(p)}finally{l.f()}this.ur=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.pr(this.rr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.rr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ir(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ir(e,t,n),this.Tr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(kb(this.persistenceKey,e));if(n){var r=wb.Zi(e,n);r&&(t=r.state)}}return this.Er.tr(e),this.mr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Er.er(e),this.mr()}},{key:"isLocalQueryTarget",value:function(e){return this.Er.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(kb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Ar(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Tr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Rr(e)}},{key:"notifyBundleLoaded",value:function(e){this.vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return $h("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){$h("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){$h("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ir",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if($h("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void Yh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,q.Z)((0,z.Z)().mark((function e(){var r,i,a,o,u,s,c;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.hr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.br(n.key),e.abrupt("return",t.Pr(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Pr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.lr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Sr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Dr(a));case 16:e.next=41;break;case 18:if(!t.dr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Nr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.gr(n.newValue))){e.next=30;break}return e.abrupt("return",t.yr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=Yd.ct;if(null!=e)try{var n=JSON.parse(e);td("number"==typeof n),t=n}catch(e){Yh("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Yd.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.kr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.ur.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Er",get:function(){return this.rr.get(this.nr)}},{key:"mr",value:function(){this.setItem(this.cr,this.Er.Xi())}},{key:"Ir",value:function(e,t,n){var r=new bb(this.currentUser,e,t,n),i=gb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Tr",value:function(e){var t=gb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Rr",value:function(e){var t={clientId:this.nr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Ar",value:function(e,t,n){var r=kb(this.persistenceKey,e),i=new wb(e,t,n);this.setItem(r,i.Xi())}},{key:"vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"br",value:function(e){var t=this.hr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.br(e);return xb.Zi(n,t)}},{key:"Sr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return bb.Zi(new Gh(i),r,t)}},{key:"Cr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]);return wb.Zi(r,t)}},{key:"gr",value:function(e){return _b.Zi(e)}},{key:"kr",value:function(e){return JSON.parse(e)}},{key:"Dr",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:$h("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Nr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"Pr",value:function(e,t){var n=this,r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),a=this.pr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.rr=r}))}},{key:"yr",value:function(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"pr",value:function(e){var t=Ny();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Sb=function(){function e(){(0,a.Z)(this,e),this.Br=new Ib,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,o.Z)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new Ib,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Eb=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Tb=function(){function e(){var t=this;(0,a.Z)(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return(0,o.Z)(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){$h("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=(0,u.Z)(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Qr",value:function(){$h("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=(0,u.Z)(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Cb=null;function Nb(){return null===Cb?Cb=268435456+Math.round(2147483648*Math.random()):Cb++,"0x"+Cb.toString(16)}var Ab={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Db=function(){function e(t){(0,a.Z)(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return(0,o.Z)(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),Rb="WebChannelConnection",Ob=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return(0,o.Z)(n,[{key:"lo",value:function(e,t,n,r){var i=Nb();return new Promise((function(a,o){var u=new qh;u.setWithCredentials(!0),u.listenOnce(Uh.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Fh.NO_ERROR:var t=u.getResponseJson();$h(Rb,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Fh.TIMEOUT:$h(Rb,"RPC '".concat(e,"' ").concat(i," timed out")),o(new id(rd.DEADLINE_EXCEEDED,"Request time out"));break;case Fh.HTTP_ERROR:var n=u.getStatus();if($h(Rb,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(rd).indexOf(t)>=0?t:rd.UNKNOWN}(s.status);o(new id(c,s.message))}else o(new id(rd.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new id(rd.UNAVAILABLE,"Connection failed."));break;default:ed()}}finally{$h(Rb,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);$h(Rb,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=Nb(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Lh(),o=Mh(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new zh({})),this.ho(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");$h(Rb,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new Db({Wr:function(t){f?$h(Rb,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||($h(Rb,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),$h(Rb,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Hr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Bh.EventType.OPEN,(function(){f||$h(Rb,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Bh.EventType.CLOSE,(function(){f||(f=!0,$h(Rb,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.so())})),d(c,Bh.EventType.ERROR,(function(t){f||(f=!0,Jh(Rb,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.so(new id(rd.UNAVAILABLE,"The operation could not be completed")))})),d(c,Bh.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];td(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){$h(Rb,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=um[e];if(void 0!==t)return ym(t)}(u),l=o.message;void 0===s&&(s=rd.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.so(new id(s,l)),c.close()}else $h(Rb,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.io(i)}})),d(o,Vh.STAT_EVENT,(function(t){t.stat===jh.PROXY?$h(Rb,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===jh.NOPROXY&&$h(Rb,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.no()}),0),h}}]),n}(function(){function e(t){(0,a.Z)(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,o.Z)(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var a=Nb(),o=this.ao(e,t);$h("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.ho(u,r,i),this.lo(e,o,u,n).then((function(t){return $h("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Jh("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=Ab[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function Pb(){return"undefined"!=typeof window?window:null}function Lb(){return"undefined"!=typeof document?document:null}function Mb(e){return new Am(e,!0)}var Fb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;(0,a.Z)(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=i,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return(0,o.Z)(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&$h("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),Ub=function(){function e(t,n,r,i,o,u,s,c){(0,a.Z)(this,e),this.Ws=t,this.bo=r,this.Po=i,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Fb(t,n)}return(0,o.Z)(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===rd.RESOURCE_EXHAUSTED?(Yh(n.toString()),Yh("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===rd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,s.Z)(t,2),i=r[0],a=r[1];e.Vo===n&&e.Ko(i,a)}),(function(n){t((function(){var t=new id(rd.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao((0,q.Z)((0,z.Z)().mark((function t(){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return $h("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():($h("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Vb=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,o,u,s){var c;return(0,a.Z)(this,n),(c=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,o,s)).serializer=u,c}return(0,o.Z)(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ed()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(td(void 0===t||"string"==typeof t),jp.fromBase64String(t||"")):(td(void 0===t||t instanceof Uint8Array),jp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?rd.UNKNOWN:ym(e.code);return new id(t,e.message||"")}(o);n=new _m(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Um(e,s.document.name),l=Pm(s.document.updateTime),f=s.document.createTime?Pm(s.document.createTime):bd.min(),h=new gv({mapValue:{fields:s.document.fields}}),d=bv.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new wm(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Um(e,y.document),g=y.readTime?Pm(y.readTime):bd.min(),k=bv.newNoDocument(m,g),b=y.removedTargetIds||[];n=new wm([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=Um(e,w.document),_=w.removedTargetIds||[];n=new wm([],_,x,null)}else{if(!("filter"in t))return ed();t.filter;var I=t.filter;I.targetId;var Z=I.count||0,S=new pm(Z),E=I.targetId;n=new xm(E,S)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return bd.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?bd.min():t.readTime?Pm(t.readTime):bd.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=zm(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=Qv(r)?{documents:Qm(e,r)}:{query:$m(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Rm(e,t.resumeToken):t.snapshotVersion.compareTo(bd.min())>0&&(n.readTime=Dm(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ed()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=zm(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(Ub),jb=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,o,u,s){var c;return(0,a.Z)(this,n),(c=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,o,s)).serializer=u,c.Ho=!1,c}return(0,o.Z)(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,wt((0,bt.Z)(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(td(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(td(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Pm(e.updateTime):Pm(t);return n.isEqual(bd.min())&&(n=Pm(t)),new Wy(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Pm(e.commitTime);return this.listener.Zo(n,t)}return td(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=zm(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Wm(t.serializer,e)}))};this.Fo(n)}}]),n}(Ub),zb=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,o){var u;return(0,a.Z)(this,n),(u=t.call(this)).authCredentials=e,u.appCheckCredentials=r,u.connection=i,u.serializer=o,u.eu=!1,u}return(0,o.Z)(n,[{key:"nu",value:function(){if(this.eu)throw new id(rd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=(0,s.Z)(i,2),o=a[0],u=a[1];return r.connection.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===rd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new id(rd.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=(0,s.Z)(a,2),u=o[0],c=o[1];return i.connection.fo(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===rd.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new id(rd.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return(0,o.Z)((function e(){(0,a.Z)(this,e)}))}());var Bb=function(){function e(t,n){(0,a.Z)(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return(0,o.Z)(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(Yh(t),this.ru=!1):$h("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),qb=(0,o.Z)((function e(t,n,r,i,o){var u=this;(0,a.Z)(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=o,this._u.qr((function(e){r.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=tw(u),!e.t0){e.next=5;break}return $h("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=nd(t)).du.add(4),e.next=4,Wb(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,Kb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new Bb(r,i)}));function Kb(e){return Gb.apply(this,arguments)}function Gb(){return Gb=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!tw(t)){e.next=18;break}n=(0,u.Z)(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Gb.apply(this,arguments)}function Wb(e){return Hb.apply(this,arguments)}function Hb(){return Hb=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,u.Z)(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Hb.apply(this,arguments)}function Qb(e,t){var n=nd(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),ew(n)?Xb(n):Nw(n).No()&&Yb(n,t))}function $b(e,t){var n=nd(e),r=Nw(n);n.fu.delete(t),r.No()&&Jb(n,t),0===n.fu.size&&(r.No()?r.$o():tw(n)&&n.mu.set("Unknown"))}function Yb(e,t){e.gu.Ot(t.targetId),Nw(e).jo(t)}function Jb(e,t){e.gu.Ot(t),Nw(e).Wo(t)}function Xb(e){e.gu=new Zm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),Nw(e).start(),e.mu.ou()}function ew(e){return tw(e)&&!Nw(e).xo()&&e.fu.size>0}function tw(e){return 0===nd(e).du.size}function nw(e){e.gu=void 0}function rw(e){return iw.apply(this,arguments)}function iw(){return iw=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){Yb(t,e)}));case 1:case"end":return e.stop()}}),e)}))),iw.apply(this,arguments)}function aw(e,t){return ow.apply(this,arguments)}function ow(){return ow=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nw(t),ew(t)?(t.mu.au(n),Xb(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),ow.apply(this,arguments)}function uw(e,t,n){return sw.apply(this,arguments)}function sw(){return sw=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof _m&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=(0,u.Z)(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.fu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.fu.delete(o),t.gu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),$h("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,cw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof wm?t.gu.Kt(n):n instanceof xm?t.gu.Jt(n):t.gu.zt(n),r.isEqual(bd.min())){e.next=29;break}return e.prev=14,e.next=17,nb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(jp.EMPTY_BYTE_STRING,n.snapshotVersion)),Jb(e,t);var r=new ug(n.target,t,1,n.sequenceNumber);Yb(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),$h("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,cw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),sw.apply(this,arguments)}function cw(e,t,n){return lw.apply(this,arguments)}function lw(){return lw=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qd(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,Wb(t);case 5:t.mu.set("Offline"),r||(r=function(){return nb(t.localStore)}),t.asyncQueue.enqueueRetryable((0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $h("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,Kb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),lw.apply(this,arguments)}function fw(e,t){return t().catch((function(n){return cw(e,n,t)}))}function hw(e){return dw.apply(this,arguments)}function dw(){return dw=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nd(t),r=Aw(n),i=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!pw(n)){e.next=19;break}return e.prev=3,e.next=6,ab(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,vw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,cw(n,e.t0);case 17:e.next=2;break;case 19:yw(n)&&mw(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),dw.apply(this,arguments)}function pw(e){return tw(e)&&e.lu.length<10}function vw(e,t){e.lu.push(t);var n=Aw(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function yw(e){return tw(e)&&!Aw(e).xo()&&e.lu.length>0}function mw(e){Aw(e).start()}function gw(e){return kw.apply(this,arguments)}function kw(){return kw=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Aw(t).tu();case 1:case"end":return e.stop()}}),e)}))),kw.apply(this,arguments)}function bw(e){return ww.apply(this,arguments)}function ww(){return ww=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r,i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Aw(t),r=(0,u.Z)(t.lu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Yo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}function xw(e,t,n){return _w.apply(this,arguments)}function _w(){return _w=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.lu.shift(),a=hm.from(i,n,r),e.next=3,fw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,hw(t);case 5:case"end":return e.stop()}}),e)}))),_w.apply(this,arguments)}function Iw(e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=(0,q.Z)((0,z.Z)().mark((function e(t,n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Aw(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!vm(i=n.code)||i===rd.ABORTED){e.next=7;break}return r=t.lu.shift(),Aw(t).Oo(),e.next=5,fw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,hw(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:yw(t)&&mw(t);case 5:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function Sw(e,t){return Ew.apply(this,arguments)}function Ew(){return Ew=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=nd(t)).asyncQueue.verifyOperationInProgress(),$h("RemoteStore","RemoteStore received new credentials"),i=tw(r),r.du.add(3),e.next=6,Wb(r);case 6:return i&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,Kb(r);case 12:case"end":return e.stop()}}),e)}))),Ew.apply(this,arguments)}function Tw(e,t){return Cw.apply(this,arguments)}function Cw(){return Cw=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nd(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,Kb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,Wb(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Nw(e){return e.yu||(e.yu=function(e,t,n){var r=nd(e);return r.nu(),new Vb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:rw.bind(null,e),Zr:aw.bind(null,e),zo:uw.bind(null,e)}),e.wu.push(function(){var t=(0,q.Z)((0,z.Z)().mark((function t(n){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),ew(e)?Xb(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:nw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function Aw(e){return e.pu||(e.pu=function(e,t,n){var r=nd(e);return r.nu(),new jb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:gw.bind(null,e),Zr:Iw.bind(null,e),Xo:bw.bind(null,e),Zo:xw.bind(null,e)}),e.wu.push(function(){var t=(0,q.Z)((0,z.Z)().mark((function t(n){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,hw(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&($h("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var Dw=function(){function e(t,n,r,i,o){(0,a.Z)(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ad,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return(0,o.Z)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new id(rd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Rw(e,t){if(Yh("AsyncQueue","".concat(t,": ").concat(e)),qd(e))return new id(rd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Ow=function(){function e(t){(0,a.Z)(this,e),this.comparator=t?function(e,n){return t(e,n)||Zd.comparator(e.key,n.key)}:function(e,t){return Zd.comparator(e.key,t.key)},this.keyedMap=wy(),this.sortedSet=new Rp(this.comparator)}return(0,o.Z)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Pw=function(){function e(){(0,a.Z)(this,e),this.Iu=new Rp(Zd.comparator)}return(0,o.Z)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):ed():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Lw=function(){function e(t,n,r,i,o,u,s,c,l){(0,a.Z)(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=s,this.excludesMetadataChanges=c,this.hasCachedResults=l}return(0,o.Z)(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ly(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Ow.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Mw=(0,o.Z)((function e(){(0,a.Z)(this,e),this.Eu=void 0,this.listeners=[]})),Fw=(0,o.Z)((function e(){(0,a.Z)(this,e),this.queries=new my((function(e){return fy(e)}),ly),this.onlineState="Unknown",this.Au=new Set}));function Uw(e,t){return Vw.apply(this,arguments)}function Vw(){return Vw=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o,u;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Mw),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Rw(e.t0,"Initialization of query '".concat(hy(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Ru(r.onlineState),o.Eu&&n.vu(o.Eu)&&Kw(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Vw.apply(this,arguments)}function jw(e,t){return zw.apply(this,arguments)}function zw(){return zw=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o,u;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),zw.apply(this,arguments)}function Bw(e,t){var n,r=nd(e),i=!1,a=(0,u.Z)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,c=r.queries.get(s);if(c){var l,f=(0,u.Z)(c.listeners);try{for(f.s();!(l=f.n()).done;){l.value.vu(o)&&(i=!0)}}catch(h){f.e(h)}finally{f.f()}c.Eu=o}}}catch(h){a.e(h)}finally{a.f()}i&&Kw(r)}function qw(e,t,n){var r=nd(e),i=r.queries.get(t);if(i){var a,o=(0,u.Z)(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Kw(e){e.Au.forEach((function(e){e.next()}))}var Gw=function(){function e(t,n,r){(0,a.Z)(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return(0,o.Z)(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=(0,u.Z)(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Lw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),a=!0):this.Du(e,this.onlineState)&&(this.Cu(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=Lw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}(),Ww=function(){function e(t,n){(0,a.Z)(this,e),this.Nu=t,this.byteLength=n}return(0,o.Z)(e,[{key:"ku",value:function(){return"metadata"in this.Nu}}]),e}(),Hw=function(){function e(t){(0,a.Z)(this,e),this.serializer=t}return(0,o.Z)(e,[{key:"Hi",value:function(e){return Um(this.serializer,e)}},{key:"Ji",value:function(e){return e.metadata.exists?Km(this.serializer,e.document,!1):bv.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}},{key:"Yi",value:function(e){return Pm(e)}}]),e}(),Qw=function(){function e(t,n,r){(0,a.Z)(this,e),this.Ou=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$w(t)}return(0,o.Z)(e,[{key:"$u",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;var n=xd.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new Hw(this.serializer),i=(0,u.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Hi(a.metadata.name),c=(0,u.Z)(a.metadata.queries);try{for(c.s();!(o=c.n()).done;){var l=o.value,f=(n.get(l)||Ty()).add(s);n.set(l,f)}}catch(h){c.e(h)}finally{c.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n,r,i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,db(this.localStore,new Hw(this.serializer),this.documents,this.Ou.id);case 2:t=e.sent,n=this.Mu(this.documents),r=(0,u.Z)(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,vb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Fu:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function $w(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Yw=(0,o.Z)((function e(t){(0,a.Z)(this,e),this.key=t})),Jw=(0,o.Z)((function e(t){(0,a.Z)(this,e),this.key=t})),Xw=function(){function e(t,n){(0,a.Z)(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Ty(),this.mutatedKeys=Ty(),this.Ku=vy(t),this.Gu=new Ow(this.Ku)}return(0,o.Z)(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new Pw,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=dy(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Wu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ku(f,s)>0||c&&n.Ku(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,ju:r,Mi:u,mutatedKeys:a}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.ju.Tu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ed()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],u=0===this.Uu.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new Lw(this.query,e.Gu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Pw,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=Ty(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new Jw(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new Yw(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=Ty();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return Lw.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),ex=(0,o.Z)((function e(t,n,r){(0,a.Z)(this,e),this.query=t,this.targetId=n,this.view=r})),tx=(0,o.Z)((function e(t){(0,a.Z)(this,e),this.key=t,this.ec=!1})),nx=function(){function e(t,n,r,i,o,u){(0,a.Z)(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.nc={},this.sc=new my((function(e){return fy(e)}),ly),this.ic=new Map,this.rc=new Set,this.oc=new Rp(Zd.comparator),this.uc=new Map,this.cc=new Rk,this.ac={},this.hc=new Map,this.lc=ck.bn(),this.onlineState="Unknown",this.fc=void 0}return(0,o.Z)(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function rx(e,t){return ix.apply(this,arguments)}function ix(){return ix=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o,u,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$x(t),!(o=r.sc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.tc(),e.next=15;break;case 6:return e.next=8,ob(r.localStore,uy(n));case 8:return u=e.sent,r.isPrimaryClient&&Qb(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,ax(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}function ax(e,t,n,r,i){return ox.apply(this,arguments)}function ox(){return ox=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i){var a,o,u;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.zu(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,cb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Sx(t,n.targetId,u.Yu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,cb(t.localStore,n,!0);case 3:return o=e.sent,u=new Xw(n,o.Wi),s=u.zu(o.documents),c=bm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Sx(t,r,l.Yu),f=new ex(n,r,u),e.abrupt("return",(t.sc.set(n,f),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),ox.apply(this,arguments)}function ux(e,t){return sx.apply(this,arguments)}function sx(){return sx=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nd(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!ly(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,ub(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),$b(r.remoteStore,i.targetId),Ix(r,i.targetId)})).catch(Md);case 9:e.next=14;break;case 11:return Ix(r,i.targetId),e.next=14,ub(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),sx.apply(this,arguments)}function cx(e,t,n){return lx.apply(this,arguments)}function lx(){return lx=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yx(t),e.prev=1,e.next=4,function(e,t){var n,r,i=nd(e),a=kd.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Ty());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=ky(),c=Ty();return i.Ki.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(c=c.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],c=(0,u.Z)(t);try{for(c.s();!(o=c.n()).done;){var l=o.value,f=em(l,n.get(l.key).overlayedDocument);null!=f&&s.push(new rm(l.key,f,kv(f.value.mapValue),Hy.exists(!0)))}}catch(h){c.e(h)}finally{c.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,c);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:xy(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new Rp(yd)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Cx(i,a.changes);case 9:return e.next=11,hw(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Rw(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),lx.apply(this,arguments)}function fx(e,t){return hx.apply(this,arguments)}function hx(){return hx=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),e.prev=1,e.next=4,rb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(td(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?td(n.ec):e.removedDocuments.size>0&&(td(n.ec),n.ec=!1))})),e.next=8,Cx(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Md(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),hx.apply(this,arguments)}function dx(e,t,n){var r=nd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=nd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=(0,u.Z)(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ru(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Kw(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function px(e,t,n){return vx.apply(this,arguments)}function vx(){return vx=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o,u,s,c;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=nd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Rp(Zd.comparator)).insert(o,bv.newNoDocument(o,bd.min())),s=Ty().add(o),c=new km(bd.min(),new Map,new Lp(yd),u,s),e.next=9,fx(i,c);case 9:i.oc=i.oc.remove(o),i.uc.delete(n),Tx(i),e.next=16;break;case 14:return e.next=16,ub(i.localStore,n,!1).then((function(){return Ix(i,n,r)})).catch(Md);case 16:case"end":return e.stop()}}),e)}))),vx.apply(this,arguments)}function yx(e,t){return mx.apply(this,arguments)}function mx(){return mx=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),i=n.batch.batchId,e.prev=1,e.next=4,tb(r.localStore,n);case 4:return a=e.sent,_x(r,i,null),xx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Cx(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Md(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),mx.apply(this,arguments)}function gx(e,t,n){return kx.apply(this,arguments)}function kx(){return kx=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nd(t),e.prev=1,e.next=4,function(e,t){var n=nd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return td(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,_x(i,n,r),xx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Cx(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Md(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),kx.apply(this,arguments)}function bx(e,t){return wx.apply(this,arguments)}function wx(){return wx=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tw((r=nd(t)).remoteStore)||$h("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=nd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.hc.get(i)||[]).push(n),r.hc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Rw(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),wx.apply(this,arguments)}function xx(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function _x(e,t,n){var r=nd(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function Ix(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=(0,u.Z)(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||Zx(e,t)}))}function Zx(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&($b(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),Tx(e))}function Sx(e,t,n){var r,i=(0,u.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Yw?(e.cc.addReference(a.key,t),Ex(e,a)):a instanceof Jw?($h("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||Zx(e,a.key)):ed()}}catch(o){i.e(o)}finally{i.f()}}function Ex(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||($h("SyncEngine","New document in limbo: "+n),e.rc.add(r),Tx(e))}function Tx(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new Zd(xd.fromString(t)),r=e.lc.next();e.uc.set(r,new tx(n)),e.oc=e.oc.insert(n,r),Qb(e.remoteStore,new ug(uy(ty(n.path)),r,2,Yd.ct))}}function Cx(e,t,n){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=nd(t),a=[],o=[],s=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){s.push(i.dc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Qk.Di(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.nc.zo(a),e.next=9,function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o,s,c,l,f;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ud.forEach(n,(function(t){return Ud.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ud.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),qd(e.t0)){e.next=10;break}throw e.t0;case 10:$h("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=(0,u.Z)(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(c=r.Li.get(s),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),r.Li=r.Li.insert(s,f))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=nd(t)).currentUser.isEqual(n)){e.next=11;break}return $h("SyncEngine","User change. New user:",n.toKey()),e.next=5,Xk(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new id(rd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Cx(r,i.Qi);case 11:case"end":return e.stop()}}),e)}))),Dx.apply(this,arguments)}function Rx(e,t){var n=nd(e),r=n.uc.get(t);if(r&&r.ec)return Ty().add(r.key);var i=Ty(),a=n.ic.get(t);if(!a)return i;var o,s=(0,u.Z)(a);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=n.sc.get(c);i=i.unionWith(l.view.Qu)}}catch(f){s.e(f)}finally{s.f()}return i}function Ox(e,t){return Px.apply(this,arguments)}function Px(){return Px=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),e.next=3,cb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Xu(i),e.abrupt("return",(r.isPrimaryClient&&Sx(r,n.targetId,a.Yu),a));case 6:case"end":return e.stop()}}),e)}))),Px.apply(this,arguments)}function Lx(e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),e.abrupt("return",fb(r.localStore,n).then((function(e){return Cx(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function Fx(e,t,n,r){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i){var a,o;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nd(t),e.next=3,function(e,t){var n=nd(e),r=nd(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.In(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Ud.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,hw(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(_x(a,n,i||null),xx(a,n),function(e,t){nd(nd(e).mutationQueue).En(t)}(a.localStore,n)):ed();case 11:return e.next=13,Cx(a,o);case 13:e.next=16;break;case 15:$h("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Ux.apply(this,arguments)}function Vx(e,t){return jx.apply(this,arguments)}function jx(){return jx=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o,s,c,l,f;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($x(r=nd(t)),Yx(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,zx(r,i.toArray());case 5:return a=e.sent,r.fc=!0,e.next=9,Tw(r.remoteStore,!0);case 9:o=(0,u.Z)(a);try{for(o.s();!(s=o.n()).done;)c=s.value,Qb(r.remoteStore,c)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return l=[],f=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then((function(){return Ix(r,t),ub(r.localStore,t,!0)})),$b(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,zx(r,l);case 21:return function(e){var t=nd(e);t.uc.forEach((function(e,n){$b(t.remoteStore,n)})),t.cc.ls(),t.uc=new Map,t.oc=new Rp(Zd.comparator)}(r),r.fc=!1,e.next=25,Tw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}function zx(e,t,n){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o,s,c,l,f,h,d,p,v,y,m,g;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=nd(t),a=[],o=[],s=(0,u.Z)(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(h=i.ic.get(l))||0===h.length){e.next=34;break}return e.next=11,ob(i.localStore,uy(h[0]));case 11:f=e.sent,d=(0,u.Z)(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,y=i.sc.get(v),e.next=20,Ox(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,lb(i.localStore,l);case 36:return g=e.sent,e.next=39,ob(i.localStore,g);case 39:return f=e.sent,e.next=42,ax(i,qx(g),l,!1,f.resumeToken);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Bx.apply(this,arguments)}function qx(e){return ey(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Kx(e){var t=nd(e);return nd(nd(t.localStore).persistence).bi()}function Gx(e,t,n,r){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,q.Z)((0,z.Z)().mark((function e(t,n,r,i){var a,o,u,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=nd(t)).fc){e.next=3;break}return e.abrupt("return",void $h("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,fb(a.localStore,py(o[0]));case 10:return u=e.sent,s=km.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,jp.EMPTY_BYTE_STRING),e.next=14,Cx(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,ub(a.localStore,n,!0);case 17:return Ix(a,n,i),e.abrupt("break",20);case 19:ed();case 20:case"end":return e.stop()}}),e)}))),Wx.apply(this,arguments)}function Hx(e,t,n){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o,s,c,l,f,h,d;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=$x(t)).fc){e.next=45;break}a=(0,u.Z)(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ic.has(s)){e.next=10;break}return $h("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,lb(i.localStore,s);case 12:return c=e.sent,e.next=15,ob(i.localStore,c);case 15:return l=e.sent,e.next=18,ax(i,qx(c),l.targetId,!1,l.resumeToken);case 18:Qb(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=(0,u.Z)(r),e.prev=30,d=(0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,ub(i.localStore,t,!1).then((function(){$b(i.remoteStore,t),Ix(i,t)})).catch(Md);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Qx.apply(this,arguments)}function $x(e){var t=nd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=px.bind(null,t),t.nc.zo=Bw.bind(null,t.eventManager),t.nc.wc=qw.bind(null,t.eventManager),t}function Yx(e){var t=nd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=yx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gx.bind(null,t),t}function Jx(e,t,n){var r=nd(e);(function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o,u,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=nd(e),r=Pm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.xs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress($w(i)),a=new Qw(i,t.localStore,n.serializer),e.next=15,n._c();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.$u(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n._c();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Cx(t,s.Bu,void 0);case 31:return e.next=33,function(e,t){var n=nd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.xs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Fu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Jh("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Xx=function(){function e(){(0,a.Z)(this,e),this.synchronizeTabs=!1}return(0,o.Z)(e,[{key:"initialize",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Mb(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Jk(this.persistence,new $k,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Uk(jk.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Sb}},{key:"terminate",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),e_=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var o;return(0,a.Z)(this,n),(o=t.call(this)).mc=e,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return(0,o.Z)(n,[{key:"initialize",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var r=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt((0,bt.Z)(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.mc.initialize(this,t);case 4:return e.next=6,Yx(this.mc.syncEngine);case 6:return e.next=8,hw(this.mc.remoteStore);case 8:return e.next=10,this.persistence.hi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Jk(this.persistence,new $k,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new yk(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new $d(t,this.persistence);return new Qd(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Hk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?tk.withCacheSize(this.cacheSizeBytes):tk.DEFAULT;return new Kk(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Pb(),Lb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Sb}}]),n}(Xx),t_=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,e,r,!1)).mc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return(0,o.Z)(n,[{key:"initialize",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var r,i=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt((0,bt.Z)(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.mc.syncEngine,e.t0=this.sharedClientState instanceof Zb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:Fx.bind(null,r),Mr:Gx.bind(null,r),Fr:Hx.bind(null,r),bi:Kx.bind(null,r),Or:Lx.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.hi(function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vx(i.mc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Pb();if(!Zb.D(t))throw new id(rd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Hk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(e_),n_=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"initialize",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return dx(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ax.bind(null,this.syncEngine),e.next=12,Tw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Fw}},{key:"createDatastore",value:function(e){var t,n=Mb(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Ob(t));return function(e,t,n,r){return new zb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return dx(o.syncEngine,e,0)},a=Tb.D()?new Tb:new Eb,new qb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new nx(e,t,n,r,i,a);return o&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nd(t),$h("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,Wb(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function r_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return(0,q.Z)((0,z.Z)().mark((function r(){var i;return(0,z.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var i_=function(){function e(t){(0,a.Z)(this,e),this.observer=t,this.muted=!1}return(0,o.Z)(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):Yh("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),a_=function(){function e(t,n){var r=this;(0,a.Z)(this,e),this.Ic=t,this.serializer=n,this.metadata=new ad,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then((function(e){e&&e.ku()?r.metadata.resolve(e.Nu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Nu))))}),(function(e){return r.metadata.reject(e)}))}return(0,o.Z)(e,[{key:"close",value:function(){return this.Ic.cancel()}},{key:"getMetadata",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_c",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ec());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ec",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n,r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ac();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Tc.decode(t),r=Number(n),isNaN(r)&&this.Rc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new Ww(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ac",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.bc()<0)){e.next=7;break}return e.next=3,this.Pc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.bc())<0&&this.Rc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Pc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Rc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Tc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Rc",value:function(e){throw this.Ic.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Pc",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ic.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),o_=function(){function e(t){(0,a.Z)(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return(0,o.Z)(e,[{key:"lookup",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new id(rd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a,o,u,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),i=zm(r.serializer)+"/documents",a={documents:n.map((function(e){return Fm(r.serializer,e)}))},e.next=5,r.fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Gm(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());td(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new cm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t,n=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Zd.fromPath(t);n.mutations.push(new lm(r,n.precondition(r)))})),e.next=7,function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),i=zm(r.serializer)+"/documents",a={writes:n.map((function(e){return Wm(r.serializer,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ed();t=bd.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new id(rd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bd.min())?Hy.exists(!1):Hy.updateTime(t):Hy.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bd.min()))throw new id(rd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hy.updateTime(t)}return Hy.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),u_=function(){function e(t,n,r,i,o){(0,a.Z)(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Vc=r.maxAttempts,this.Co=new Fb(this.asyncQueue,"transaction_retry")}return(0,o.Z)(e,[{key:"run",value:function(){this.Vc-=1,this.Sc()}},{key:"Sc",value:function(){var e=this;this.Co.Ao((0,q.Z)((0,z.Z)().mark((function t(){var n,r;return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new o_(e.datastore),(r=e.Dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Cc(t)}))}))})).catch((function(t){e.Cc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Dc",value:function(e){try{var t=this.updateFunction(e);return!Jd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Cc",value:function(e){var t=this;this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!vm(t)}return!1}}]),e}(),s_=function(){function e(t,n,r,i){var o=this;(0,a.Z)(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Gh.UNAUTHENTICATED,this.clientId=vd.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $h("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return $h("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return(0,o.Z)(e,[{key:"getConfiguration",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new id(rd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ad;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,q.Z)((0,z.Z)().mark((function n(){var r;return(0,z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Rw(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function c_(e,t){return l_.apply(this,arguments)}function l_(){return l_=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),$h("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Xk(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(e,t){return h_.apply(this,arguments)}function h_(){return h_=(0,q.Z)((0,z.Z)().mark((function e(t,n){var r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,p_(t);case 3:return r=e.sent,$h("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Sw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Sw(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),h_.apply(this,arguments)}function d_(e){return"FirebaseError"===e.name?e.code===rd.FAILED_PRECONDITION||e.code===rd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function p_(e){return v_.apply(this,arguments)}function v_(){return v_=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return $h("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,c_(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),d_(n=e.t0)){e.next=13;break}throw n;case 13:return Jh("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,c_(t,new Xx);case 16:e.next=21;break;case 18:return $h("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,c_(t,new Xx);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),v_.apply(this,arguments)}function y_(e){return m_.apply(this,arguments)}function m_(){return m_=(0,q.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return $h("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,f_(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return $h("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,f_(t,new n_);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}function g_(e){return p_(e).then((function(e){return e.persistence}))}function k_(e){return p_(e).then((function(e){return e.localStore}))}function b_(e){return y_(e).then((function(e){return e.remoteStore}))}function w_(e){return y_(e).then((function(e){return e.syncEngine}))}function x_(e){return y_(e).then((function(e){return e.datastore}))}function __(e){return I_.apply(this,arguments)}function I_(){return I_=(0,q.Z)((0,z.Z)().mark((function e(t){var n,r;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=rx.bind(null,n.syncEngine),r.onUnlisten=ux.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}function Z_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ad;return e.asyncQueue.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function i(){return(0,z.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new i_({next:function(a){t.enqueueAndForget((function(){return jw(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new id(rd.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new id(rd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Gw(ty(n.path),a,{includeMetadataChanges:!0,xu:!0});return Uw(e,o)},i.next=3,__(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function S_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ad;return e.asyncQueue.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function i(){return(0,z.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new i_({next:function(n){t.enqueueAndForget((function(){return jw(e,o)})),n.fromCache&&"server"===r.source?i.reject(new id(rd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Gw(n,a,{includeMetadataChanges:!0,xu:!0});return Uw(e,o)},i.next=3,__(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var E_=new Map;function T_(e,t,n){if(!n)throw new id(rd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function C_(e,t,n,r){if(!0===t&&!0===r)throw new id(rd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function N_(e){if(!Zd.isDocumentKey(e))throw new id(rd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function A_(e){if(Zd.isDocumentKey(e))throw new id(rd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function D_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ed()}function R_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new id(rd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=D_(e);throw new id(rd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function O_(e,t){if(t<=0)throw new id(rd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var P_=function(){function e(t){var n;if((0,a.Z)(this,e),void 0===t.host){if(void 0!==t.ssl)throw new id(rd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new id(rd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,C_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return(0,o.Z)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),L_=function(){function e(t,n,r,i){(0,a.Z)(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P_({}),this._settingsFrozen=!1}return(0,o.Z)(e,[{key:"app",get:function(){if(!this._app)throw new id(rd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new id(rd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ud;switch(e.type){case"firstParty":return new fd(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new id(rd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=E_.get(e);t&&($h("ComponentProvider","Removing Datastore"),E_.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function M_(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=R_(e,L_))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Jh("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Gh.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[y(JSON.stringify({alg:"none",type:"JWT"})),y(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new id(rd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Gh(s)}e._authCredentials=new sd(new od(o,u))}}var F_=function(){function e(t,n,r){(0,a.Z)(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return(0,o.Z)(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new V_(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),U_=function(){function e(t,n,r){(0,a.Z)(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return(0,o.Z)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),V_=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var o;return(0,a.Z)(this,n),(o=t.call(this,e,r,ty(i)))._path=i,o.type="collection",o}return(0,o.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new F_(this.firestore,null,new Zd(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(U_);function j_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=j(e),T_("collection","path",t),e instanceof L_){var a=xd.fromString.apply(xd,[t].concat(r));return A_(a),new V_(e,null,a)}if(!(e instanceof F_||e instanceof V_))throw new id(rd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(xd.fromString.apply(xd,[t].concat(r)));return A_(o),new V_(e.firestore,null,o)}function z_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=j(e),1===arguments.length&&(t=vd.A()),T_("doc","path",t),e instanceof L_){var a=xd.fromString.apply(xd,[t].concat(r));return N_(a),new F_(e,null,new Zd(a))}if(!(e instanceof F_||e instanceof V_))throw new id(rd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(xd.fromString.apply(xd,[t].concat(r)));return N_(o),new F_(e.firestore,e instanceof V_?e.converter:null,new Zd(o))}function B_(e,t){return e=j(e),t=j(t),(e instanceof F_||e instanceof V_)&&(t instanceof F_||t instanceof V_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function q_(e,t){return e=j(e),t=j(t),e instanceof U_&&t instanceof U_&&e.firestore===t.firestore&&ly(e._query,t._query)&&e.converter===t.converter}var K_=function(){function e(){var t=this;(0,a.Z)(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Fb(this,"async_queue_retry"),this.qc=function(){var e=Lb();e&&$h("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=Lb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return(0,o.Z)(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=Lb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new ad;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t=this;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),qd(e.t0)){e.next=12;break}throw e.t0;case 12:$h("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Yh("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=Dw.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&ed()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=(0,q.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=(0,u.Z)(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=(0,u.Z)(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function G_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=(0,u.Z)(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var W_=function(){function e(){(0,a.Z)(this,e),this._progressObserver={},this._taskCompletionResolver=new ad,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return(0,o.Z)(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),H_=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,o){var u;return(0,a.Z)(this,n),(u=t.call(this,e,r,i,o)).type="firestore",u._queue=new K_,u._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]",u}return(0,o.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||$_(this),this._firestoreClient.terminate()}}]),n}(L_);function Q_(e){return e._firestoreClient||$_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function $_(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Qp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new s_(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Y_(e,t,n){var r=new ad;return e.asyncQueue.enqueue((0,q.Z)((0,z.Z)().mark((function i(){var a;return(0,z.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,c_(e,n);case 3:return i.next=5,f_(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),d_(a=i.t0)){i.next=13;break}throw a;case 13:Jh("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function J_(e){return function(e){return e.asyncQueue.enqueue((0,q.Z)((0,z.Z)().mark((function t(){var n,r;return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g_(e);case 2:return n=t.sent,t.next=5,b_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=nd(e);return t.du.delete(0),Kb(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Q_(e=R_(e,H_)))}function X_(e){return function(e){return e.asyncQueue.enqueue((0,q.Z)((0,z.Z)().mark((function t(){var n,r;return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g_(e);case 2:return n=t.sent,t.next=5,b_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=nd(t)).du.add(0),e.next=4,Wb(n);case 4:n.mu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Q_(e=R_(e,H_)))}function eI(e,t){var n=Q_(e=R_(e,H_)),r=new W_;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new a_(e,t)}(function(e,t){if(e instanceof Uint8Array)return r_(e,t);if(e instanceof ArrayBuffer)return r_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Mb(t));e.asyncQueue.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function t(){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Jx,t.next=3,w_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function tI(e,t){return function(e,t){return e.asyncQueue.enqueue((0,q.Z)((0,z.Z)().mark((function n(){return(0,z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=nd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.xs.getNamedQuery(e,t)}))},n.next=3,k_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Q_(e=R_(e,H_)),t).then((function(t){return t?new U_(e,null,t.query):null}))}function nI(e){if(e._initialized||e._terminated)throw new id(rd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var rI=function(){function e(t){(0,a.Z)(this,e),this._byteString=t}return(0,o.Z)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(jp.fromBase64String(t))}catch(t){throw new id(rd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(jp.fromUint8Array(t))}}]),e}(),iI=function(){function e(){(0,a.Z)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new id(rd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Id(n)}return(0,o.Z)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var aI=(0,o.Z)((function e(t){(0,a.Z)(this,e),this._methodName=t})),oI=function(){function e(t,n){if((0,a.Z)(this,e),!isFinite(t)||t<-90||t>90)throw new id(rd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new id(rd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return(0,o.Z)(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return yd(this._lat,e._lat)||yd(this._long,e._long)}}]),e}(),uI=/^__.*__$/,sI=function(){function e(t,n,r){(0,a.Z)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,o.Z)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new rm(e,this.data,this.fieldMask,t,this.fieldTransforms):new nm(e,this.data,t,this.fieldTransforms)}}]),e}(),cI=function(){function e(t,n,r){(0,a.Z)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,o.Z)(e,[{key:"toMutation",value:function(e,t){return new rm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function lI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ed()}}var fI=function(){function e(t,n,r,i,o,u){(0,a.Z)(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Jc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}return(0,o.Z)(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return AI(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(lI(this.Yc)&&uI.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),hI=function(){function e(t,n,r){(0,a.Z)(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Mb(t)}return(0,o.Z)(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fI({Yc:e,methodName:t,oa:n,path:Id.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function dI(e){var t=e._freezeSettings(),n=Mb(e._databaseId);return new hI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function pI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(a.merge||a.mergeFields?2:0,t,n,i);EI("Data must be an object, but it was:",o,r);var s,c,l=ZI(r,o);if(a.merge)s=new Up(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){var f,h=[],d=(0,u.Z)(a.mergeFields);try{for(d.s();!(f=d.n()).done;){var p=TI(t,f.value,n);if(!o.contains(p))throw new id(rd.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));DI(h,p)||h.push(p)}}catch(v){d.e(v)}finally{d.f()}s=new Up(h),c=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,c=o.fieldTransforms;return new sI(new gv(l),s,c)}var vI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(aI);function yI(e,t,n){return new fI({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var mI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"_toFieldTransform",value:function(e){return new Gy(e.path,new Fy)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(aI),gI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).ca=r,i}return(0,o.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=yI(this,e,!0),n=this.ca.map((function(e){return II(e,t)})),r=new Uy(n);return new Gy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(aI),kI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).ca=r,i}return(0,o.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=yI(this,e,!0),n=this.ca.map((function(e){return II(e,t)})),r=new jy(n);return new Gy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(aI),bI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).aa=r,i}return(0,o.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=new By(e.serializer,Ry(e.serializer,this.aa));return new Gy(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(aI);function wI(e,t,n,r){var i=e.ua(1,t,n);EI("Data must be an object, but it was:",i,r);var a=[],o=gv.empty();Ap(r,(function(e,r){var u=NI(t,e,n);r=j(r);var s=i.na(u);if(r instanceof vI)a.push(u);else{var c=II(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Up(a);return new cI(o,u,i.fieldTransforms)}function xI(e,t,n,r,i,a){var o=e.ua(1,t,n),u=[TI(t,r,n)],s=[i];if(a.length%2!=0)throw new id(rd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(TI(t,a[c])),s.push(a[c+1]);for(var l=[],f=gv.empty(),h=u.length-1;h>=0;--h)if(!DI(l,u[h])){var d=u[h],p=s[h];p=j(p);var v=o.na(d);if(p instanceof vI)l.push(d);else{var y=II(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Up(l);return new cI(f,m,o.fieldTransforms)}function _I(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return II(n,e.ua(r?4:3,t))}function II(e,t){if(SI(e=j(e)))return EI("Unsupported field value:",t,e),ZI(e,t);if(e instanceof aI)return function(e,t){if(!lI(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=(0,u.Z)(e);try{for(a.s();!(n=a.n()).done;){var o=II(n.value,t.sa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=j(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ry(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=kd.fromDate(e);return{timestampValue:Dm(t.serializer,n)}}if(e instanceof kd){var r=new kd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Dm(t.serializer,r)}}if(e instanceof oI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof rI)return{bytesValue:Rm(t.serializer,e._byteString)};if(e instanceof F_){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ia("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Lm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(D_(e)))}(e,t)}function ZI(e,t){var n={};return Dp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ap(e,(function(e,r){var i=II(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function SI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof kd||e instanceof oI||e instanceof rI||e instanceof F_||e instanceof aI)}function EI(e,t,n){if(!SI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=D_(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function TI(e,t,n){if((t=j(t))instanceof iI)return t._internalPath;if("string"==typeof t)return NI(e,t);throw AI("Field path arguments must be of type string or ",e,!1,void 0,n)}var CI=new RegExp("[~\\*/\\[\\]]");function NI(e,t,n){if(t.search(CI)>=0)throw AI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return(0,Vs.Z)(iI,(0,B.Z)(t.split(".")))._internalPath}catch(r){throw AI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function AI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new id(rd.INVALID_ARGUMENT,u+e+s)}function DI(e,t){return e.some((function(e){return e.isEqual(t)}))}var RI=function(){function e(t,n,r,i,o){(0,a.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return(0,o.Z)(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new F_(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new OI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(PI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),OI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"data",value:function(){return wt((0,bt.Z)(n.prototype),"data",this).call(this)}}]),n}(RI);function PI(e,t){return"string"==typeof t?NI(e,t):t instanceof iI?t._internalPath:t._delegate._internalPath}function LI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new id(rd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var MI=(0,o.Z)((function e(){(0,a.Z)(this,e)})),FI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(MI);function UI(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof MI&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof jI})).length,n=e.filter((function(e){return e instanceof VI})).length;if(t>1||t>0&&n>0)throw new id(rd.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=(0,u.Z)(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(c){s.e(c)}finally{s.f()}return e}var VI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var o;return(0,a.Z)(this,n),(o=t.call(this))._field=e,o._op=r,o._value=i,o.type="where",o}return(0,o.Z)(n,[{key:"_apply",value:function(e){var t=this._parse(e);return XI(e._query,t),new U_(e.firestore,e.converter,sy(e._query,t))}},{key:"_parse",value:function(e){var t=dI(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new id(rd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){JI(o,a);var c,l=[],f=(0,u.Z)(o);try{for(f.s();!(c=f.n()).done;){var h=c.value;l.push(YI(r,e,h))}}catch(d){f.e(d)}finally{f.f()}s={arrayValue:{values:l}}}else s=YI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||JI(o,a),s=_I(n,"where",o,"in"===a||"not-in"===a);return Ev.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(FI);var jI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return(0,o.Z)(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Tv.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=t.getFlattenedFilters(),a=(0,u.Z)(i);try{for(a.s();!(n=a.n()).done;){var o=n.value;XI(r,o),r=sy(r,o)}}catch(s){a.e(s)}finally{a.f()}}(e._query,t),new U_(e.firestore,e.converter,sy(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(MI);var zI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return(0,o.Z)(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new id(rd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new id(rd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Iv(t,n);return function(e,t){if(null===ry(e)){var n=iy(e);null!==n&&eZ(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new U_(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Xv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(FI);var BI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var o;return(0,a.Z)(this,n),(o=t.call(this)).type=e,o._limit=r,o._limitType=i,o}return(0,o.Z)(n,[{key:"_apply",value:function(e){return new U_(e.firestore,e.converter,cy(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(FI);var qI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var o;return(0,a.Z)(this,n),(o=t.call(this)).type=e,o._docOrFields=r,o._inclusive=i,o}return(0,o.Z)(n,[{key:"_apply",value:function(e){var t=$I(e,this.type,this._docOrFields,this._inclusive);return new U_(e.firestore,e.converter,function(e,t){return new Xv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(FI);function KI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return qI._create("startAt",t,!0)}function GI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return qI._create("startAfter",t,!1)}var WI=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var o;return(0,a.Z)(this,n),(o=t.call(this)).type=e,o._docOrFields=r,o._inclusive=i,o}return(0,o.Z)(n,[{key:"_apply",value:function(e){var t=$I(e,this.type,this._docOrFields,this._inclusive);return new U_(e.firestore,e.converter,function(e,t){return new Xv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(FI);function HI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return WI._create("endBefore",t,!1)}function QI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return WI._create("endAt",t,!0)}function $I(e,t,n,r){if(n[0]=j(n[0]),n[0]instanceof RI)return function(e,t,n,r,i){if(!r)throw new id(rd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=(0,u.Z)(oy(e));try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c.field.isKeyField())o.push(ov(t,r.key));else{var l=r.data.field(c.field);if(Gp(l))throw new id(rd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var f=c.field.canonicalString();throw new id(rd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(f,"' (used as the orderBy) does not exist."))}o.push(l)}}}catch(h){s.e(h)}finally{s.f()}return new wv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=dI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new id(rd.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new id(rd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!ay(e)&&-1!==c.indexOf("/"))throw new id(rd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(xd.fromString(c));if(!Zd.isDocumentKey(l))throw new id(rd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Zd(l);u.push(ov(t,f))}else{var h=_I(n,r,c);u.push(h)}}return new wv(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function YI(e,t,n){if("string"==typeof(n=j(n))){if(""===n)throw new id(rd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ay(t)&&-1!==n.indexOf("/"))throw new id(rd.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(xd.fromString(n));if(!Zd.isDocumentKey(r))throw new id(rd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ov(e,new Zd(r))}if(n instanceof F_)return ov(e,n._key);throw new id(rd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(D_(n),"."))}function JI(e,t){if(!Array.isArray(e)||0===e.length)throw new id(rd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function XI(e,t){if(t.isInequality()){var n=iy(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new id(rd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=ry(e);null!==i&&eZ(e,r,i)}var a=function(e,t){var n,r=(0,u.Z)(e);try{for(r.s();!(n=r.n()).done;){var i,a=n.value,o=(0,u.Z)(a.getFlattenedFilters());try{for(o.s();!(i=o.n()).done;){var s=i.value;if(t.indexOf(s.op)>=0)return s.op}}catch(c){o.e(c)}finally{o.f()}}}catch(c){r.e(c)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new id(rd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new id(rd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function eZ(e,t,n){if(!n.isEqual(t))throw new id(rd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var tZ=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Xp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ed()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Ap(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new oI(qp(e.latitude),qp(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Wp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Hp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Bp(e);return new kd(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=xd.fromString(e);td(og(n));var r=new $p(n.get(1),n.get(3)),i=new Zd(n.popFirst(5));return r.isEqual(t)||Yh("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function nZ(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var rZ=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this)).firestore=e,r}return(0,o.Z)(n,[{key:"convertBytes",value:function(e){return new rI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new F_(this.firestore,null,t)}}]),n}(tZ);var iZ=function(){function e(t,n){(0,a.Z)(this,e),this.hasPendingWrites=t,this.fromCache=n}return(0,o.Z)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),aZ=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,o,u,s){var c;return(0,a.Z)(this,n),(c=t.call(this,e,r,i,o,s))._firestore=e,c._firestoreImpl=e,c.metadata=u,c}return(0,o.Z)(n,[{key:"exists",value:function(){return wt((0,bt.Z)(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new oZ(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(PI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(RI),oZ=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return wt((0,bt.Z)(n.prototype),"data",this).call(this,e)}}]),n}(aZ),uZ=function(){function e(t,n,r,i){(0,a.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new iZ(i.hasPendingWrites,i.fromCache),this.query=r}return(0,o.Z)(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new oZ(n._firestore,n._userDataWriter,r.key,r,new iZ(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new id(rd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new oZ(e._firestore,e._userDataWriter,t.doc.key,t.doc,new iZ(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new oZ(e._firestore,e._userDataWriter,t.doc.key,t.doc,new iZ(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:sZ(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function sZ(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ed()}}function cZ(e,t){return e instanceof aZ&&t instanceof aZ?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof uZ&&t instanceof uZ&&e._firestore===t._firestore&&q_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var lZ=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this)).firestore=e,r}return(0,o.Z)(n,[{key:"convertBytes",value:function(e){return new rI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new F_(this.firestore,null,t)}}]),n}(tZ);function fZ(e){e=R_(e,F_);var t=R_(e.firestore,H_),n=Q_(t),r=new lZ(t);return function(e,t){var n=new ad;return e.asyncQueue.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function r(){return(0,z.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=nd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new id(rd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Rw(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,k_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new aZ(t,r,e._key,n,new iZ(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function hZ(e){e=R_(e,U_);var t=R_(e.firestore,H_),n=Q_(t),r=new lZ(t);return function(e,t){var n=new ad;return e.asyncQueue.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function r(){return(0,z.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t,n,r){var i,a,o,u,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cb(t,n,!0);case 3:i=e.sent,a=new Xw(n,i.Wi),o=a.zu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Rw(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,k_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new uZ(t,r,e,n)}))}function dZ(e,t,n){e=R_(e,F_);var r=R_(e.firestore,H_),i=nZ(e.converter,t,n);return mZ(r,[pI(dI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Hy.none())])}function pZ(e,t,n){e=R_(e,F_);for(var r=R_(e.firestore,H_),i=dI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return mZ(r,[("string"==typeof(t=j(t))||t instanceof iI?xI(i,"updateDoc",e._key,t,n,o):wI(i,"updateDoc",e._key,t)).toMutation(e._key,Hy.exists(!0))])}function vZ(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=j(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||G_(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(G_(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof F_)l=R_(e.firestore,H_),f=ty(e._key.path),c={next:function(t){n[s]&&n[s](gZ(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=R_(e,U_);l=R_(p.firestore,H_),f=p._query;var v=new lZ(l);c={next:function(e){n[s]&&n[s](new uZ(l,v,p,e))},error:n[s+1],complete:n[s+2]},LI(e._query)}return function(e,t,n,r){var i=new i_(r),a=new Gw(t,i,n);return e.asyncQueue.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function t(){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uw,t.next=3,__(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.yc(),e.asyncQueue.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function t(){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=jw,t.next=3,__(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Q_(l),f,h,c)}function yZ(e,t){return function(e,t){var n=new i_(t);return e.asyncQueue.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function t(){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){nd(e).Au.add(t),t.next()},t.next=3,__(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.yc(),e.asyncQueue.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function t(){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){nd(e).Au.delete(t)},t.next=3,__(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Q_(e=R_(e,H_)),G_(t)?t:{next:t})}function mZ(e,t){return function(e,t){var n=new ad;return e.asyncQueue.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function r(){return(0,z.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=cx,r.next=3,w_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Q_(e),t)}function gZ(e,t,n){var r=n.docs.get(t._key),i=new lZ(e);return new aZ(e,i,t._key,r,new iZ(n.hasPendingWrites,n.fromCache),t.converter)}var kZ={maxAttempts:5},bZ=function(){function e(t,n){(0,a.Z)(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=dI(t)}return(0,o.Z)(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=wZ(e,this._firestore),i=nZ(r.converter,t,n),a=pI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Hy.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=wZ(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=j(t))||t instanceof iI?xI(this._dataReader,"WriteBatch.update",i._key,t,n,o):wI(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Hy.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=wZ(e,this._firestore);return this._mutations=this._mutations.concat(new cm(t._key,Hy.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new id(rd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function wZ(e,t){if((e=j(e)).firestore!==t)throw new id(rd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var xZ=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,e,r))._firestore=e,i}return(0,o.Z)(n,[{key:"get",value:function(e){var t=this,r=wZ(e,this._firestore),i=new lZ(this._firestore);return wt((0,bt.Z)(n.prototype),"get",this).call(this,e).then((function(e){return new aZ(t._firestore,i,r._key,e._document,new iZ(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){(0,a.Z)(this,e),this._firestore=t,this._transaction=n,this._dataReader=dI(t)}return(0,o.Z)(e,[{key:"get",value:function(e){var t=this,n=wZ(e,this._firestore),r=new rZ(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ed();var i=e[0];if(i.isFoundDocument())return new RI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new RI(t._firestore,r,n._key,null,n.converter);throw ed()}))}},{key:"set",value:function(e,t,n){var r=wZ(e,this._firestore),i=nZ(r.converter,t,n),a=pI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=wZ(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=j(t))||t instanceof iI?xI(this._dataReader,"Transaction.update",i._key,t,n,o):wI(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=wZ(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function _Z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gI("arrayUnion",t)}function IZ(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new kI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Wh=e}(Ve),Re(new K("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new H_(new cd(e.getProvider("auth-internal")),new dd(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new id(rd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $p(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ge(Kh,"3.10.0",e),Ge(Kh,"3.10.0","esm2017")}();function ZZ(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new id("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function SZ(){if("undefined"===typeof Uint8Array)throw new id("unimplemented","Uint8Arrays are not available in this environment.")}function EZ(){if("undefined"==typeof atob)throw new id("unimplemented","Blobs are unavailable in Firestore in this environment.")}var TZ=function(){function e(t){(0,a.Z)(this,e),this._delegate=t}return(0,o.Z)(e,[{key:"toBase64",value:function(){return EZ(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return SZ(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return EZ(),new e(rI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return SZ(),new e(rI.fromUint8Array(t))}}]),e}();function CZ(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=(0,u.Z)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var NZ=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){nI(e=R_(e,H_));var n=Q_(e);if(n._uninitializedComponentsProvider)throw new id(rd.FAILED_PRECONDITION,"SDK cache is already specified.");Jh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new n_;return Y_(n,i,new e_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){nI(e=R_(e,H_));var t=Q_(e);if(t._uninitializedComponentsProvider)throw new id(rd.FAILED_PRECONDITION,"SDK cache is already specified.");Jh("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new n_;return Y_(t,r,new t_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new id(rd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ad;return e._queue.enqueueAndForgetEvenWhileRestricted((0,q.Z)((0,z.Z)().mark((function n(){return(0,z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=(0,q.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jd.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,jd.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Hk(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),AZ=function(){function e(t,n,r){var i=this;(0,a.Z)(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof $p||(this._appCompat=t)}return(0,o.Z)(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Jh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};M_(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return J_(this._delegate)}},{key:"disableNetwork",value:function(){return X_(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&C_("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new ad;return e.asyncQueue.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function n(){return(0,z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=bx,n.next=3,w_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Q_(e=R_(e,H_)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return yZ(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new id("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new KZ(this,j_(this._delegate,e))}catch(t){throw MZ(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new LZ(this,z_(this._delegate,e))}catch(t){throw MZ(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new zZ(this,function(e,t){if(e=R_(e,L_),T_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new id(rd.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new U_(e,null,function(e){return new Xv(xd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw MZ(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=R_(e,H_);var r=Object.assign(Object.assign({},kZ),n);return function(e){if(e.maxAttempts<1)throw new id(rd.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new ad;return e.asyncQueue.enqueueAndForget((0,q.Z)((0,z.Z)().mark((function i(){var a;return(0,z.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,x_(e);case 2:a=i.sent,new u_(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Q_(e),(function(n){return t(new xZ(e,n))}),r)}(this._delegate,(function(n){return e(new RZ(t,n))}))}},{key:"batch",value:function(){var e=this;return Q_(this._delegate),new OZ(new bZ(this._delegate,(function(t){return mZ(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return eI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return tI(this._delegate,e).then((function(e){return e?new zZ(t,e):null}))}}]),e}(),DZ=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this)).firestore=e,r}return(0,o.Z)(n,[{key:"convertBytes",value:function(e){return new TZ(new rI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return LZ.forKey(t,this.firestore,null)}}]),n}(tZ);var RZ=function(){function e(t,n){(0,a.Z)(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new DZ(t)}return(0,o.Z)(e,[{key:"get",value:function(e){var t=this,n=GZ(e);return this._delegate.get(n).then((function(e){return new VZ(t._firestore,new aZ(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=GZ(e);return n?(ZZ("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=GZ(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=GZ(e);return this._delegate.delete(t),this}}]),e}(),OZ=function(){function e(t){(0,a.Z)(this,e),this._delegate=t}return(0,o.Z)(e,[{key:"set",value:function(e,t,n){var r=GZ(e);return n?(ZZ("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=GZ(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=GZ(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),PZ=function(){function e(t,n,r){(0,a.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return(0,o.Z)(e,[{key:"fromFirestore",value:function(e,t){var n=new oZ(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jZ(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new DZ(t),n),i.set(n,a)),a}}]),e}();PZ.INSTANCES=new WeakMap;var LZ=function(){function e(t,n){(0,a.Z)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new DZ(t)}return(0,o.Z)(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new KZ(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new KZ(this.firestore,j_(this._delegate,e))}catch(t){throw MZ(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=j(e))instanceof F_&&B_(this._delegate,e)}},{key:"set",value:function(e,t){t=ZZ("DocumentReference.set",t);try{return t?dZ(this._delegate,e,t):dZ(this._delegate,e)}catch(n){throw MZ(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?pZ(this._delegate,e):pZ.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw MZ(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return mZ(R_(e.firestore,H_),[new cm(e._key,Hy.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=FZ(n),a=UZ(n,(function(t){return new VZ(e.firestore,new aZ(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return vZ(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?fZ(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=R_(e,F_);var t=R_(e.firestore,H_);return Z_(Q_(t),e._key,{source:"server"}).then((function(n){return gZ(t,e,n)}))}(this._delegate):function(e){e=R_(e,F_);var t=R_(e.firestore,H_);return Z_(Q_(t),e._key).then((function(n){return gZ(t,e,n)}))}(this._delegate),t.then((function(e){return new VZ(n.firestore,new aZ(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(PZ.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new id("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new F_(n._delegate,r,new Zd(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new F_(n._delegate,r,t))}}]),e}();function MZ(e,t,n){return e.message=e.message.replace(t,n),e}function FZ(e){var t,n=(0,u.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!CZ(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function UZ(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=CZ(e[0])?e[0]:CZ(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var VZ=function(){function e(t,n){(0,a.Z)(this,e),this._firestore=t,this._delegate=n}return(0,o.Z)(e,[{key:"ref",get:function(){return new LZ(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return cZ(this._delegate,e._delegate)}}]),e}(),jZ=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ed()}(void 0!==t),t}}]),n}(VZ),zZ=function(){function e(t,n){(0,a.Z)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new DZ(t)}return(0,o.Z)(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,UI(this._delegate,function(e,t,n){var r=t,i=PI("where",e);return VI._create(i,r,n)}(t,n,r)))}catch(i){throw MZ(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,UI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=PI("orderBy",e);return zI._create(n,t)}(t,n)))}catch(r){throw MZ(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,UI(this._delegate,function(e){return O_("limit",e),BI._create("limit",e,"F")}(t)))}catch(n){throw MZ(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,UI(this._delegate,function(e){return O_("limitToLast",e),BI._create("limitToLast",e,"L")}(t)))}catch(n){throw MZ(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,UI(this._delegate,KI.apply(void 0,arguments)))}catch(t){throw MZ(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,UI(this._delegate,GI.apply(void 0,arguments)))}catch(t){throw MZ(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,UI(this._delegate,HI.apply(void 0,arguments)))}catch(t){throw MZ(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,UI(this._delegate,QI.apply(void 0,arguments)))}catch(t){throw MZ(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return q_(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?hZ(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=R_(e,U_);var t=R_(e.firestore,H_),n=Q_(t),r=new lZ(t);return S_(n,e._query,{source:"server"}).then((function(n){return new uZ(t,r,e,n)}))}(this._delegate):function(e){e=R_(e,U_);var t=R_(e.firestore,H_),n=Q_(t),r=new lZ(t);return LI(e._query),S_(n,e._query).then((function(n){return new uZ(t,r,e,n)}))}(this._delegate),t.then((function(e){return new qZ(n.firestore,new uZ(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=FZ(n),a=UZ(n,(function(t){return new qZ(e.firestore,new uZ(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return vZ(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(PZ.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),BZ=function(){function e(t,n){(0,a.Z)(this,e),this._firestore=t,this._delegate=n}return(0,o.Z)(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new jZ(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),qZ=function(){function e(t,n){(0,a.Z)(this,e),this._firestore=t,this._delegate=n}return(0,o.Z)(e,[{key:"query",get:function(){return new zZ(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new jZ(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new BZ(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new jZ(n._firestore,r))}))}},{key:"isEqual",value:function(e){return cZ(this._delegate,e._delegate)}}]),e}(),KZ=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return(0,o.Z)(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new LZ(this.firestore,e):null}},{key:"doc",value:function(e){try{return new LZ(this.firestore,void 0===e?z_(this._delegate):z_(this._delegate,e))}catch(t){throw MZ(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=R_(e.firestore,H_),r=z_(e),i=nZ(e.converter,t);return mZ(n,[pI(dI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Hy.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new LZ(t.firestore,e)}))}},{key:"isEqual",value:function(e){return B_(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(PZ.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(zZ);function GZ(e){return R_(e,F_)}var WZ=function(){function e(){(0,a.Z)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=(0,Vs.Z)(iI,n)}return(0,o.Z)(e,[{key:"isEqual",value:function(e){return(e=j(e))instanceof iI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Id.keyField().canonicalString())}}]),e}(),HZ=function(){function e(t){(0,a.Z)(this,e),this._delegate=t}return(0,o.Z)(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new mI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new vI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=_Z.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=IZ.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new bI("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),QZ={Firestore:AZ,GeoPoint:oI,Timestamp:kd,Blob:TZ,Transaction:RZ,WriteBatch:OZ,DocumentReference:LZ,DocumentSnapshot:VZ,Query:zZ,QueryDocumentSnapshot:jZ,QuerySnapshot:qZ,CollectionReference:KZ,FieldPath:WZ,FieldValue:HZ,setLogLevel:function(e){!function(e){Hh.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new K("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},QZ)))}(e,(function(e,t){return new AZ(e,t,new NZ)})),e.registerVersion("@firebase/firestore-compat","0.3.6")}(gt);var $Z=gt.initializeApp({apiKey:"AIzaSyCIllSkmHS79L_-Hejb60CKZY9xLxMA2vg",authDomain:"clone-64750.firebaseapp.com",projectId:"clone-64750",storageBucket:"clone-64750.appspot.com",messagingSenderId:"1089572690602",appId:"1:1089572690602:web:d668d782ccc041b9e44ed3"}).firestore(),YZ=gt.auth()},8278:function(e,t,n){"use strict";n.d(t,{Ep:function(){return w},J0:function(){return m},RQ:function(){return z},WK:function(){return W},X3:function(){return G},Zn:function(){return F},Zq:function(){return V},aU:function(){return r},cP:function(){return x},fp:function(){return I},lX:function(){return y},pC:function(){return j}});var r,i=n(3144),a=n(5671),o=n(136),u=n(7277),s=n(8664),c=n(9439),l=n(4506),f=n(7762),h=n(3433);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));var p,v="popstate";function y(e){return void 0===e&&(e={}),_((function(e,t){var n=e.location;return b("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:w(t)}),null,e)}function m(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function g(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function k(e,t){return{usr:e.state,key:e.key,idx:t}}function b(e,t,n,r){return void 0===n&&(n=null),d({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?x(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function w(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function x(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function _(e,t,n,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,f=r.Pop,h=null,p=y();function y(){return(l.state||{idx:null}).idx}function g(){f=r.Pop;var e=y(),t=null==e?null:e-p;p=e,h&&h({action:f,location:_.location,delta:t})}function x(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:w(e);return m(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==p&&(p=0,l.replaceState(d({},l.state,{idx:p}),""));var _={get action(){return f},get location(){return e(u,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(v,g),h=e,function(){u.removeEventListener(v,g),h=null}},createHref:function(e){return t(u,e)},createURL:x,encodeLocation:function(e){var t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=r.Push;var i=b(_.location,e,t);n&&n(i,e);var a=k(i,p=y()+1),o=_.createHref(i);try{l.pushState(a,"",o)}catch(s){u.location.assign(o)}c&&h&&h({action:f,location:_.location,delta:1})},replace:function(e,t){f=r.Replace;var i=b(_.location,e,t);n&&n(i,e);var a=k(i,p=y()),o=_.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:_.location,delta:0})},go:function(e){return l.go(e)}};return _}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function I(e,t,n){void 0===n&&(n="/");var r=F(("string"===typeof t?x(t):t).pathname||"/",n);if(null==r)return null;var i=Z(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=P(i[o],M(r));return a}function Z(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(m(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=z([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(m(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),Z(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:O(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=(0,f.Z)(S(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function S(e){var t=e.split("/");if(0===t.length)return[];var n=(0,l.Z)(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=S(i.join("/")),s=[];return s.push.apply(s,(0,h.Z)(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,(0,h.Z)(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var E=/^:\w+$/,T=3,C=2,N=1,A=10,D=-2,R=function(e){return"*"===e};function O(e,t){var n=e.split("/"),r=n.length;return n.some(R)&&(r+=D),t&&(r+=C),n.filter((function(e){return!R(e)})).reduce((function(e,t){return e+(E.test(t)?T:""===t?N:A)}),r)}function P(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=L({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:z([i,l.pathname]),pathnameBase:B(z([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=z([i,l.pathnameBase]))}return a}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);g("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=(0,c.Z)(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return g(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function M(e){try{return decodeURI(e)}catch(t){return g(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function F(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function U(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function V(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function j(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=x(e):(m(!(i=d({},e)).pathname||!i.pathname.includes("?"),U("?","pathname","search",i)),m(!i.pathname||!i.pathname.includes("#"),U("#","pathname","hash",i)),m(!i.search||!i.search.includes("#"),U("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?x(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:q(a),hash:K(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var z=function(e){return e.join("/").replace(/\/\/+/g,"/")},B=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},q=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},K=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},G=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n)}((0,s.Z)(Error));function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var H=["post","put","patch","delete"],Q=(new Set(H),["get"].concat(H));new Set(Q),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred")},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},8309:function(e,t,n){"use strict";e.exports=n(746)},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function j(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case Z:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ae(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Ze(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Ee(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Ze(e),t)for(e=0;e<t.length;e++)Ze(t[e])}}function Te(e,t){return e(t)}function Ce(){}var Ne=!1;function Ae(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Te(e,t,n)}finally{Ne=!1,(null!==_e||null!==Ie)&&(Ce(),Ee())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Pe(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function je(e,t,n,r,i,a,o,u,s){Le=!1,Me=null,Pe.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(ze(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qe(i),e;if(o===r)return qe(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ye=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Xe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,It,Zt,St=!1,Et=[],Tt=null,Ct=null,Nt=null,At=new Map,Dt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Zt(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){St=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),At.forEach(Ut),Dt.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return jt(t,e)}if(0<Et.length){jt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&jt(Tt,e),null!==Ct&&jt(Ct,e),null!==Nt&&jt(Nt,e),At.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Bt=b.ReactCurrentBatchConfig,qt=!0;function Kt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Gt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Wt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Ht,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Qt(e,t,n,r))&&qr(e,t,r,Ht,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Ht=null;function Qt(e,t,n,r){if(Ht=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Jt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=M({},cn,{view:0,detail:0}),hn=an(fn),dn=M({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(M({},dn,{dataTransfer:0})),yn=an(M({},fn,{relatedTarget:0})),mn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Zn(){return In}var Sn=M({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Sn),Tn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(M({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn})),Nn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(An),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Pn=null;l&&"documentMode"in document&&(Pn=document.documentMode);var Ln=l&&"TextEvent"in window&&!Pn,Mn=l&&(!On||Pn&&8<Pn&&11>=Pn),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Wn=null;function Hn(e){Fr(e,0)}function Qn(e){if(W(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(l){var Jn;if(l){var Xn="oninput"in document;if(!Xn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Xn="function"===typeof er.oninput}Jn=Xn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Wn=Gn=null)}function nr(e){if("value"===e.propertyName&&Qn(Wn)){var t=[];Kn(t,Wn,e,we(e)),Ae(Hn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Wn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==H(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ir={};function Zr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Zr("animationend"),Er=Zr("animationiteration"),Tr=Zr("animationstart"),Cr=Zr("transitionend"),Nr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Nr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Or=Ar[Rr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Sr,"onAnimationEnd"),Dr(Er,"onAnimationIteration"),Dr(Tr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Le){if(!Le)throw Error(a(198));var l=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Cn;break;case Sr:case Er:case Tr:s=mn;break;case Cr:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Tn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Tn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Hr(o,u,s,l,!1),null!==c&&null!==f&&Hr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(qn(u))if(Yn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(qn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(m=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Xt=Jt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=De(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Xr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Zi(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Si(e,t){_i++,xi[_i]=e.current,e.current=t}var Ei={},Ti=Ii(Ei),Ci=Ii(!1),Ni=Ei;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Zi(Ci),Zi(Ti)}function Oi(e,t,n){if(Ti.current!==Ei)throw Error(a(168));Si(Ti,t),Si(Ci,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ni=Ti.current,Si(Ti,e),Si(Ci,Ci.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Pi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Zi(Ci),Zi(Ti),Si(Ti,e)):Zi(Ci),Si(Ci,n)}var Fi=null,Ui=!1,Vi=!1;function ji(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),We(Xe,zi),i}finally{kt=t,Vi=!1}}return null}var Bi=[],qi=0,Ki=null,Gi=0,Wi=[],Hi=0,Qi=null,$i=1,Yi="";function Ji(e,t){Bi[qi++]=Gi,Bi[qi++]=Ki,Ki=e,Gi=t}function Xi(e,t,n){Wi[Hi++]=$i,Wi[Hi++]=Yi,Wi[Hi++]=Qi,Qi=e;var r=$i;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else $i=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Ji(e,1),Xi(e,1,0))}function ta(e){for(;e===Ki;)Ki=Bi[--qi],Bi[qi]=null,Gi=Bi[--qi],Bi[qi]=null;for(;e===Qi;)Qi=Wi[--Hi],Wi[Hi]=null,Yi=Wi[--Hi],Wi[Hi]=null,$i=Wi[--Hi],Wi[Hi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:$i,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ma.current;Zi(ma),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Za(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ea(e){null===Sa?Sa=[e]:Sa.push(e)}function Ta(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ea(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Ea(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function Pa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=M({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),Pa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),Pa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),Pa(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function Ba(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Za(a):(i=Di(t)?Ni:Ti.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function qa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Za(a):(a=Di(t)?Ni:Ti.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ha(e){return(0,e._init)(e._payload)}function Qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Ha(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||P(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||P(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function y(i,u,s,c){var l=P(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Ha(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Pc(o.type,o.key,o.props,null,r.mode,s)).ref=Ga(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(P(o))return y(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Qa(!0),Ya=Qa(!1),Ja={},Xa=Ii(Ja),eo=Ii(Ja),to=Ii(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Xa,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Zi(Xa),Si(Xa,t)}function io(){Zi(Xa),Zi(eo),Zi(to)}function ao(e){no(to.current);var t=no(Xa.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Xa,n))}function oo(e){eo.current===e&&(Zi(Xa),Zi(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Zo(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function Eo(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function To(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Do(e,t){var n=vo,r=Eo(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,qo(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Mo(e)}function Po(e,t,n){return n((function(){Lo(t)&&Mo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Mo(e){var t=Ca(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Eo().memoizedState}function jo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Eo();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function Bo(e,t){return jo(8390656,8,e,t)}function qo(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Go(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function Qo(){}function $o(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Xo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Eo().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ta(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ea(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ta(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Za,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Za,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Za,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Fo,useDebugValue:Qo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Xo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Po.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Ns.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Za,useCallback:$o,useContext:Za,useEffect:qo,useImperativeHandle:Ho,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Yo,useReducer:Co,useRef:Vo,useState:function(){return Co(To)},useDebugValue:Qo,useDeferredValue:function(e){return Jo(Eo(),yo.memoizedState,e)},useTransition:function(){return[Co(To)[0],Eo().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Za,useCallback:$o,useContext:Za,useEffect:qo,useImperativeHandle:Ho,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Yo,useReducer:No,useRef:Vo,useState:function(){return No(To)},useDebugValue:Qo,useDeferredValue:function(e){var t=Eo();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[No(To)[0],Eo().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ya(t,null,n,r):$a(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Zo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Eu(e,t,n,r,i)}function Zu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Os,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Os,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Os,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Os,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eu(e,t,n,r,i){var a=Di(n)?Ni:Ti.current;return a=Ai(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Zo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Tu(e,t,n,r,i){if(Di(n)){var a=!0;Li(t)}else a=!1;if(Ia(t,i),null===t.stateNode)qu(e,t),Ba(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Za(c):c=Ai(t,c=Di(n)?Ni:Ti.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&qa(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Ma(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ci.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Za(s):s=Ai(t,s=Di(n)?Ni:Ti.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&qa(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Ma(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ci.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cu(e,t,n,r,a,i)}function Cu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Du,Ru,Ou,Pu,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),rc(r,e,i,-1))}return yc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Hi++]=$i,Wi[Hi++]=Yi,Wi[Hi++]=Qi,$i=e.id,Yi=e.overflow,Qi=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Di(t.type)&&Ri(),Wu(t),null;case 3:return r=t.stateNode,io(),Zi(Ci),Zi(Ti),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ru(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Xa.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)Ur(Pr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":G(r),X(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Xr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Du(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)Ur(Pr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),X(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Pu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Xa.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Zi(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ps&&(Ps=3):yc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Ru(e,t),null===e&&zr(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Zi(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ps||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Bs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Ye()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Zi(Ci),Zi(Ti),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Zi(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Zi(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Xa.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Pu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Yu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Xu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Zc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Zc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Yu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Zc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,ds(e,t,n),Yu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Zc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Zc(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Zc(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Zc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Zc(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Zc(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){Zc(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=Ye())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||f,ys(t,e),Yu=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xu=e,f=e.child;null!==f;){for(h=Xu=f;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Zc(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Xu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Zc(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Zc(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Zc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Xu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=$u;var c=Yu;if($u=o,(Yu=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Xu=s):_s(i);for(;null!==a;)Xu=a,bs(a,t,n),a=a.sibling;Xu=i,$u=u,Yu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):ws(e)}}function ws(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&as(t)}catch(d){Zc(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function xs(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function _s(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Zc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Zc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Zc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Zc(t,o,s)}}}catch(s){Zc(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var Is,Zs=Math.ceil,Ss=b.ReactCurrentDispatcher,Es=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Ds=0,Rs=0,Os=Ii(0),Ps=0,Ls=null,Ms=0,Fs=0,Us=0,Vs=null,js=null,zs=0,Bs=1/0,qs=null,Ks=!1,Gs=null,Ws=null,Hs=!1,Qs=null,$s=0,Ys=0,Js=null,Xs=-1,ec=0;function tc(){return 0!==(6&Cs)?Ye():-1!==Xs?Xs:Xs=Ye()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Ys)throw Ys=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Ps&&sc(e,Ds)),ic(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(Bs=Ye()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Ds:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){Ui=!0,ji(e)}(cc.bind(null,e)):ji(cc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Xs=-1,ec=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=vc();for(Ns===e&&Ds===t||(qs=null,Bs=Ye()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Ss.current=o,Cs=i,null!==As?t=0:(Ns=null,Ds=0,t=Ps)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ls,dc(e,0),sc(e,r),ic(e,Ye()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ls,dc(e,0),sc(e,r),ic(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,js,qs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,js,qs),t);break}xc(e,js,qs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Zs(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,js,qs),r);break}xc(e,js,qs);break;default:throw Error(a(329))}}}return ic(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=js,js=n,null!==t&&uc(t)),e}function uc(e){null===js?js=e:js.push.apply(js,e)}function sc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Cs))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Ye()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ls,dc(e,0),sc(e,t),ic(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,js,qs),ic(e,Ye()),null}function lc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(Bs=Ye()+500,Ui&&zi())}}function fc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&_c();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&zi()}}function hc(){Rs=Os.current,Zi(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Zi(Ci),Zi(Ti),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Zi(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,As=e=Oc(e.current,null),Ds=Rs=t,Ps=0,Ls=null,Us=Fs=Ms=0,js=Vs=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Es.current=null,null===n||null===n.return){Ps=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ps&&(Ps=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function vc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function yc(){0!==Ps&&3!==Ps&&2!==Ps||(Ps=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||sc(Ns,Ds)}function mc(e,t){var n=Cs;Cs|=2;var r=vc();for(Ns===e&&Ds===t||(qs=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Cs=n,Ss.current=r,null!==As)throw Error(a(261));return Ns=null,Ds=0,Ps}function gc(){for(;null!==As;)bc(As)}function kc(){for(;null!==As&&!Qe();)bc(As)}function bc(e){var t=Is(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Es.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Rs)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ps=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ps&&(Ps=5)}function xc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Es.current=null,function(e,t){if(ei=qt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Zc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ns,ns=!1}(e,n),ms(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Hs&&(Hs=!1,Qs=e,$s=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Js?Ys++:(Ys=0,Js=e):Ys=0,zi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function _c(){if(null!==Qs){var e=bt($s),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,$s=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var f=Xu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xu=h;else for(;null!==Xu;){var d=(f=Xu).sibling,p=f.return;if(os(f),f===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var b=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Xu=b;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Zc(s,s.return,x)}if(s===u){Xu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Xu=w;break e}Xu=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Zc(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Ds&n)===n&&(4===Ps||3===Ps&&(130023424&Ds)===Ds&&500>Ye()-zs?dc(e,0):Us|=n),ic(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Ca(e,t))&&(mt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Nc(e,t){return We(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case Z:return(e=Dc(12,n,t,2|i)).elementType=Z,e.lanes=o,e;case C:return(e=Dc(13,n,t,i)).elementType=C,e.lanes=o,e;case N:return(e=Dc(19,n,t,i)).elementType=N,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case E:u=9;break e;case T:u=11;break e;case A:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function zc(e){if(!e)return Ei;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Pi(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function qc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),Pa(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Si(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Zu(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Xi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Ai(t,Ti.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Zo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Cu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===A)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Eu(null,t,r,e,n);break e;case 1:t=Tu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Eu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Ma(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ci.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Za(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),_u(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),qu(e,t),t.tag=1,Di(r)?(e=!0,Li(t)):e=!1,Ia(t,n),Ba(t,r,i),Ka(t,r,i,n),Cu(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Zu(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){qc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){qc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Ye()),0===(6&Cs)&&(Bs=Ye()+500,zi()))}break;case 13:fc((function(){var t=Ca(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Ca(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},It=function(){return kt},Zt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=lc,Ce=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Ee,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},9434:function(e,t,n){"use strict";n.d(t,{zt:function(){return k},I0:function(){return Z},v9:function(){return v}});var r=n(7248),i=n(327),a=n(4164);var o=function(e){e()},u=function(){return o},s=n(2791),c=(0,s.createContext)(null);function l(){return(0,s.useContext)(c)}var f=function(){throw new Error("uSES not initialized!")},h=f,d=function(e,t){return e===t};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=e===c?l:function(){return(0,s.useContext)(e)};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;var r=t(),i=r.store,a=r.subscription,o=r.getServerState,u=h(a.addNestedSub,i.getState,o||i.getState,e,n);return(0,s.useDebugValue)(u),u}}var v=p();n(2110),n(6900);var y={notify:function(){},get:function(){return[]}};function m(e,t){var n,r=y;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=u(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=y)},getListeners:function(){return r}};return o}var g=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?s.useLayoutEffect:s.useEffect;var k=function(e){var t=e.store,n=e.context,r=e.children,i=e.serverState,a=(0,s.useMemo)((function(){var e=m(t);return{store:t,subscription:e,getServerState:i?function(){return i}:void 0}}),[t,i]),o=(0,s.useMemo)((function(){return t.getState()}),[t]);g((function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,o]);var u=n||c;return s.createElement(u.Provider,{value:a},r)};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=e===c?l:function(){return(0,s.useContext)(e)};return function(){return t().store}}var w=b();function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=e===c?w:b(e);return function(){return t().dispatch}}var _,I,Z=x();_=i.useSyncExternalStoreWithSelector,h=_,function(e){e}(r.useSyncExternalStore),I=a.unstable_batchedUpdates,o=I},8459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},6900:function(e,t,n){"use strict";n(8459)},1087:function(e,t,n){"use strict";n.d(t,{VK:function(){return l},rU:function(){return d}});var r=n(9439),i=n(2791),a=n(7689),o=n(8278);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var c=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function l(e){var t=e.basename,n=e.children,u=e.window,s=i.useRef();null==s.current&&(s.current=(0,o.lX)({window:u,v5Compat:!0}));var c=s.current,l=i.useState({action:c.action,location:c.location}),f=(0,r.Z)(l,2),h=f[0],d=f[1];return i.useLayoutEffect((function(){return c.listen(d)}),[c]),i.createElement(a.F0,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:c})}var f="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,h=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d=i.forwardRef((function(e,t){var n,r=e.onClick,l=e.relative,d=e.reloadDocument,p=e.replace,v=e.state,y=e.target,m=e.to,g=e.preventScrollReset,k=s(e,c),b=i.useContext(a.Us).basename,w=!1;if("string"===typeof m&&h.test(m)&&(n=m,f)){var x=new URL(window.location.href),_=m.startsWith("//")?new URL(x.protocol+m):new URL(m),I=(0,o.Zn)(_.pathname,b);_.origin===x.origin&&null!=I?m=I+_.search+_.hash:w=!0}var Z=(0,a.oQ)(m,{relative:l}),S=function(e,t){var n=void 0===t?{}:t,r=n.target,u=n.replace,s=n.state,c=n.preventScrollReset,l=n.relative,f=(0,a.s0)(),h=(0,a.TH)(),d=(0,a.WU)(e,{relative:l});return i.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==u?u:(0,o.Ep)(h)===(0,o.Ep)(d);f(e,{replace:n,state:s,preventScrollReset:c,relative:l})}}),[h,f,d,u,s,r,e,c,l])}(m,{replace:p,state:v,target:y,preventScrollReset:g,relative:l});return i.createElement("a",u({},k,{href:n||Z,onClick:w||d?r:function(e){r&&r(e),e.defaultPrevented||S(e)},ref:t,target:y}))}));var p,v;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(p||(p={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(v||(v={}))},7689:function(e,t,n){"use strict";var r;n.d(t,{AW:function(){return j},F0:function(){return z},TH:function(){return T},UO:function(){return N},Us:function(){return w},WU:function(){return A},Z5:function(){return B},oQ:function(){return S},s0:function(){return C}});var i=n(3433),a=n(5671),o=n(3144),u=n(136),s=n(7277),c=n(9439),l=n(8278),f=n(2791);var h="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},d=f.useState,p=f.useEffect,v=f.useLayoutEffect,y=f.useDebugValue;function m(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!h(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,(r||(r=n.t(f,2))).useSyncExternalStore;var g=f.createContext(null);var k=f.createContext(null);var b=f.createContext(null);var w=f.createContext(null);var x=f.createContext(null);var _=f.createContext({outlet:null,matches:[]});var I=f.createContext(null);function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}function S(e,t){var n=(void 0===t?{}:t).relative;E()||(0,l.J0)(!1);var r=f.useContext(w),i=r.basename,a=r.navigator,o=A(e,{relative:n}),u=o.hash,s=o.pathname,c=o.search,h=s;return"/"!==i&&(h="/"===s?i:(0,l.RQ)([i,s])),a.createHref({pathname:h,search:c,hash:u})}function E(){return null!=f.useContext(x)}function T(){return E()||(0,l.J0)(!1),f.useContext(x).location}function C(){E()||(0,l.J0)(!1);var e=f.useContext(w),t=e.basename,n=e.navigator,r=f.useContext(_).matches,i=T().pathname,a=JSON.stringify((0,l.Zq)(r).map((function(e){return e.pathnameBase}))),o=f.useRef(!1);return f.useEffect((function(){o.current=!0})),f.useCallback((function(e,r){if(void 0===r&&(r={}),o.current)if("number"!==typeof e){var u=(0,l.pC)(e,JSON.parse(a),i,"path"===r.relative);"/"!==t&&(u.pathname="/"===u.pathname?t:(0,l.RQ)([t,u.pathname])),(r.replace?n.replace:n.push)(u,r.state,r)}else n.go(e)}),[t,n,a,i])}function N(){var e=f.useContext(_).matches,t=e[e.length-1];return t?t.params:{}}function A(e,t){var n=(void 0===t?{}:t).relative,r=f.useContext(_).matches,i=T().pathname,a=JSON.stringify((0,l.Zq)(r).map((function(e){return e.pathnameBase})));return f.useMemo((function(){return(0,l.pC)(e,JSON.parse(a),i,"path"===n)}),[e,a,i,n])}function D(){var e=function(){var e,t=f.useContext(I),n=F(O.UseRouteError),r=U(O.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=(0,l.WK)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:i},n):null,null)}var R,O,P=function(e){(0,u.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return(0,o.Z)(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?f.createElement(_.Provider,{value:this.props.routeContext},f.createElement(I.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(f.Component);function L(e){var t=e.routeContext,n=e.match,r=e.children,i=f.useContext(g);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(_.Provider,{value:t},r)}function M(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var r=e,i=null==n?void 0:n.errors;if(null!=i){var a=r.findIndex((function(e){return e.route.id&&(null==i?void 0:i[e.route.id])}));a>=0||(0,l.J0)(!1),r=r.slice(0,Math.min(r.length,a+1))}return r.reduceRight((function(e,a,o){var u=a.route.id?null==i?void 0:i[a.route.id]:null,s=null;n&&(s=a.route.ErrorBoundary?f.createElement(a.route.ErrorBoundary,null):a.route.errorElement?a.route.errorElement:f.createElement(D,null));var c=t.concat(r.slice(0,o+1)),l=function(){var t=e;return u?t=s:a.route.Component?t=f.createElement(a.route.Component,null):a.route.element&&(t=a.route.element),f.createElement(L,{match:a,routeContext:{outlet:e,matches:c},children:t})};return n&&(a.route.ErrorBoundary||a.route.errorElement||0===o)?f.createElement(P,{location:n.location,component:s,error:u,children:l(),routeContext:{outlet:null,matches:c}}):l()}),null)}function F(e){var t=f.useContext(k);return t||(0,l.J0)(!1),t}function U(e){var t=function(e){var t=f.useContext(_);return t||(0,l.J0)(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||(0,l.J0)(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(R||(R={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(O||(O={}));var V;function j(e){(0,l.J0)(!1)}function z(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,i=void 0===r?null:r,a=e.location,o=e.navigationType,u=void 0===o?l.aU.Pop:o,s=e.navigator,c=e.static,h=void 0!==c&&c;E()&&(0,l.J0)(!1);var d=n.replace(/^\/*/,"/"),p=f.useMemo((function(){return{basename:d,navigator:s,static:h}}),[d,s,h]);"string"===typeof a&&(a=(0,l.cP)(a));var v=a,y=v.pathname,m=void 0===y?"/":y,g=v.search,k=void 0===g?"":g,b=v.hash,_=void 0===b?"":b,I=v.state,Z=void 0===I?null:I,S=v.key,T=void 0===S?"default":S,C=f.useMemo((function(){var e=(0,l.Zn)(m,d);return null==e?null:{location:{pathname:e,search:k,hash:_,state:Z,key:T},navigationType:u}}),[d,m,k,_,Z,T,u]);return null==C?null:f.createElement(w.Provider,{value:p},f.createElement(x.Provider,{children:i,value:C}))}function B(e){var t=e.children,n=e.location,r=f.useContext(g);return function(e,t){E()||(0,l.J0)(!1);var n,r=f.useContext(w).navigator,i=f.useContext(k),a=f.useContext(_).matches,o=a[a.length-1],u=o?o.params:{},s=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,T());if(t){var h,d="string"===typeof t?(0,l.cP)(t):t;"/"===s||(null==(h=d.pathname)?void 0:h.startsWith(s))||(0,l.J0)(!1),n=d}else n=c;var p=n.pathname||"/",v="/"===s?p:p.slice(s.length)||"/",y=(0,l.fp)(e,{pathname:v}),m=M(y&&y.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:(0,l.RQ)([s,r.encodeLocation?r.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?s:(0,l.RQ)([s,r.encodeLocation?r.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),a,i||void 0);return t&&m?f.createElement(x.Provider,{value:{location:Z({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:l.aU.Pop}},m):m}(r&&!t?r.router.routes:K(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(V||(V={}));var q=new Promise((function(){}));f.Component;function K(e,t){void 0===t&&(t=[]);var n=[];return f.Children.forEach(e,(function(e,r){if(f.isValidElement(e)){var a=[].concat((0,i.Z)(t),[r]);if(e.type!==f.Fragment){e.type!==j&&(0,l.J0)(!1),e.props.index&&e.props.children&&(0,l.J0)(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=K(e.props.children,a)),n.push(o)}else n.push.apply(n,K(e.props.children,a))}})),n}},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function Z(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+T(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+T(u=e[c],c);s+=C(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=C(u=u.value,t,i,l=a+T(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=Z,t.createFactory=function(e){var t=Z.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6896:function(e,t,n){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function u(e,t,n){u.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function s(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function c(e){var t="undefined"==typeof e?"undefined":N(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,t,n,r,f,h,d){d=d||[];var p=(f=f||[]).slice(0);if("undefined"!=typeof h){if(r){if("function"==typeof r&&r(p,h))return;if("object"===("undefined"==typeof r?"undefined":N(r))){if(r.prefilter&&r.prefilter(p,h))return;if(r.normalize){var v=r.normalize(p,h,e,t);v&&(e=v[0],t=v[1])}}}p.push(h)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var y="undefined"==typeof e?"undefined":N(e),m="undefined"==typeof t?"undefined":N(t),g="undefined"!==y||d&&d[d.length-1].lhs&&d[d.length-1].lhs.hasOwnProperty(h),k="undefined"!==m||d&&d[d.length-1].rhs&&d[d.length-1].rhs.hasOwnProperty(h);if(!g&&k)n(new a(p,t));else if(!k&&g)n(new o(p,e));else if(c(e)!==c(t))n(new i(p,e,t));else if("date"===c(e)&&e-t!==0)n(new i(p,e,t));else if("object"===y&&null!==e&&null!==t)if(d.filter((function(t){return t.lhs===e})).length)e!==t&&n(new i(p,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){var b;for(e.length,b=0;b<e.length;b++)b>=t.length?n(new u(p,b,new o(void 0,e[b]))):l(e[b],t[b],n,r,p,b,d);for(;b<t.length;)n(new u(p,b,new a(void 0,t[b++])))}else{var w=Object.keys(e),x=Object.keys(t);w.forEach((function(i,a){var o=x.indexOf(i);o>=0?(l(e[i],t[i],n,r,p,i,d),x=s(x,o)):l(e[i],void 0,n,r,p,i,d)})),x.forEach((function(e){l(void 0,t[e],n,r,p,e,d)}))}d.length=d.length-1}else e!==t&&("number"===y&&isNaN(e)&&isNaN(t)||n(new i(p,e,t)))}function f(e,t,n,r){return r=r||[],l(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function h(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":h(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":e=s(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function d(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,a=n.path?n.path.length-1:0;++i<a;)"undefined"==typeof r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":h(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":p(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":p(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=s(e,t)}return e}function v(e,t,n){if(e&&t&&n&&n.kind){var r,i,a=e;for(i=n.path.length-1,r=0;r<i;r++)"undefined"==typeof a[n.path[r]]&&(a[n.path[r]]={}),a=a[n.path[r]];switch(n.kind){case"A":p(a[n.path[r]],n.index,n.item);break;case"D":case"E":a[n.path[r]]=n.lhs;break;case"N":delete a[n.path[r]]}}}function y(e,t,n){e&&t&&l(e,t,(function(r){n&&!n(e,t,r)||d(e,t,r)}))}function m(e){return"color: "+R[e].color+"; font-weight: bold"}function g(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,a=e.index,o=e.item;switch(t){case"E":return[n.join("."),r,"\u2192",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+a+"]",o];default:return[]}}function k(e,t,n,r){var i=f(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach((function(e){var t=e.kind,r=g(e);n.log.apply(n,["%c "+R[t].text,m(t)].concat(A(r)))})):n.log("\u2014\u2014 no diff \u2014\u2014");try{n.groupEnd()}catch(e){n.log("\u2014\u2014 diff end \u2014\u2014 ")}}function b(e,t,n,r){switch("undefined"==typeof e?"undefined":N(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,A(n)):e[r];case"function":return e(t);default:return e}}function w(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var a=["action"];return a.push("%c"+String(e.type)),t&&a.push("%c@ "+r),n&&a.push("%c(in "+i.toFixed(2)+" ms)"),a.join(" ")}}function x(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,a=void 0===i?w(t):i,o=t.collapsed,u=t.colors,s=t.level,c=t.diff,l="undefined"==typeof t.titleFormatter;e.forEach((function(i,f){var h=i.started,d=i.startedTime,p=i.action,v=i.prevState,y=i.error,m=i.took,g=i.nextState,w=e[f+1];w&&(g=w.prevState,m=w.started-h);var x=r(p),_="function"==typeof o?o((function(){return g}),p,i):o,I=T(d),Z=u.title?"color: "+u.title(x)+";":"",S=["color: gray; font-weight: lighter;"];S.push(Z),t.timestamp&&S.push("color: gray; font-weight: lighter;"),t.duration&&S.push("color: gray; font-weight: lighter;");var E=a(x,I,m);try{_?u.title&&l?n.groupCollapsed.apply(n,["%c "+E].concat(S)):n.groupCollapsed(E):u.title&&l?n.group.apply(n,["%c "+E].concat(S)):n.group(E)}catch(e){n.log(E)}var C=b(s,x,[v],"prevState"),N=b(s,x,[x],"action"),A=b(s,x,[y,v],"error"),D=b(s,x,[g],"nextState");if(C)if(u.prevState){var R="color: "+u.prevState(v)+"; font-weight: bold";n[C]("%c prev state",R,v)}else n[C]("prev state",v);if(N)if(u.action){var O="color: "+u.action(x)+"; font-weight: bold";n[N]("%c action    ",O,x)}else n[N]("action    ",x);if(y&&A)if(u.error){var P="color: "+u.error(y,v)+"; font-weight: bold;";n[A]("%c error     ",P,y)}else n[A]("error     ",y);if(D)if(u.nextState){var L="color: "+u.nextState(g)+"; font-weight: bold";n[D]("%c next state",L,g)}else n[D]("next state",g);c&&k(v,g,n,_);try{n.groupEnd()}catch(e){n.log("\u2014\u2014 log end \u2014\u2014")}}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},O,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,a=t.predicate,o=t.logErrors,u=t.diffPredicate;if("undefined"==typeof n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var s=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof a&&!a(n,c))return e(c);var l={};s.push(l),l.started=C.now(),l.startedTime=new Date,l.prevState=r(n()),l.action=c;var f=void 0;if(o)try{f=e(c)}catch(e){l.error=i(e)}else f=e(c);l.took=C.now()-l.started,l.nextState=r(n());var h=t.diff&&"function"==typeof u?u(n,c):t.diff;if(x(s,Object.assign({},t,{diff:h})),s.length=0,l.error)throw l.error;return f}}}}var I,Z,S=function(e,t){return new Array(t+1).join(e)},E=function(e,t){return S("0",t-e.toString().length)+e},T=function(e){return E(e.getHours(),2)+":"+E(e.getMinutes(),2)+":"+E(e.getSeconds(),2)+"."+E(e.getMilliseconds(),3)},C="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},D=[];I="object"===("undefined"==typeof n.g?"undefined":N(n.g))&&n.g?n.g:"undefined"!=typeof window?window:{},(Z=I.DeepDiff)&&D.push((function(){"undefined"!=typeof Z&&I.DeepDiff===f&&(I.DeepDiff=Z,Z=void 0)})),t(i,r),t(a,r),t(o,r),t(u,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:y,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:v,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof Z},enumerable:!0},noConflict:{value:function(){return D&&(D.forEach((function(e){e()})),D=null),f},enumerable:!0}});var R={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},O={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?_()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=O,e.createLogger=_,e.logger=P,e.default=P,Object.defineProperty(e,"__esModule",{value:!0})}(t)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,R(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,Z=null,S=-1,E=5,T=-1;function C(){return!(t.unstable_now()-T<E)}function N(){if(null!==Z){var e=t.unstable_now();T=e;var n=!0;try{n=Z(!0,e)}finally{n?_():(I=!1,Z=null)}}else I=!1}if("function"===typeof k)_=function(){k(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=N,_=function(){D.postMessage(null)}}else _=function(){m(N,0)};function R(e){Z=e,I||(I=!0,_())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},1561:function(e,t,n){"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},7595:function(e,t,n){"use strict";var r=n(2791),i=n(7248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},7248:function(e,t,n){"use strict";e.exports=n(1561)},327:function(e,t,n){"use strict";e.exports=n(7595)},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function u(e){r(o,i,a,u,s,"next",e)}function s(e){r(o,i,a,u,s,"throw",e)}u(void 0)}))}}n.d(t,{Z:function(){return i}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},5647:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9611),i=n(8814);function a(e,t,n){return a=(0,i.Z)()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&(0,r.Z)(a,n.prototype),a},a.apply(null,arguments)}},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(181);function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}},7277:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(1120),i=n(8814),a=n(1002),o=n(7326);function u(e){var t=(0,i.Z)();return function(){var n,i=(0,r.Z)(e);if(t){var u=(0,r.Z)(this).constructor;n=Reflect.construct(i,arguments,u)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===(0,a.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(e)}(this,n)}}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9611);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},4165:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(N){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),u=new E(r||[]);return a(o,"_invoke",{value:_(e,n,u)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=f;var d={};function p(){}function v(){}function y(){}var m={};l(m,u,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(T([])));k&&k!==t&&n.call(k,u)&&(m=k);var b=y.prototype=p.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(a,o,u,s){var c=h(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==(0,r.Z)(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,s)}),(function(e){i("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function Z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Z,this),this.reset(!0)}function T(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=y,a(b,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(f(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),l(b,c,"Generator"),l(b,u,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var i=n(181),a=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||(0,i.Z)(e,t)||(0,a.Z)()}},4506:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(3878),i=n(9199),a=n(181),o=n(5267);function u(e){return(0,r.Z)(e)||(0,i.Z)(e)||(0,a.Z)(e)||(0,o.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var i=n(9199),a=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},8664:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1120),i=n(9611);var a=n(5647);function o(e){var t="function"===typeof Map?new Map:void 0;return o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return(0,a.Z)(e,arguments,(0,r.Z)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),(0,i.Z)(o,e)},o(e)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{569:"e4160509",592:"9f18d20d",693:"6fa6d925",787:"724a6a00",793:"c1f2f706",812:"9b43eeca",869:"7eaf0c3a",871:"dc539e82",878:"6c11182c",925:"d11c2798",948:"c1b5747f"}[e]+".chunk.js"},n.miniCssF=function(e){return"static/css/"+e+"."+{592:"2d4ba1c8",693:"21b304b8",793:"46687cec",812:"e7523433",869:"da519398",878:"a3bfc623",925:"3ffeb8a7"}[e]+".chunk.css"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="amazon-clone-react:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){if("undefined"!==typeof document){var e=function(e){return new Promise((function(t,r){var i=n.miniCssF(e),a=n.p+i;if(function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=(o=n[r]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(i===e||i===t))return o}var a=document.getElementsByTagName("style");for(r=0;r<a.length;r++){var o;if((i=(o=a[r]).getAttribute("data-href"))===e||i===t)return o}}(i,a))return t();!function(e,t,n,r,i){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.onerror=a.onload=function(n){if(a.onerror=a.onload=null,"load"===n.type)r();else{var o=n&&("load"===n.type?"missing":n.type),u=n&&n.target&&n.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+u+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=o,s.request=u,a.parentNode&&a.parentNode.removeChild(a),i(s)}},a.href=t,n?n.parentNode.insertBefore(a,n.nextSibling):document.head.appendChild(a)}(e,a,null,t,r)}))},t={179:0};n.f.miniCss=function(n,r){t[n]?r.push(t[n]):0!==t[n]&&{592:1,693:1,793:1,812:1,869:1,878:1,925:1}[n]&&r.push(t[n]=e(n).then((function(){t[n]=0}),(function(e){throw delete t[n],e})))}}}(),function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkamazon_clone_react=self.webpackChunkamazon_clone_react||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(2791),t=n(1250),r=n(1087),i=n(7689),a=n(9434),o=n(6599),u=n(688),s=n(184),c=function(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"loading"})})},l=(0,e.lazy)((function(){return Promise.all([n.e(871),n.e(869)]).then(n.bind(n,6648))})),f=(0,e.lazy)((function(){return n.e(925).then(n.bind(n,8925))})),h=(0,e.lazy)((function(){return n.e(878).then(n.bind(n,878))})),d=(0,e.lazy)((function(){return Promise.all([n.e(871),n.e(592)]).then(n.bind(n,8592))})),p=(0,e.lazy)((function(){return Promise.all([n.e(871),n.e(948),n.e(693)]).then(n.bind(n,5693))})),v=(0,e.lazy)((function(){return Promise.all([n.e(871),n.e(948),n.e(569),n.e(793)]).then(n.bind(n,1793))})),y=(0,e.lazy)((function(){return Promise.all([n.e(871),n.e(948),n.e(812)]).then(n.bind(n,8812))}));var m=function(){var t=(0,a.I0)();return(0,e.useEffect)((function(){o.I.onAuthStateChanged((function(e){t(e?(0,u.Mc)(e):(0,u.Mc)(null))}))}),[t]),(0,s.jsx)(r.VK,{children:(0,s.jsx)("div",{className:"App",children:(0,s.jsx)(e.Suspense,{fallback:(0,s.jsx)(c,{}),children:(0,s.jsxs)(i.Z5,{children:[(0,s.jsx)(i.AW,{exact:!0,path:"/",element:(0,s.jsx)(l,{})}),(0,s.jsx)(i.AW,{path:"/product/:id",element:(0,s.jsx)(d,{})}),(0,s.jsx)(i.AW,{path:"/login",element:(0,s.jsx)(f,{})}),(0,s.jsx)(i.AW,{path:"/register",element:(0,s.jsx)(h,{})}),(0,s.jsx)(i.AW,{path:"/checkout",element:(0,s.jsx)(p,{})}),(0,s.jsx)(i.AW,{path:"/orders",element:(0,s.jsx)(y,{})}),(0,s.jsx)(i.AW,{path:"/payment",element:(0,s.jsx)(v,{})})]})})})})},g=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},k=n(1413);function b(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var w="function"===typeof Symbol&&Symbol.observable||"@@observable",x=function(){return Math.random().toString(36).substring(7).split("").join(".")},_={INIT:"@@redux/INIT"+x(),REPLACE:"@@redux/REPLACE"+x(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+x()}};function I(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Z(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(b(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(b(1));return n(Z)(e,t)}if("function"!==typeof e)throw new Error(b(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(b(3));return a}function f(e){if("function"!==typeof e)throw new Error(b(4));if(s)throw new Error(b(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(b(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!I(e))throw new Error(b(7));if("undefined"===typeof e.type)throw new Error(b(8));if(s)throw new Error(b(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:_.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(b(10));i=e,h({type:_.REPLACE})}})[w]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(b(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[w]=function(){return this},e},r}function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}n(6896);function E(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var T=E();T.withExtraArgument=E;var C=T,N=n(3433),A=n(9733),D={loading:!1,basket:[],user:null,error:null},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.TR:var n=[].concat((0,N.Z)(e.basket),[t.payload]);return(0,k.Z)((0,k.Z)({},e),{},{basket:n});case A.b1:var r=(0,N.Z)(e.basket),i=r.findIndex((function(e){return e.id===t.payload}));return i>=0&&r.splice(i,1),(0,k.Z)((0,k.Z)({},e),{},{basket:r});case A.ph:return(0,k.Z)((0,k.Z)({},e),{},{basket:[]});case A.ch:case A.Re:case A._J:return(0,k.Z)((0,k.Z)({},e),{},{loading:!0});case A.bp:case A.XP:return(0,k.Z)((0,k.Z)({},e),{},{loading:!1,user:t.payload});case A.$x:return(0,k.Z)((0,k.Z)({},e),{},{user:null});case A.QE:return(0,k.Z)((0,k.Z)({},e),{},{user:t.payload});case A.YY:case A.Qj:case A.ek:return(0,k.Z)((0,k.Z)({},e),{},{loading:!1,error:t.payload});default:return e}},O=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:_.INIT}))throw new Error(b(12));if("undefined"===typeof n(void 0,{type:_.PROBE_UNKNOWN_ACTION()}))throw new Error(b(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(b(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({data:R});var P=Z(O,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(b(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=S.apply(void 0,a)(n.dispatch),(0,k.Z)((0,k.Z)({},n),{},{dispatch:r})}}}.apply(void 0,[C])),L=P;t.createRoot(document.getElementById("root")).render((0,s.jsx)(e.StrictMode,{children:(0,s.jsx)(a.zt,{store:L,children:(0,s.jsx)(m,{})})})),g()}()}();
//# sourceMappingURL=main.2522c989.js.map